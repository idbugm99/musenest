
> musenest@1.0.0 dev
> nodemon server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753687362061-415556682.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753687362085_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1402ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1416ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 13ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 217
🔌 Queue database connection released
✅ Upload processing completed in 1441ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'oval',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 416, y: 463, width: 121, height: 139 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753687362085_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753687458144_1753687362085_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 10px → actual 25px
Processing blur for MALE_GENITALIA_EXPOSED: { x: 416, y: 463, width: 121, height: 139 }
Final blur coordinates: 416,463 121x139
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753687458144_1753687362085_BlowJob.jpg
Blurred file created successfully - Size: 4217228 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753687931319-835369057.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753687931342_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1339ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1351ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 218
🔌 Queue database connection released
✅ Upload processing completed in 1366ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688042575-441578645.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688042594_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1317ms
📊 Status: 200, Content-Length: 1085
🏁 Complete response received in 1324ms, size: 1085 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.66122722625732, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.66122722625732
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.79510450363159,
  nudity_contribution: 78.66122722625732,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 23ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 219
🔌 Queue database connection released
✅ Upload processing completed in 1359ms
📊 Result: success=true, status=flagged, nudity=78.66122722625732
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FACE_FEMALE: { x: 1065, y: 1004, width: 589, height: 576 },
    MALE_GENITALIA_EXPOSED: { x: 243, y: 119, width: 1565, height: 1718 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688042594_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688052323_1753688042594_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 10px → actual 50px
Processing blur for FACE_FEMALE: { x: 1065, y: 1004, width: 589, height: 576 }
Expanded blur coordinates: 770,716 1179x1152 (added 295x288 padding)
DEBUG: About to apply 50px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753688052636.jpg
DEBUG: Processing shape 'square' for FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 243, y: 119, width: 1565, height: 1718 }
Expanded blur coordinates: 0,0 3131x3000 (added 783x859 padding)
DEBUG: About to apply 50px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688055451.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688052323_1753688042594_BlowJob.jpg
Blurred file created successfully - Size: 1234348 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688124848-390755847.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688124867_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1255ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1266ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 15ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 9ms
Content flagged and added to moderation queue: 220
🔌 Queue database connection released
✅ Upload processing completed in 1305ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688241406-630199684.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688241423_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1534ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1545ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 221
🔌 Queue database connection released
✅ Upload processing completed in 1552ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 331, y: 159, width: 1530, height: 1698 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688241423_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688260537_1753688241423_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 10px → actual 50px
Processing blur for MALE_GENITALIA_EXPOSED: { x: 331, y: 159, width: 1530, height: 1698 }
Final blur coordinates: 331,159 1530x1698
DEBUG: About to apply 50px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688261202.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688260537_1753688241423_BlowJob.jpg
Blurred file created successfully - Size: 3332167 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688356158-928692598.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688356176_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1403ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1414ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 222
🔌 Queue database connection released
✅ Upload processing completed in 1423ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 7,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 330, y: 357, width: 77, height: 140 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688356176_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688400743_1753688356176_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 7px → actual 35px
Processing blur for MALE_GENITALIA_EXPOSED: { x: 330, y: 357, width: 77, height: 140 }
Final blur coordinates: 330,357 77x140
DEBUG: About to apply 35px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688400781.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688400743_1753688356176_BlowJob.jpg
Blurred file created successfully - Size: 4217591 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688535589-355490219.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688535603_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 5980ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 5989ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 223
🔌 Queue database connection released
✅ Upload processing completed in 5997ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FACE_FEMALE: { x: 1059, y: 1006, width: 601, height: 555 },
    MALE_GENITALIA_EXPOSED: { x: 538, y: 643, width: 1530, height: 1698 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688535603_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688562243_1753688535603_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 10px → actual 50px
Processing blur for FACE_FEMALE: { x: 1059, y: 1006, width: 601, height: 555 }
Final blur coordinates: 1059,1006 601x555
DEBUG: About to apply 50px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753688562357.jpg
DEBUG: Processing shape 'square' for FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 538, y: 643, width: 1530, height: 1698 }
Final blur coordinates: 538,643 1530x1698
DEBUG: About to apply 50px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688563178.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688562243_1753688535603_BlowJob.jpg
Blurred file created successfully - Size: 3416231 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688692782-684710031.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688692805_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1289ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1299ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 224
🔌 Queue database connection released
✅ Upload processing completed in 1313ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 2085, y: 2320, width: 570, height: 675 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688692805_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688731744_1753688692805_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2085, y: 2320, width: 570, height: 675 }
Final blur coordinates: 2085,2320 570x675
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688731877.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688731744_1753688692805_BlowJob.jpg
Blurred file created successfully - Size: 4164687 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688892391-816831640.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688892406_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 10925ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 10936ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.97651195526123, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.97651195526123
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 71.07886075973511,
  nudity_contribution: 78.97651195526123,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 225
🔌 Queue database connection released
✅ Upload processing completed in 10946ms
📊 Result: success=true, status=flagged, nudity=78.97651195526123
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753689116448-878712013.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689116466_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1317ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1329ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 226
🔌 Queue database connection released
✅ Upload processing completed in 1335ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 15,
  opacity: 0.3,
  shape: 'oval',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 2000, y: 2390, width: 750, height: 610 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689116466_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753689180676_1753689116466_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 15px (1:1 ratio)
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2000, y: 2390, width: 750, height: 610 }
Final blur coordinates: 2000,2390 750x610
DEBUG: About to apply 15px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753689180806.jpg
DEBUG: Processing shape 'oval' for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753689180676_1753689116466_BlowJob.jpg
Blurred file created successfully - Size: 4158195 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:964
            } else {
            ^

SyntaxError: Missing catch or finally after try
    at wrapSafe (node:internal/modules/cjs/loader:1662:18)
    at Module._compile (node:internal/modules/cjs/loader:1704:20)
    at Object..js (node:internal/modules/cjs/loader:1895:10)
    at Module.load (node:internal/modules/cjs/loader:1465:32)
    at Function._load (node:internal/modules/cjs/loader:1282:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
    at Module.require (node:internal/modules/cjs/loader:1487:12)
    at require (node:internal/modules/helpers:135:16)
    at Object.<anonymous> (/Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:13:34)

Node.js v22.17.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753689432872-738773309.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689432891_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 17690ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 17698ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 7ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 227
🔌 Queue database connection released
✅ Upload processing completed in 17715ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753689651256-490137948.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689651273_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1351ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1352ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 0ms
Content flagged and added to moderation queue: 228
🔌 Queue database connection released
✅ Upload processing completed in 1360ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'oval',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 2020, y: 2320, width: 655, height: 680 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689651273_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753689700211_1753689651273_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2020, y: 2320, width: 655, height: 680 }
Final blur coordinates: 2020,2320 655x680
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753689700334.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753689700211_1753689651273_BlowJob.jpg
Blurred file created successfully - Size: 4164777 bytes
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753714369839-216157075.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753714369883_HoldingTits.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 2780ms
📊 Status: 200, Content-Length: 1394
🏁 Complete response received in 2791ms, size: 1394 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=81.63187503814697, pose=artistic_or_neutral, suggestive=0
✅ Transformation complete, final nudity score: 81.63187503814697
🎭 Pose analysis: artistic_or_neutral (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    reasoning: [],
    torso_angle: 1.0296496805327666
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 1.0296496805327666
  },
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 57.142312526702874,
  nudity_contribution: 81.63187503814697,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.6%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 28ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 8ms
Content flagged and added to moderation queue: 229
🔌 Queue database connection released
✅ Upload processing completed in 2838ms
📊 Result: success=true, status=flagged, nudity=81.63187503814697
📤 Sending successful response to client...
✅ Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753714957595-691953133.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753714957613_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1445ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1445ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 9ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 3ms
Content flagged and added to moderation queue: 230
🔌 Queue database connection released
✅ Upload processing completed in 1468ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 780, y: 2333, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1127, y: 1880, width: 821, height: 2043 },
    manual_blur_1: { x: 1267, y: 867, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753714957613_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753714995705_1753714957613_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 780, y: 2333, width: 1578, height: 202 }
Final blur coordinates: 2333,642 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753714995783.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1127, y: 1880, width: 821, height: 2043 }
Final blur coordinates: 1880,1052 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753714995889.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_1: { x: 1267, y: 867, width: 900, height: 1000 }
Final blur coordinates: 867,833 1000x900
DEBUG: About to apply 10px blur to manual_blur_1 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_1_1753714996010.jpg
DEBUG: Using pure Gaussian blur for manual_blur_1
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753714995705_1753714957613_BendoverAss.jpg
Blurred file created successfully - Size: 2241660 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753715036372-395207573.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753715036387_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1378ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1390ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 231
🔌 Queue database connection released
✅ Upload processing completed in 1401ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'manual_blur_2'
  ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 820, y: 2287, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1173, y: 1280, width: 821, height: 2043 },
    manual_blur_2: { x: 1147, y: 673, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753715036387_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753715078071_1753715036387_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_2' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 820, y: 2287, width: 1578, height: 202 }
Final blur coordinates: 2287,602 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753715078154.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1173, y: 1280, width: 821, height: 2043 }
Final blur coordinates: 1280,1006 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753715078278.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_2: { x: 1147, y: 673, width: 900, height: 1000 }
Final blur coordinates: 673,953 1000x900
DEBUG: About to apply 10px blur to manual_blur_2 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_2_1753715078408.jpg
DEBUG: Using pure Gaussian blur for manual_blur_2
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753715078071_1753715036387_BendoverAss.jpg
Blurred file created successfully - Size: 2294269 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753716129990-822049859.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716130006_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1223ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1235ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 9ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 232
🔌 Queue database connection released
✅ Upload processing completed in 1247ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1093, y: 1473, width: 821, height: 2043 },
    manual_blur_1: { x: 1173, y: 773, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716130006_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716162522_1753716130006_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753716162610.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1093, y: 1473, width: 821, height: 2043 }
Final blur coordinates: 1473,1086 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753716162724.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_1: { x: 1173, y: 773, width: 900, height: 1000 }
Final blur coordinates: 773,927 1000x900
DEBUG: About to apply 10px blur to manual_blur_1 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_1_1753716162866.jpg
DEBUG: Using pure Gaussian blur for manual_blur_1
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716162522_1753716130006_BendoverAss.jpg
Blurred file created successfully - Size: 2295253 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753716385622-547992495.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716385638_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1430ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1430ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 233
🔌 Queue database connection released
✅ Upload processing completed in 1438ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED'
  ],
  overlayPositions: {
    FACE_FEMALE: { x: 1059, y: 1006, width: 601, height: 555 },
    MALE_GENITALIA_EXPOSED: { x: 650, y: 645, width: 1530, height: 1698 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716385638_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716401223_1753716385638_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 1059, y: 1006, width: 601, height: 555 }
Final blur coordinates: 1059,1006 601x555
DEBUG: About to apply 10px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753716401299.jpg
DEBUG: Using pure Gaussian blur for FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 650, y: 645, width: 1530, height: 1698 }
Final blur coordinates: 650,645 1530x1698
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753716401437.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716401223_1753716385638_BlowJob.jpg
Blurred file created successfully - Size: 3550758 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'PullingNipples.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753716422702-876070230.jpg',
  originalName: 'PullingNipples.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716422711_PullingNipples.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1314ms
📊 Status: 200, Content-Length: 1520
🏁 Complete response received in 1420ms, size: 1520 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=77.49767899513245, pose=artistic_or_neutral, suggestive=0
✅ Transformation complete, final nudity score: 77.49767899513245
🎭 Pose analysis: artistic_or_neutral (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 3.2891086645975216,
    leg_spread: 0.21122115850448608,
    reasoning: [],
    torso_angle: 6.063617452352097
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 3.2891086645975216,
    leg_spread: 0.21122115850448608,
    shoulder_width: 0.3002632260322571,
    torso_angle: 6.063617452352097
  },
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 54.24837529659271,
  nudity_contribution: 77.49767899513245,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_77.5%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 234
🔌 Queue database connection released
✅ Upload processing completed in 1428ms
📊 Result: success=true, status=flagged, nudity=77.49767899513245
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED',
    'BELLY_EXPOSED',
    'FEMALE_BREAST_EXPOSED'
  ],
  overlayPositions: {
    BELLY_EXPOSED: { x: 1727, y: 727, width: 195, height: 2311 },
    FACE_FEMALE: { x: 700, y: 1013, width: 1018, height: 943 },
    FEMALE_BREAST_EXPOSED: { x: 1187, y: 2127, width: 1274, height: 1849 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716422711_PullingNipples.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716447274_1753716422711_PullingNipples.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BELLY_EXPOSED', 'FACE_FEMALE', 'FEMALE_BREAST_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BELLY_EXPOSED: { x: 1727, y: 727, width: 195, height: 2311 }
Final blur coordinates: 727,1078 2311x195
DEBUG: About to apply 10px blur to BELLY_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BELLY_EXPOSED_1753716447340.jpg
DEBUG: Using pure Gaussian blur for BELLY_EXPOSED
Processing blur for FACE_FEMALE: { x: 700, y: 1013, width: 1018, height: 943 }
Final blur coordinates: 1013,1282 943x1018
DEBUG: About to apply 10px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753716447448.jpg
DEBUG: Using pure Gaussian blur for FACE_FEMALE
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1187, y: 2127, width: 1274, height: 1849 }
Final blur coordinates: 2127,539 1849x1274
DEBUG: About to apply 10px blur to FEMALE_BREAST_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_BREAST_EXPOSED_1753716447635.jpg
DEBUG: Using pure Gaussian blur for FEMALE_BREAST_EXPOSED
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716447274_1753716422711_PullingNipples.jpg
Blurred file created successfully - Size: 2326709 bytes
Query test with limit/offset interpolation
Query executed successfully, got 20 items
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753716845088-937326731.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716845101_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 7572ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 7576ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 24ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 235
🔌 Queue database connection released
✅ Upload processing completed in 7605ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED',
    'BELLY_EXPOSED',
    'FEMALE_BREAST_EXPOSED',
    'manual_blur_2'
  ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1080, y: 1600, width: 821, height: 2043 },
    manual_blur_2: { x: 1213, y: 560, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716845101_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716898135_1753716845101_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_2' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753716898228.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1080, y: 1600, width: 821, height: 2043 }
Final blur coordinates: 1600,1099 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753716898342.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_2: { x: 1213, y: 560, width: 900, height: 1000 }
Final blur coordinates: 560,887 1000x900
DEBUG: About to apply 10px blur to manual_blur_2 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_2_1753716898475.jpg
DEBUG: Using pure Gaussian blur for manual_blur_2
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716898135_1753716845101_BendoverAss.jpg
Blurred file created successfully - Size: 2253672 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717059754-625230037.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717059764_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1277ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1277ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 236
🔌 Queue database connection released
✅ Upload processing completed in 1285ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED',
    'BELLY_EXPOSED',
    'FEMALE_BREAST_EXPOSED',
    'manual_blur_2'
  ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1167, y: 1500, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717059764_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717077071_1753717059764_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717077160.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1167, y: 1500, width: 821, height: 2043 }
Final blur coordinates: 1500,1012 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717077278.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717077071_1753717059764_BendoverAss.jpg
Blurred file created successfully - Size: 2393428 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717164351-431599513.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717164358_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1328ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1338ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 237
🔌 Queue database connection released
✅ Upload processing completed in 1346ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED',
    'BELLY_EXPOSED',
    'FEMALE_BREAST_EXPOSED',
    'manual_blur_2'
  ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1153, y: 1167, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717164358_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717184456_1753717164358_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717184546.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1153, y: 1167, width: 821, height: 2043 }
Final blur coordinates: 1167,1026 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717184658.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717184456_1753717164358_BendoverAss.jpg
Blurred file created successfully - Size: 2368801 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717326331-437028006.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717326340_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1354ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1354ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 238
🔌 Queue database connection released
✅ Upload processing completed in 1363ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1033, y: 1353, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717326340_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717346608_1753717326340_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717346698.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1033, y: 1353, width: 821, height: 2043 }
Final blur coordinates: 1353,1146 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717346816.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717346608_1753717326340_BendoverAss.jpg
Blurred file created successfully - Size: 2369681 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717549463-97976458.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717549473_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1285ms
📊 Status: 200, Content-Length: 1094
🏁 Complete response received in 1297ms, size: 1094 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.22182035446167, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.22182035446167
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.05527424812316,
  nudity_contribution: 67.22182035446167,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.2%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 239
🔌 Queue database connection released
✅ Upload processing completed in 1306ms
📊 Result: success=true, status=flagged, nudity=67.22182035446167
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1430, y: 977, width: 216, height: 1576 },
    FEMALE_GENITALIA_EXPOSED: { x: 479, y: 1786, width: 2045, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717549473_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717563784_1753717549473_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1430, y: 977, width: 216, height: 1576 }
Final blur coordinates: 977,1354 1576x216
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717563856.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 479, y: 1786, width: 2045, height: 821 }
Final blur coordinates: 1786,476 821x2045
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717563984.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717563784_1753717549473_BendoverAss.jpg
Blurred file created successfully - Size: 2435970 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717729429-176063700.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717729438_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 2982ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 2993ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 240
🔌 Queue database connection released
✅ Upload processing completed in 3001ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 750, y: 2200, width: 1500, height: 1600 },
    FEMALE_GENITALIA_EXPOSED: { x: 750, y: 2200, width: 1500, height: 1600 },
    manual_blur_1: { x: 1113, y: 833, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717729438_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717755269_1753717729438_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 750, y: 2200, width: 1500, height: 1600 }
Final blur coordinates: 2200,750 1600x1500
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717755410.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 750, y: 2200, width: 1500, height: 1600 }
Final blur coordinates: 2200,750 1600x1500
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717755629.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_1: { x: 1113, y: 833, width: 900, height: 1000 }
Final blur coordinates: 833,987 1000x900
DEBUG: About to apply 10px blur to manual_blur_1 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_1_1753717755768.jpg
DEBUG: Using pure Gaussian blur for manual_blur_1
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717755269_1753717729438_BendoverAss.jpg
Blurred file created successfully - Size: 2264722 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717912693-139928829.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717912702_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 9291ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 9301ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 241
🔌 Queue database connection released
✅ Upload processing completed in 9306ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1440, y: 975, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 480, y: 1786, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717912702_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717934267_1753717912702_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1440, y: 975, width: 202, height: 1578 }
Final blur coordinates: 975,1358 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717934340.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 480, y: 1786, width: 2043, height: 821 }
Final blur coordinates: 1786,477 821x2043
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717934471.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717934267_1753717912702_BendoverAss.jpg
Blurred file created successfully - Size: 2436390 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718109989-892475476.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718109999_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1257ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1264ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 242
🔌 Queue database connection released
✅ Upload processing completed in 1274ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718288769-122136098.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718288776_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1205ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1215ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 7ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 243
🔌 Queue database connection released
✅ Upload processing completed in 1226ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 893, y: 1393, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718288776_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718311294_1753718288776_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753718311385.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 893, y: 1393, width: 821, height: 2043 }
Final blur coordinates: 1393,1286 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753718311511.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718311294_1753718288776_BendoverAss.jpg
Blurred file created successfully - Size: 2393013 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718435252-527853547.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718435263_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1198ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1209ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 244
🔌 Queue database connection released
✅ Upload processing completed in 1217ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1440, y: 1975, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 480, y: 2786, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718435263_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718449023_1753718435263_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1440, y: 1975, width: 202, height: 1578 }
Final blur coordinates: 1975,1358 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753718449100.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 480, y: 2786, width: 2043, height: 821 }
Final blur coordinates: 2786,477 821x2043
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753718449224.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718449023_1753718435263_BendoverAss.jpg
Blurred file created successfully - Size: 2593723 bytes
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718705298-722465888.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718705307_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1263ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1277ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 245
🔌 Queue database connection released
✅ Upload processing completed in 1286ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 393, y: 480, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718705307_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718723970_1753718705307_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753718724056.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 393, y: 480, width: 821, height: 2043 }
Final blur coordinates: 480,1786 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753718724203.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718723970_1753718705307_BendoverAss.jpg
Blurred file created successfully - Size: 2430434 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718866081-132742657.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718866092_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1302ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1312ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 35ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 246
🔌 Queue database connection released
✅ Upload processing completed in 1352ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1440, y: 975, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 480, y: 1786, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718866092_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718883453_1753718866092_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1440, y: 975, width: 202, height: 1578 }
Final blur coordinates: 975,1358 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753718883522.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 480, y: 1786, width: 2043, height: 821 }
Final blur coordinates: 1786,477 821x2043
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753718883651.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718883453_1753718866092_BendoverAss.jpg
Blurred file created successfully - Size: 2436390 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718946682-143890827.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718946689_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1244ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1254ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 247
🔌 Queue database connection released
✅ Upload processing completed in 1261ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718977497-965666049.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718977506_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1400ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1410ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 248
🔌 Queue database connection released
✅ Upload processing completed in 1416ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753719156630-936699776.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753719156645_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1346ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1357ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 249
🔌 Queue database connection released
✅ Upload processing completed in 1364ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753719279947-549036930.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753719279961_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 8613ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 8614ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 250
🔌 Queue database connection released
✅ Upload processing completed in 8624ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753719299155-30710029.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753719299164_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1498ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1498ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 251
🔌 Queue database connection released
✅ Upload processing completed in 1503ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753719978343-18237419.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753719978355_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 13192ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 13203ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 252
🔌 Queue database connection released
✅ Upload processing completed in 13211ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753720737944-266023311.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753720737956_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1257ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1258ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 253
🔌 Queue database connection released
✅ Upload processing completed in 1268ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1087, y: 1780, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753720737956_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753720930046_1753720737956_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1087, y: 1780, width: 821, height: 2043 }
Final blur coordinates: 1780,1092 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753720930174.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753720930046_1753720737956_BendoverAss.jpg
Blurred file created successfully - Size: 2427722 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753721413584-324937312.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753721413602_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1462ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1463ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 10ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 254
🔌 Queue database connection released
✅ Upload processing completed in 1487ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1107, y: 1680, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753721413602_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753721473823_1753721413602_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1107, y: 1680, width: 821, height: 2043 }
Received manual blur box: x=1107, y=1680, w=821, h=2043
Final blur coordinates: 1680,1072 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753721473953.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753721473823_1753721413602_BendoverAss.jpg
Blurred file created successfully - Size: 2416569 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753721902301-210331572.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753721902319_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1347ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1357ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 10ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 255
🔌 Queue database connection released
✅ Upload processing completed in 1373ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 947, y: 1560, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753721902319_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753722216729_1753721902319_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Received manual blur box: x=447, y=1440, w=1578, h=202
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753722216844.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 947, y: 1560, width: 821, height: 2043 }
Received manual blur box: x=947, y=1560, w=821, h=2043
Final blur coordinates: 1560,1232 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753722216969.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753722216729_1753721902319_BendoverAss.jpg
Blurred file created successfully - Size: 2383679 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753722407615-116004644.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753722407630_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 455ms
📊 Status: 500, Content-Length: 106
🏁 Complete response received in 517ms, size: 106 bytes
✅ JSON parsed successfully, success: false
❌ Enhanced API returned success: false
Error details: Missing chunk terminating newline
Error processing uploaded image: Error: Missing chunk terminating newline
    at IncomingMessage.<anonymous> (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:287:36)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
✅ Upload processing completed in 522ms
📊 Result: success=false, status=error, nudity=undefined
❌ Sending error response to client...
✅ Error response sent
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753722419711-382365023.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753722419722_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1397ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1397ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 256
🔌 Queue database connection released
✅ Upload processing completed in 1406ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 393, y: 480, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753722419722_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753722437704_1753722419722_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Received manual blur box: x=447, y=1440, w=1578, h=202
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753722437787.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 393, y: 480, width: 821, height: 2043 }
Received manual blur box: x=393, y=480, w=821, h=2043
Final blur coordinates: 480,1786 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753722437928.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753722437704_1753722419722_BendoverAss.jpg
Blurred file created successfully - Size: 2430434 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753723066204-490039111.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723066220_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 4529ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 4540ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 11ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 257
🔌 Queue database connection released
✅ Upload processing completed in 4560ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 15,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1107, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1107, y: 1520, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723066220_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723117826_1753723066220_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 15px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1107, width: 1578, height: 202 }
Received manual blur box: x=447, y=1107, w=1578, h=202
Final blur coordinates: 1107,975 202x1578
DEBUG: About to apply 15px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753723117926.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1107, y: 1520, width: 821, height: 2043 }
Received manual blur box: x=1107, y=1520, w=821, h=2043
Final blur coordinates: 1520,1072 2043x821
DEBUG: About to apply 15px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753723118064.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723117826_1753723066220_BendoverAss.jpg
Blurred file created successfully - Size: 2374248 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753723657721-716652981.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723657752_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1348ms
📊 Status: 200, Content-Length: 1089
🏁 Complete response received in 1359ms, size: 1089 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 14ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 258
🔌 Queue database connection released
✅ Upload processing completed in 1386ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'oval',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 2140, y: 2120, width: 380, height: 880 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723657752_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723683105_1753723657752_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
No EXIF rotation needed
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2140, y: 2120, width: 380, height: 880 }
Received manual blur box: x=2140, y=2120, w=380, h=880
Using coordinates directly (normalized system): 2140,2120 380x880
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753723683222.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Using normalized image - no additional rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723683105_1753723657752_BlowJob.jpg
Blurred file created successfully - Size: 4175152 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753723838749-622310910.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723838762_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1297ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1308ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 259
🔌 Queue database connection released
✅ Upload processing completed in 1317ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1187, y: 1473, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723838762_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723850283_1753723838762_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Using EXIF auto-rotation to match AI analysis coordinate system
Normalized image dimensions for blur: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Received manual blur box: x=447, y=1440, w=1578, h=202
Using coordinates directly (normalized system): 447,1440 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753723850351.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1187, y: 1473, width: 821, height: 2043 }
Received manual blur box: x=1187, y=1473, w=821, h=2043
Using coordinates directly (normalized system): 1187,1473 821x2043
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753724412681-380130206.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753724412695_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 5016ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 5027ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 260
🔌 Queue database connection released
✅ Upload processing completed in 5036ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753724955457-715909844.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753724955473_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1154ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1165ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 7ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 261
🔌 Queue database connection released
✅ Upload processing completed in 1184ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 16,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2455, y: 945, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 110, y: 1055, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753724955473_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753724973189_1753724955473_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 16px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2455, y: 945, width: 202, height: 1578 }
Received manual blur box: x=2455, y=945, w=202, h=1578
Using coordinates directly (normalized system): 2455,945 202x1578
DEBUG: About to apply 16px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753724973276.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 110, y: 1055, width: 2043, height: 821 }
Received manual blur box: x=110, y=1055, w=2043, h=821
Using coordinates directly (normalized system): 110,1055 2043x821
DEBUG: About to apply 16px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753724973381.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753724973189_1753724955473_BendoverAss.jpg
Blurred file created successfully - Size: 2389014 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725170629-523991000.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725170646_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1202ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1212ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 12ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 4ms
Content flagged and added to moderation queue: 262
🔌 Queue database connection released
✅ Upload processing completed in 1241ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 14,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1275, y: 685, width: 390, height: 1580 },
    FEMALE_GENITALIA_EXPOSED: { x: 1955, y: 890, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725170646_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725200606_1753725170646_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 14px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1275, y: 685, width: 390, height: 1580 }
Received manual blur box: x=1275, y=685, w=390, h=1580
Using coordinates directly (normalized system): 1275,685 390x1580
DEBUG: About to apply 14px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725200694.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1955, y: 890, width: 2043, height: 821 }
Received manual blur box: x=1955, y=890, w=2043, h=821
Using coordinates directly (normalized system): 1955,890 2043x821
DEBUG: About to apply 14px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725200790.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725200606_1753725170646_BendoverAss.jpg
Blurred file created successfully - Size: 2426072 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725313941-523835325.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725313954_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1260ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1271ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 263
🔌 Queue database connection released
✅ Upload processing completed in 1281ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 15,
  shape: 'oval',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1385, y: 445, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1680, y: 1105, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725313954_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725335245_1753725313954_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 15px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1385, y: 445, width: 202, height: 1578 }
Received manual blur box: x=1385, y=445, w=202, h=1578
Using coordinates directly (normalized system): 1385,445 202x1578
DEBUG: About to apply 15px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725335319.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1680, y: 1105, width: 2043, height: 821 }
Received manual blur box: x=1680, y=1105, w=2043, h=821
Using coordinates directly (normalized system): 1680,1105 2043x821
DEBUG: About to apply 15px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725335427.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725335245_1753725313954_BendoverAss.jpg
Blurred file created successfully - Size: 2423684 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725453407-292073642.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725453421_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1479ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1493ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 264
🔌 Queue database connection released
✅ Upload processing completed in 1505ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1540, y: 645, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1815, y: 1150, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725453421_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725488481_1753725453421_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1540, y: 645, width: 202, height: 1578 }
Received manual blur box: x=1540, y=645, w=202, h=1578
Using coordinates directly (normalized system): 1540,645 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725488562.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1815, y: 1150, width: 2043, height: 821 }
Received manual blur box: x=1815, y=1150, w=2043, h=821
Using coordinates directly (normalized system): 1815,1150 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725488664.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725488481_1753725453421_BendoverAss.jpg
Blurred file created successfully - Size: 2445638 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725516394-212922451.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725516409_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1214ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1225ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 265
🔌 Queue database connection released
✅ Upload processing completed in 1232ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1655, y: 1050, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725516409_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725548549_1753725516409_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725548628.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1655, y: 1050, width: 2043, height: 821 }
Received manual blur box: x=1655, y=1050, w=2043, h=821
Using coordinates directly (normalized system): 1655,1050 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725548727.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725548549_1753725516409_BendoverAss.jpg
Blurred file created successfully - Size: 2452210 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725755360-676850893.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725755372_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1275ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1275ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 266
🔌 Queue database connection released
✅ Upload processing completed in 1286ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1555, y: 1150, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725755372_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725767449_1753725755372_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725767521.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1555, y: 1150, width: 2043, height: 821 }
Received manual blur box: x=1555, y=1150, w=2043, h=821
Using coordinates directly (normalized system): 1555,1150 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725767620.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725767449_1753725755372_BendoverAss.jpg
Blurred file created successfully - Size: 2451864 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725848092-988646913.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725848101_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1309ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1320ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 9ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 267
🔌 Queue database connection released
✅ Upload processing completed in 1333ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1665, y: 1025, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725848101_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725899040_1753725848101_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725899118.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1665, y: 1025, width: 2043, height: 821 }
Received manual blur box: x=1665, y=1025, w=2043, h=821
Using coordinates directly (normalized system): 1665,1025 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725899211.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725899040_1753725848101_BendoverAss.jpg
Blurred file created successfully - Size: 2446617 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753726007328-372706659.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726007341_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1364ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1364ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 268
🔌 Queue database connection released
✅ Upload processing completed in 1374ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1570, y: 1100, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726007341_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726027201_1753726007341_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753726027283.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1570, y: 1100, width: 2043, height: 821 }
Received manual blur box: x=1570, y=1100, w=2043, h=821
Using coordinates directly (normalized system): 1570,1100 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753726027380.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726027201_1753726007341_BendoverAss.jpg
Blurred file created successfully - Size: 2450810 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753726115196-392927143.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726115205_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1230ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1236ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 4ms
Content flagged and added to moderation queue: 269
🔌 Queue database connection released
✅ Upload processing completed in 1248ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1660, y: 1015, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726115205_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726131001_1753726115205_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753726131075.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1660, y: 1015, width: 2043, height: 821 }
Received manual blur box: x=1660, y=1015, w=2043, h=821
Using coordinates directly (normalized system): 1660,1015 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753726131164.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726131001_1753726115205_BendoverAss.jpg
Blurred file created successfully - Size: 2450130 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753726224631-836190215.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726224643_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1385ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1395ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 270
🔌 Queue database connection released
✅ Upload processing completed in 1403ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1545, y: 1175, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726224643_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726242625_1753726224643_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753726242703.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1545, y: 1175, width: 2043, height: 821 }
Received manual blur box: x=1545, y=1175, w=2043, h=821
Using coordinates directly (normalized system): 1545,1175 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753726242800.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
✅ Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726242625_1753726224643_BendoverAss.jpg
Blurred file created successfully - Size: 2449450 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753726827129-607130705.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726827150_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1304ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1314ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 10ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 3ms
Content flagged and added to moderation queue: 271
🔌 Queue database connection released
✅ Upload processing completed in 1338ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1127, y: 1400, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726827150_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726837762_1753726827150_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with proper EXIF handling
Working with upright image dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Received manual blur box: x=447, y=1440, w=1578, h=202
Using coordinates directly (normalized system): 447,1440 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753726837827.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1127, y: 1400, width: 821, height: 2043 }
Received manual blur box: x=1127, y=1400, w=821, h=2043
Using coordinates directly (normalized system): 1127,1400 821x2043
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727010246-57312041.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727010262_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1223ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1236ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 9ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 272
🔌 Queue database connection released
✅ Upload processing completed in 1256ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED' ],
  overlayPositions: { BUTTOCKS_EXPOSED: { x: 1920, y: 1485, width: 1578, height: 202 } }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727010262_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753727037826_1753727010262_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape coordinates, EXIF restoration after blur
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1920, y: 1485, width: 1578, height: 202 }
Received manual blur box: x=1920, y=1485, w=1578, h=202
Using coordinates directly (normalized system): 1920,1485 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753727037887.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Applying 1 blur regions to landscape image
🔄 Restoring original EXIF orientation 6
✅ Restored to original orientation for device compatibility
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753727037826_1753727010262_BendoverAss.jpg
Blurred file created successfully - Size: 2635575 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727084094-303810915.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727084107_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 6035ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 6036ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 273
🔌 Queue database connection released
✅ Upload processing completed in 6043ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727702694-688964957.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727702709_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 6220ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 6231ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 274
🔌 Queue database connection released
✅ Upload processing completed in 6241ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727900817-865020886.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727900835_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727901997-282561200.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727902015_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
✅ Enhanced API response received in 1287ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1288ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 275
🔌 Queue database connection released
✅ Upload processing completed in 1299ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
🌐 Socket connected to EC2
✅ Enhanced API response received in 1502ms
📊 Status: 200, Content-Length: 1095
🏁 Complete response received in 1513ms, size: 1095 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 276
🔌 Queue database connection released
✅ Upload processing completed in 1521ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753729118974-757008711.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753729118992_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1382ms
📊 Status: 200, Content-Length: 1092
🏁 Complete response received in 1393ms, size: 1092 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 277
🔌 Queue database connection released
✅ Upload processing completed in 1406ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753729139501-617583882.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753729139520_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1243ms
📊 Status: 200, Content-Length: 1092
🏁 Complete response received in 1255ms, size: 1092 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 278
🔌 Queue database connection released
✅ Upload processing completed in 1274ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753730014482-325593716.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753730014493_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1582ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1582ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 41ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 279
🔌 Queue database connection released
✅ Upload processing completed in 1631ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753730419645-614291824.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753730419662_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1522ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1533ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 7ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 280
🔌 Queue database connection released
✅ Upload processing completed in 1548ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753730434055-345413397.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753730434062_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1671ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1671ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 281
🔌 Queue database connection released
✅ Upload processing completed in 1677ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753730810445-579734840.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753730810455_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 2453ms
📊 Status: 200, Content-Length: 948
🏁 Complete response received in 2464ms, size: 948 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=28.055399656295776, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 28.055399656295776
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 25.2498596906662,
  nudity_contribution: 28.055399656295776,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 282
🔌 Queue database connection released
✅ Upload processing completed in 2478ms
📊 Result: success=true, status=flagged, nudity=28.055399656295776
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753731104877-734224733.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731104889_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 3225ms
📊 Status: 200, Content-Length: 1092
🏁 Complete response received in 3237ms, size: 1092 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 7ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 283
🔌 Queue database connection released
✅ Upload processing completed in 3253ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1642, y: 528, width: 1440, height: 2025 },
    FEMALE_GENITALIA_EXPOSED: { x: 2523, y: 1393, width: 480, height: 393 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731104889_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753731181724_1753731104889_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape coordinates, EXIF restoration after blur
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1642, y: 528, width: 1440, height: 2025 }
Received manual blur box: x=1642, y=528, w=1440, h=2025
Using coordinates directly (normalized system): 1642,528 1440x2025
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753731181885.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2523, y: 1393, width: 480, height: 393 }
Received manual blur box: x=2523, y=1393, w=480, h=393
Using coordinates directly (normalized system): 2523,1393 480x393
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753731181963.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
🔄 Restoring original EXIF orientation 6
✅ Restored to original orientation for device compatibility
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753731181724_1753731104889_BendoverAss.jpg
Blurred file created successfully - Size: 2140371 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753731494083-415874871.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731494092_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 5323ms
📊 Status: 200, Content-Length: 1092
🏁 Complete response received in 5335ms, size: 1092 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 284
🔌 Queue database connection released
✅ Upload processing completed in 5345ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753731828825-444825620.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731828845_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1347ms
📊 Status: 200, Content-Length: 1092
🏁 Complete response received in 1359ms, size: 1092 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
❌ JSON parse error: Assignment to constant variable.
Raw response preview: {"image_analysis":{"combined_assessment":{"final_risk_score":47.1821254491806,"nudity_contribution":67.40303635597229,"pose_contribution":0,"reasoning":["nudity_detected_67.4%"],"risk_level":"low"},"nudity_detection":{"detected_parts":{"BUTTOCKS_EXPOSED":67.40303635597229,"FEMALE_GENITALIA_EXPOSED":...
Error processing uploaded image: Error: Failed to parse enhanced analysis response
    at IncomingMessage.<anonymous> (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:292:32)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
✅ Upload processing completed in 1368ms
📊 Result: success=false, status=error, nudity=undefined
❌ Sending error response to client...
✅ Error response sent
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753731998858-470328146.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731998877_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1341ms
📊 Status: 200, Content-Length: 1092
🏁 Complete response received in 1350ms, size: 1092 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 17ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 4ms
Content flagged and added to moderation queue: 285
🔌 Queue database connection released
✅ Upload processing completed in 1383ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753732131725-517087577.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753732131739_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1324ms
📊 Status: 200, Content-Length: 1092
🏁 Complete response received in 1335ms, size: 1092 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 286
🔌 Queue database connection released
✅ Upload processing completed in 1351ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753733860502-360863879.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753733860523_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1799ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1810ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 41ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 287
🔌 Queue database connection released
✅ Upload processing completed in 1865ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753733966004-171726579.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753733966023_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753733966158-777576886.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753733966174_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 2357ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 2394ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 17ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 288
🔌 Queue database connection released
✅ Upload processing completed in 2424ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
✅ Enhanced API response received in 2293ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 2307ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 289
🔌 Queue database connection released
✅ Upload processing completed in 2322ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753734268016-172354192.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753734268044_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1699ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1709ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 290
🔌 Queue database connection released
✅ Upload processing completed in 1721ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753734491440-993680487.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753734491451_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1832ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1838ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 291
🔌 Queue database connection released
✅ Upload processing completed in 1852ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753735528995-589133052.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753735529010_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1652ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1662ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 10ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 292
🔌 Queue database connection released
✅ Upload processing completed in 1691ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753736240217-513434682.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753736240232_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1721ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1730ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 293
🔌 Queue database connection released
✅ Upload processing completed in 1743ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753736267601-502959798.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753736267612_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1637ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1649ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 13ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 294
🔌 Queue database connection released
✅ Upload processing completed in 1664ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753736551265-165616223.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753736551286_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 8841ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 8842ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 12ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 295
🔌 Queue database connection released
✅ Upload processing completed in 8871ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753736611476-473904074.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753736611500_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1636ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1647ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 296
🔌 Queue database connection released
✅ Upload processing completed in 1657ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753737001974-766221594.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753737001991_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 2000ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 2097ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 297
🔌 Queue database connection released
✅ Upload processing completed in 2107ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753737502487-945059097.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753737502499_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1856ms
📊 Status: 200, Content-Length: 1093
🏁 Complete response received in 1866ms, size: 1093 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 66.66176319122314
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 298
🔌 Queue database connection released
✅ Upload processing completed in 1881ms
📊 Result: success=true, status=flagged, nudity=66.66176319122314
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753737812603-470414198.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753737812614_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1783ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1798ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 299
🔌 Queue database connection released
✅ Upload processing completed in 1814ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED', 'ANUS_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753737812614_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738030852_1753737812614_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing with landscape coordinates, EXIF restoration after blur
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738030925.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Using coordinates directly (normalized system): 2538,1392 456x372
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753738030984.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
🔄 Restoring original EXIF orientation 6
✅ Restored to original orientation for device compatibility
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738030852_1753737812614_BendoverAss.jpg
Blurred file created successfully - Size: 2619282 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753738244207-70654282.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738244223_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1588ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1602ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 16ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 300
🔌 Queue database connection released
✅ Upload processing completed in 1632ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'ANUS_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738244223_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738251350_1753738244223_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
✅ Using EXIF-corrected image directly (matches NudeNet coordinate system)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738251407.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Using coordinates directly (normalized system): 1666,565 1338x1925
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753738251530.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Using coordinates directly (normalized system): 2538,1392 456x372
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753738251602.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
🔄 Restoring original EXIF orientation 6
✅ Restored to original orientation for device compatibility
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738251350_1753738244223_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753738507874-955339161.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738507892_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 2084ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 2096ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 9ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 3ms
Content flagged and added to moderation queue: 301
🔌 Queue database connection released
✅ Upload processing completed in 2122ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'ANUS_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738507892_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738514914_1753738507892_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738515007.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753738688605-556014920.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738688621_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1671ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1681ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 3ms
Content flagged and added to moderation queue: 302
🔌 Queue database connection released
✅ Upload processing completed in 1698ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738688621_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738698986_1753738688621_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738699079.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753738836170-121293512.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738836185_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1697ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1707ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 303
🔌 Queue database connection released
✅ Upload processing completed in 1724ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738836185_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738850938_1753738836185_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738851039.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738836185_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738903587_1753738836185_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738903696.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738836185_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739203205_1753738836185_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739203304.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739215064-413111784.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739215085_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1745ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1755ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 10ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 304
🔌 Queue database connection released
✅ Upload processing completed in 1775ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739215085_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739226649_1753739215085_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739226754.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739215085_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739429348_1753739215085_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739429448.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739441282-702112002.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739441296_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1662ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1663ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 305
🔌 Queue database connection released
✅ Upload processing completed in 1678ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739441296_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739448380_1753739441296_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739448480.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739655480-759761474.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739655496_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1544ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1553ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 306
🔌 Queue database connection released
✅ Upload processing completed in 1568ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739655496_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739662492_1753739655496_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739662589.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739797046-391518561.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739797064_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1667ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1667ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 307
🔌 Queue database connection released
✅ Upload processing completed in 1681ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739797064_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739813426_1753739797064_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739813524.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
❌ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
❌ Coordinates: left=1666, top=565, width=1338, height=1925
❌ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739875081-775956072.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739875097_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 2409ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 2410ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 308
🔌 Queue database connection released
✅ Upload processing completed in 2430ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739875097_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739885694_1753739875097_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739885794.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
❌ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
❌ Coordinates: left=1666, top=565, width=1338, height=1925
❌ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739980763-379392586.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739980779_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1638ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1639ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 309
🔌 Queue database connection released
✅ Upload processing completed in 1656ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739980779_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739990510_1753739980779_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739990609.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
❌ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
❌ Coordinates: left=1666, top=565, width=1338, height=1925
❌ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739980779_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740077838_1753739980779_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED
🔄 Getting metadata for fresh instance
🔄 Fresh instance metadata: 4000x3000, orientation: 6
🔄 Applying 90° rotation to fresh instance
🔄 Getting post-rotation metadata
🔄 Post-rotation metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
🔍 Right edge: 2607 <= 4000? true
🔍 Bottom edge: 1716 <= 3000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753740077940.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED
🔄 Getting metadata for fresh instance
🔄 Fresh instance metadata: 4000x3000, orientation: 6
🔄 Applying 90° rotation to fresh instance
🔄 Getting post-rotation metadata
🔄 Post-rotation metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
❌ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
❌ Coordinates: left=1666, top=565, width=1338, height=1925
❌ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740094806-167738690.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740094822_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1535ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1546ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 9ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 310
🔌 Queue database connection released
✅ Upload processing completed in 1568ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740094822_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740108578_1753740094822_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED
🔄 Getting metadata for fresh instance
🔄 Fresh instance metadata: 4000x3000, orientation: 6
🔄 Applying 90° rotation to fresh instance
🔄 Getting post-rotation metadata
🔄 Post-rotation metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
❌ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
❌ Coordinates: left=1666, top=565, width=1338, height=1925
❌ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740175315-770223302.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740175332_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 4291ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 4292ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 311
🔌 Queue database connection released
✅ Upload processing completed in 4310ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740175332_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740186258_1753740175332_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED
🔄 Getting metadata for fresh instance
🔄 Fresh instance metadata: 4000x3000, orientation: 6
🔄 Applying 90° rotation to fresh instance
🔄 Getting post-rotation metadata
🔄 Post-rotation metadata (corrected): 3000x4000
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 3000x4000
🔍 Right edge: 2607 <= 3000? true
🔍 Bottom edge: 1716 <= 4000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753740186467.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED
🔄 Getting metadata for fresh instance
🔄 Fresh instance metadata: 4000x3000, orientation: 6
🔄 Applying 90° rotation to fresh instance
🔄 Getting post-rotation metadata
🔄 Post-rotation metadata (corrected): 3000x4000
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 3000x4000
🔍 Right edge: 3004 <= 3000? false
🔍 Bottom edge: 2490 <= 4000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
❌ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
❌ Coordinates: left=1666, top=565, width=1338, height=1925
❌ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740252441-800563284.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740252459_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1658ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1659ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 312
🔌 Queue database connection released
✅ Upload processing completed in 1673ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740252459_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740264825_1753740252459_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED
🔄 Getting metadata for fresh instance
🔄 Fresh instance metadata: 4000x3000, orientation: 6
🔄 Applying 90° rotation to fresh instance
🔄 Getting post-rotation metadata
🔄 Post-rotation metadata (corrected): 3000x4000
🔄 Converting to landscape to match admin interface coordinate system
🔄 Final landscape metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
🔍 Right edge: 2607 <= 4000? true
🔍 Bottom edge: 1716 <= 3000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753740265194.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED
🔄 Getting metadata for fresh instance
🔄 Fresh instance metadata: 4000x3000, orientation: 6
🔄 Applying 90° rotation to fresh instance
🔄 Getting post-rotation metadata
🔄 Post-rotation metadata (corrected): 3000x4000
🔄 Converting to landscape to match admin interface coordinate system
🔄 Final landscape metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
✅ Fresh extract successful for BUTTOCKS_EXPOSED
✅ Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753740265726.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
🔍 About to extract region: left=2538, top=1392, width=456, height=372
🔍 Extract bounds check: right=2994/4000, bottom=1764/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED
🔄 Getting metadata for fresh instance
🔄 Fresh instance metadata: 4000x3000, orientation: 6
🔄 Applying 90° rotation to fresh instance
🔄 Getting post-rotation metadata
🔄 Post-rotation metadata (corrected): 3000x4000
🔄 Converting to landscape to match admin interface coordinate system
🔄 Final landscape metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
🔍 Right edge: 2994 <= 4000? true
🔍 Bottom edge: 1764 <= 3000? true
🔄 Attempting extract for FEMALE_GENITALIA_EXPOSED...
✅ Fresh extract successful for FEMALE_GENITALIA_EXPOSED
✅ Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753740266156.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
✅ Keeping EXIF-corrected orientation for consistency with admin interface
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740264825_1753740252459_BendoverAss.jpg
Blurred file created successfully - Size: 2177219 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740358770-327413238.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740358785_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 6769ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 6780ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 313
🔌 Queue database connection released
✅ Upload processing completed in 6794ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740358785_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740373809_1753740358785_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur with NudeNet coordinate system
🔄 Applying manual 90° EXIF rotation (matching NudeNet processing)
✅ Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED
🔄 Admin interface shows EXIF orientation: 1 (no rotation)
🔄 Using autoRotate: true to match admin interface
🔄 Auto-rotated metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
🔍 Right edge: 2607 <= 4000? true
🔍 Bottom edge: 1716 <= 3000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753740373870.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED
🔄 Admin interface shows EXIF orientation: 1 (no rotation)
🔄 Using autoRotate: true to match admin interface
🔄 Auto-rotated metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
✅ Fresh extract successful for BUTTOCKS_EXPOSED
✅ Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753740374004.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
🔍 About to extract region: left=2538, top=1392, width=456, height=372
🔍 Extract bounds check: right=2994/4000, bottom=1764/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED
🔄 Admin interface shows EXIF orientation: 1 (no rotation)
🔄 Using autoRotate: true to match admin interface
🔄 Auto-rotated metadata: 4000x3000
🔍 FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
🔍 Right edge: 2994 <= 4000? true
🔍 Bottom edge: 1764 <= 3000? true
🔄 Attempting extract for FEMALE_GENITALIA_EXPOSED...
✅ Fresh extract successful for FEMALE_GENITALIA_EXPOSED
✅ Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753740374075.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
✅ Keeping EXIF-corrected orientation for consistency with admin interface
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740373809_1753740358785_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740666032-952121317.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740666061_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1695ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1707ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 314
🔌 Queue database connection released
✅ Upload processing completed in 1729ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741002672-979097834.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741002694_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 9517ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 9529ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 315
🔌 Queue database connection released
✅ Upload processing completed in 9547ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741002694_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741016564_1753741002694_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur in EXIF-stripped coordinate system (matching NudeNet)
🔄 Working with raw image: 4000x3000, orientation: 6
✅ Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
🔍 Right edge: 2607 <= 4000? true
🔍 Bottom edge: 1716 <= 3000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741016627.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
✅ Fresh extract successful for BUTTOCKS_EXPOSED
✅ Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741016753.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
🔍 About to extract region: left=2538, top=1392, width=456, height=372
🔍 Extract bounds check: right=2994/4000, bottom=1764/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
🔍 Right edge: 2994 <= 4000? true
🔍 Bottom edge: 1764 <= 3000? true
🔄 Attempting extract for FEMALE_GENITALIA_EXPOSED...
✅ Fresh extract successful for FEMALE_GENITALIA_EXPOSED
✅ Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741016830.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
🔄 Restoring original EXIF orientation 6 after blur application
🔄 Rotating blurred result 90° clockwise for EXIF 6
✅ Blurred image rotated to original orientation for display
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741016564_1753741002694_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741039448-500226328.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741039464_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1737ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1747ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 316
🔌 Queue database connection released
✅ Upload processing completed in 1754ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741039464_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741045733_1753741039464_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur in EXIF-stripped coordinate system (matching NudeNet)
🔄 Working with raw image: 4000x3000, orientation: 6
✅ Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
🔍 Right edge: 2607 <= 4000? true
🔍 Bottom edge: 1716 <= 3000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741045793.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
✅ Fresh extract successful for BUTTOCKS_EXPOSED
✅ Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741045926.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
🔍 About to extract region: left=2538, top=1392, width=456, height=372
🔍 Extract bounds check: right=2994/4000, bottom=1764/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
🔍 Right edge: 2994 <= 4000? true
🔍 Bottom edge: 1764 <= 3000? true
🔄 Attempting extract for FEMALE_GENITALIA_EXPOSED...
✅ Fresh extract successful for FEMALE_GENITALIA_EXPOSED
✅ Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741046014.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
🔄 Restoring original EXIF orientation 6 after blur application
🔄 Rotating blurred result 90° clockwise for EXIF 6
✅ Blurred image rotated to original orientation for display
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741045733_1753741039464_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741387154-485852146.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741387171_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 5179ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 5190ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 9ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 317
🔌 Queue database connection released
✅ Upload processing completed in 5213ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741532780-369380451.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741532795_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1661ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1671ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 318
🔌 Queue database connection released
✅ Upload processing completed in 1682ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741532795_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741548919_1753741532795_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur in EXIF-stripped coordinate system (matching NudeNet)
🔄 Working with raw image: 4000x3000, orientation: 6
✅ Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
🔍 Right edge: 2607 <= 4000? true
🔍 Bottom edge: 1716 <= 3000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741548985.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
✅ Fresh extract successful for BUTTOCKS_EXPOSED
✅ Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741549111.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
🔍 About to extract region: left=2538, top=1392, width=456, height=372
🔍 Extract bounds check: right=2994/4000, bottom=1764/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
🔍 Right edge: 2994 <= 4000? true
🔍 Bottom edge: 1764 <= 3000? true
🔄 Attempting extract for FEMALE_GENITALIA_EXPOSED...
✅ Fresh extract successful for FEMALE_GENITALIA_EXPOSED
✅ Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741549192.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
✅ Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741548919_1753741532795_BendoverAss.jpg
Blurred file created successfully - Size: 2344679 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741633824-715734366.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741633844_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1755ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1755ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 319
🔌 Queue database connection released
✅ Upload processing completed in 1774ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741633844_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741662031_1753741633844_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur in EXIF-stripped coordinate system (matching NudeNet)
🔄 Working with raw image: 4000x3000, orientation: 6
✅ Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
🔍 Right edge: 2607 <= 4000? true
🔍 Bottom edge: 1716 <= 3000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741662090.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
✅ Fresh extract successful for BUTTOCKS_EXPOSED
✅ Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741662211.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
🔍 About to extract region: left=2538, top=1392, width=456, height=372
🔍 Extract bounds check: right=2994/4000, bottom=1764/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
🔍 Right edge: 2994 <= 4000? true
🔍 Bottom edge: 1764 <= 3000? true
🔄 Attempting extract for FEMALE_GENITALIA_EXPOSED...
✅ Fresh extract successful for FEMALE_GENITALIA_EXPOSED
✅ Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741662288.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
🔄 Rotating final blurred result back to display orientation 6
🔄 Rotating final result 90° clockwise for display
✅ Final blurred image rotated to correct display orientation
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741662031_1753741633844_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741816980-126288281.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741816998_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1998ms
📊 Status: 200, Content-Length: 1223
🏁 Complete response received in 1999ms, size: 1223 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.90195918083191
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 320
🔌 Queue database connection released
✅ Upload processing completed in 2020ms
📊 Result: success=true, status=flagged, nudity=71.90195918083191
📤 Sending successful response to client...
✅ Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741816998_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741824817_1753741816998_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
🔄 Processing blur in EXIF-stripped coordinate system (matching NudeNet)
🔄 Working with raw image: 4000x3000, orientation: 6
✅ Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
🔍 About to extract region: left=2264, top=1333, width=343, height=383
🔍 Extract bounds check: right=2607/4000, bottom=1716/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
🔍 Right edge: 2607 <= 4000? true
🔍 Bottom edge: 1716 <= 3000? true
🔄 Attempting extract for ANUS_EXPOSED...
✅ Fresh extract successful for ANUS_EXPOSED
✅ Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741824877.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
🔍 About to extract region: left=1666, top=565, width=1338, height=1925
🔍 Extract bounds check: right=3004/4000, bottom=2490/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
🔍 Right edge: 3004 <= 4000? true
🔍 Bottom edge: 2490 <= 3000? true
🔄 Attempting extract for BUTTOCKS_EXPOSED...
✅ Fresh extract successful for BUTTOCKS_EXPOSED
✅ Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741825002.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
🔍 About to extract region: left=2538, top=1392, width=456, height=372
🔍 Extract bounds check: right=2994/4000, bottom=1764/3000
🔍 ACTUAL working image dimensions just before extract: 4000x3000
🔄 Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
🔄 Using autoRotate: false to match NudeNet coordinate space
🔄 Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
🔍 FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
🔍 Right edge: 2994 <= 4000? true
🔍 Bottom edge: 1764 <= 3000? true
🔄 Attempting extract for FEMALE_GENITALIA_EXPOSED...
✅ Fresh extract successful for FEMALE_GENITALIA_EXPOSED
✅ Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741825079.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
✅ Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741824817_1753741816998_BendoverAss.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2407627 bytes
