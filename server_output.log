
> musenest@1.0.0 dev
> nodemon server.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753687362061-415556682.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753687362085_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1402ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1416ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 13ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 217
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1441ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'oval',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 416, y: 463, width: 121, height: 139 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753687362085_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753687458144_1753687362085_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 10px â†’ actual 25px
Processing blur for MALE_GENITALIA_EXPOSED: { x: 416, y: 463, width: 121, height: 139 }
Final blur coordinates: 416,463 121x139
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753687458144_1753687362085_BlowJob.jpg
Blurred file created successfully - Size: 4217228 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753687931319-835369057.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753687931342_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1339ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1351ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 218
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1366ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688042575-441578645.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688042594_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1317ms
ğŸ“Š Status: 200, Content-Length: 1085
ğŸ Complete response received in 1324ms, size: 1085 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.66122722625732, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.66122722625732
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.79510450363159,
  nudity_contribution: 78.66122722625732,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 23ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 219
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1359ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.66122722625732
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FACE_FEMALE: { x: 1065, y: 1004, width: 589, height: 576 },
    MALE_GENITALIA_EXPOSED: { x: 243, y: 119, width: 1565, height: 1718 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688042594_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688052323_1753688042594_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 10px â†’ actual 50px
Processing blur for FACE_FEMALE: { x: 1065, y: 1004, width: 589, height: 576 }
Expanded blur coordinates: 770,716 1179x1152 (added 295x288 padding)
DEBUG: About to apply 50px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753688052636.jpg
DEBUG: Processing shape 'square' for FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 243, y: 119, width: 1565, height: 1718 }
Expanded blur coordinates: 0,0 3131x3000 (added 783x859 padding)
DEBUG: About to apply 50px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688055451.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688052323_1753688042594_BlowJob.jpg
Blurred file created successfully - Size: 1234348 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688124848-390755847.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688124867_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1255ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1266ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 15ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 9ms
Content flagged and added to moderation queue: 220
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1305ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688241406-630199684.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688241423_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1534ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1545ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 221
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1552ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 331, y: 159, width: 1530, height: 1698 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688241423_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688260537_1753688241423_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 10px â†’ actual 50px
Processing blur for MALE_GENITALIA_EXPOSED: { x: 331, y: 159, width: 1530, height: 1698 }
Final blur coordinates: 331,159 1530x1698
DEBUG: About to apply 50px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688261202.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688260537_1753688241423_BlowJob.jpg
Blurred file created successfully - Size: 3332167 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688356158-928692598.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688356176_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1403ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1414ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 222
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1423ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 7,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 330, y: 357, width: 77, height: 140 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688356176_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688400743_1753688356176_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 7px â†’ actual 35px
Processing blur for MALE_GENITALIA_EXPOSED: { x: 330, y: 357, width: 77, height: 140 }
Final blur coordinates: 330,357 77x140
DEBUG: About to apply 35px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688400781.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688400743_1753688356176_BlowJob.jpg
Blurred file created successfully - Size: 4217591 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688535589-355490219.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688535603_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 5980ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 5989ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 223
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 5997ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FACE_FEMALE: { x: 1059, y: 1006, width: 601, height: 555 },
    MALE_GENITALIA_EXPOSED: { x: 538, y: 643, width: 1530, height: 1698 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688535603_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688562243_1753688535603_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur calibration: admin setting 10px â†’ actual 50px
Processing blur for FACE_FEMALE: { x: 1059, y: 1006, width: 601, height: 555 }
Final blur coordinates: 1059,1006 601x555
DEBUG: About to apply 50px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753688562357.jpg
DEBUG: Processing shape 'square' for FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 538, y: 643, width: 1530, height: 1698 }
Final blur coordinates: 538,643 1530x1698
DEBUG: About to apply 50px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688563178.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688562243_1753688535603_BlowJob.jpg
Blurred file created successfully - Size: 3416231 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688692782-684710031.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688692805_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1289ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1299ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 224
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1313ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  opacity: 0.3,
  shape: 'square',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 2085, y: 2320, width: 570, height: 675 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688692805_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688731744_1753688692805_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2085, y: 2320, width: 570, height: 675 }
Final blur coordinates: 2085,2320 570x675
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753688731877.jpg
DEBUG: Processing shape 'square' for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753688731744_1753688692805_BlowJob.jpg
Blurred file created successfully - Size: 4164687 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753688892391-816831640.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753688892406_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 10925ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 10936ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.97651195526123, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.97651195526123
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 71.07886075973511,
  nudity_contribution: 78.97651195526123,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 225
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 10946ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.97651195526123
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753689116448-878712013.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689116466_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1317ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1329ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 226
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1335ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 15,
  opacity: 0.3,
  shape: 'oval',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 2000, y: 2390, width: 750, height: 610 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689116466_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753689180676_1753689116466_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 15px (1:1 ratio)
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2000, y: 2390, width: 750, height: 610 }
Final blur coordinates: 2000,2390 750x610
DEBUG: About to apply 15px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753689180806.jpg
DEBUG: Processing shape 'oval' for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753689180676_1753689116466_BlowJob.jpg
Blurred file created successfully - Size: 4158195 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:964
            } else {
            ^

SyntaxError: Missing catch or finally after try
    at wrapSafe (node:internal/modules/cjs/loader:1662:18)
    at Module._compile (node:internal/modules/cjs/loader:1704:20)
    at Object..js (node:internal/modules/cjs/loader:1895:10)
    at Module.load (node:internal/modules/cjs/loader:1465:32)
    at Function._load (node:internal/modules/cjs/loader:1282:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
    at Module.require (node:internal/modules/cjs/loader:1487:12)
    at require (node:internal/modules/helpers:135:16)
    at Object.<anonymous> (/Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:13:34)

Node.js v22.17.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753689432872-738773309.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689432891_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 17690ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 17698ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 227
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 17715ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753689651256-490137948.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689651273_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1351ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1352ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 0ms
Content flagged and added to moderation queue: 228
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1360ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'oval',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 2020, y: 2320, width: 655, height: 680 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753689651273_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753689700211_1753689651273_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2020, y: 2320, width: 655, height: 680 }
Final blur coordinates: 2020,2320 655x680
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753689700334.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753689700211_1753689651273_BlowJob.jpg
Blurred file created successfully - Size: 4164777 bytes
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753714369839-216157075.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753714369883_HoldingTits.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2780ms
ğŸ“Š Status: 200, Content-Length: 1394
ğŸ Complete response received in 2791ms, size: 1394 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=81.63187503814697, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.63187503814697
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    reasoning: [],
    torso_angle: 1.0296496805327666
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 1.0296496805327666
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 57.142312526702874,
  nudity_contribution: 81.63187503814697,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.6%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 28ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 8ms
Content flagged and added to moderation queue: 229
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2838ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.63187503814697
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753714957595-691953133.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753714957613_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1445ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1445ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 230
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1468ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 780, y: 2333, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1127, y: 1880, width: 821, height: 2043 },
    manual_blur_1: { x: 1267, y: 867, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753714957613_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753714995705_1753714957613_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 780, y: 2333, width: 1578, height: 202 }
Final blur coordinates: 2333,642 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753714995783.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1127, y: 1880, width: 821, height: 2043 }
Final blur coordinates: 1880,1052 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753714995889.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_1: { x: 1267, y: 867, width: 900, height: 1000 }
Final blur coordinates: 867,833 1000x900
DEBUG: About to apply 10px blur to manual_blur_1 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_1_1753714996010.jpg
DEBUG: Using pure Gaussian blur for manual_blur_1
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753714995705_1753714957613_BendoverAss.jpg
Blurred file created successfully - Size: 2241660 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753715036372-395207573.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753715036387_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1378ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1390ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 231
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1401ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'manual_blur_2'
  ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 820, y: 2287, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1173, y: 1280, width: 821, height: 2043 },
    manual_blur_2: { x: 1147, y: 673, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753715036387_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753715078071_1753715036387_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_2' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 820, y: 2287, width: 1578, height: 202 }
Final blur coordinates: 2287,602 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753715078154.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1173, y: 1280, width: 821, height: 2043 }
Final blur coordinates: 1280,1006 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753715078278.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_2: { x: 1147, y: 673, width: 900, height: 1000 }
Final blur coordinates: 673,953 1000x900
DEBUG: About to apply 10px blur to manual_blur_2 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_2_1753715078408.jpg
DEBUG: Using pure Gaussian blur for manual_blur_2
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753715078071_1753715036387_BendoverAss.jpg
Blurred file created successfully - Size: 2294269 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753716129990-822049859.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716130006_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1223ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1235ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 232
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1247ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1093, y: 1473, width: 821, height: 2043 },
    manual_blur_1: { x: 1173, y: 773, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716130006_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716162522_1753716130006_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753716162610.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1093, y: 1473, width: 821, height: 2043 }
Final blur coordinates: 1473,1086 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753716162724.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_1: { x: 1173, y: 773, width: 900, height: 1000 }
Final blur coordinates: 773,927 1000x900
DEBUG: About to apply 10px blur to manual_blur_1 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_1_1753716162866.jpg
DEBUG: Using pure Gaussian blur for manual_blur_1
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716162522_1753716130006_BendoverAss.jpg
Blurred file created successfully - Size: 2295253 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753716385622-547992495.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716385638_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1430ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1430ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 233
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1438ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED'
  ],
  overlayPositions: {
    FACE_FEMALE: { x: 1059, y: 1006, width: 601, height: 555 },
    MALE_GENITALIA_EXPOSED: { x: 650, y: 645, width: 1530, height: 1698 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716385638_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716401223_1753716385638_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 1059, y: 1006, width: 601, height: 555 }
Final blur coordinates: 1059,1006 601x555
DEBUG: About to apply 10px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753716401299.jpg
DEBUG: Using pure Gaussian blur for FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 650, y: 645, width: 1530, height: 1698 }
Final blur coordinates: 650,645 1530x1698
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753716401437.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716401223_1753716385638_BlowJob.jpg
Blurred file created successfully - Size: 3550758 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'PullingNipples.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753716422702-876070230.jpg',
  originalName: 'PullingNipples.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716422711_PullingNipples.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1314ms
ğŸ“Š Status: 200, Content-Length: 1520
ğŸ Complete response received in 1420ms, size: 1520 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=77.49767899513245, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 77.49767899513245
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 3.2891086645975216,
    leg_spread: 0.21122115850448608,
    reasoning: [],
    torso_angle: 6.063617452352097
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 3.2891086645975216,
    leg_spread: 0.21122115850448608,
    shoulder_width: 0.3002632260322571,
    torso_angle: 6.063617452352097
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 54.24837529659271,
  nudity_contribution: 77.49767899513245,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_77.5%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 234
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1428ms
ğŸ“Š Result: success=true, status=flagged, nudity=77.49767899513245
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED',
    'BELLY_EXPOSED',
    'FEMALE_BREAST_EXPOSED'
  ],
  overlayPositions: {
    BELLY_EXPOSED: { x: 1727, y: 727, width: 195, height: 2311 },
    FACE_FEMALE: { x: 700, y: 1013, width: 1018, height: 943 },
    FEMALE_BREAST_EXPOSED: { x: 1187, y: 2127, width: 1274, height: 1849 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716422711_PullingNipples.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716447274_1753716422711_PullingNipples.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BELLY_EXPOSED', 'FACE_FEMALE', 'FEMALE_BREAST_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BELLY_EXPOSED: { x: 1727, y: 727, width: 195, height: 2311 }
Final blur coordinates: 727,1078 2311x195
DEBUG: About to apply 10px blur to BELLY_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BELLY_EXPOSED_1753716447340.jpg
DEBUG: Using pure Gaussian blur for BELLY_EXPOSED
Processing blur for FACE_FEMALE: { x: 700, y: 1013, width: 1018, height: 943 }
Final blur coordinates: 1013,1282 943x1018
DEBUG: About to apply 10px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753716447448.jpg
DEBUG: Using pure Gaussian blur for FACE_FEMALE
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1187, y: 2127, width: 1274, height: 1849 }
Final blur coordinates: 2127,539 1849x1274
DEBUG: About to apply 10px blur to FEMALE_BREAST_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_BREAST_EXPOSED_1753716447635.jpg
DEBUG: Using pure Gaussian blur for FEMALE_BREAST_EXPOSED
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716447274_1753716422711_PullingNipples.jpg
Blurred file created successfully - Size: 2326709 bytes
Query test with limit/offset interpolation
Query executed successfully, got 20 items
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753716845088-937326731.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716845101_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 7572ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 7576ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 24ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 235
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 7605ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED',
    'BELLY_EXPOSED',
    'FEMALE_BREAST_EXPOSED',
    'manual_blur_2'
  ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1080, y: 1600, width: 821, height: 2043 },
    manual_blur_2: { x: 1213, y: 560, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753716845101_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716898135_1753716845101_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_2' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753716898228.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1080, y: 1600, width: 821, height: 2043 }
Final blur coordinates: 1600,1099 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753716898342.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_2: { x: 1213, y: 560, width: 900, height: 1000 }
Final blur coordinates: 560,887 1000x900
DEBUG: About to apply 10px blur to manual_blur_2 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_2_1753716898475.jpg
DEBUG: Using pure Gaussian blur for manual_blur_2
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753716898135_1753716845101_BendoverAss.jpg
Blurred file created successfully - Size: 2253672 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717059754-625230037.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717059764_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1277ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1277ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 236
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1285ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED',
    'BELLY_EXPOSED',
    'FEMALE_BREAST_EXPOSED',
    'manual_blur_2'
  ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1167, y: 1500, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717059764_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717077071_1753717059764_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717077160.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1167, y: 1500, width: 821, height: 2043 }
Final blur coordinates: 1500,1012 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717077278.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717077071_1753717059764_BendoverAss.jpg
Blurred file created successfully - Size: 2393428 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717164351-431599513.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717164358_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1328ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1338ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 237
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1346ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'manual_blur_1',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED',
    'BELLY_EXPOSED',
    'FEMALE_BREAST_EXPOSED',
    'manual_blur_2'
  ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1153, y: 1167, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717164358_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717184456_1753717164358_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717184546.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1153, y: 1167, width: 821, height: 2043 }
Final blur coordinates: 1167,1026 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717184658.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717184456_1753717164358_BendoverAss.jpg
Blurred file created successfully - Size: 2368801 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717326331-437028006.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717326340_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1354ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1354ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 238
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1363ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1033, y: 1353, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717326340_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717346608_1753717326340_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717346698.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1033, y: 1353, width: 821, height: 2043 }
Final blur coordinates: 1353,1146 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717346816.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717346608_1753717326340_BendoverAss.jpg
Blurred file created successfully - Size: 2369681 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717549463-97976458.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717549473_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1285ms
ğŸ“Š Status: 200, Content-Length: 1094
ğŸ Complete response received in 1297ms, size: 1094 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.22182035446167, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.22182035446167
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.05527424812316,
  nudity_contribution: 67.22182035446167,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.2%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 239
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1306ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.22182035446167
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1430, y: 977, width: 216, height: 1576 },
    FEMALE_GENITALIA_EXPOSED: { x: 479, y: 1786, width: 2045, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717549473_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717563784_1753717549473_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1430, y: 977, width: 216, height: 1576 }
Final blur coordinates: 977,1354 1576x216
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717563856.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 479, y: 1786, width: 2045, height: 821 }
Final blur coordinates: 1786,476 821x2045
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717563984.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717563784_1753717549473_BendoverAss.jpg
Blurred file created successfully - Size: 2435970 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717729429-176063700.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717729438_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2982ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 2993ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 240
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 3001ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 750, y: 2200, width: 1500, height: 1600 },
    FEMALE_GENITALIA_EXPOSED: { x: 750, y: 2200, width: 1500, height: 1600 },
    manual_blur_1: { x: 1113, y: 833, width: 900, height: 1000 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717729438_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717755269_1753717729438_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'manual_blur_1' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 750, y: 2200, width: 1500, height: 1600 }
Final blur coordinates: 2200,750 1600x1500
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717755410.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 750, y: 2200, width: 1500, height: 1600 }
Final blur coordinates: 2200,750 1600x1500
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717755629.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for manual_blur_1: { x: 1113, y: 833, width: 900, height: 1000 }
Final blur coordinates: 833,987 1000x900
DEBUG: About to apply 10px blur to manual_blur_1 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_1_1753717755768.jpg
DEBUG: Using pure Gaussian blur for manual_blur_1
Applying 3 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717755269_1753717729438_BendoverAss.jpg
Blurred file created successfully - Size: 2264722 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753717912693-139928829.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717912702_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 9291ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 9301ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 241
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 9306ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1440, y: 975, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 480, y: 1786, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753717912702_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717934267_1753717912702_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1440, y: 975, width: 202, height: 1578 }
Final blur coordinates: 975,1358 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753717934340.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 480, y: 1786, width: 2043, height: 821 }
Final blur coordinates: 1786,477 821x2043
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753717934471.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753717934267_1753717912702_BendoverAss.jpg
Blurred file created successfully - Size: 2436390 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718109989-892475476.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718109999_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1257ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1264ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 242
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1274ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718288769-122136098.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718288776_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1205ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1215ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 243
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1226ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 893, y: 1393, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718288776_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718311294_1753718288776_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753718311385.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 893, y: 1393, width: 821, height: 2043 }
Final blur coordinates: 1393,1286 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753718311511.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718311294_1753718288776_BendoverAss.jpg
Blurred file created successfully - Size: 2393013 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718435252-527853547.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718435263_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1198ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1209ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 244
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1217ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1440, y: 1975, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 480, y: 2786, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718435263_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718449023_1753718435263_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1440, y: 1975, width: 202, height: 1578 }
Final blur coordinates: 1975,1358 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753718449100.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 480, y: 2786, width: 2043, height: 821 }
Final blur coordinates: 2786,477 821x2043
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753718449224.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718449023_1753718435263_BendoverAss.jpg
Blurred file created successfully - Size: 2593723 bytes
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718705298-722465888.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718705307_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1263ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1277ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 245
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1286ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 393, y: 480, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718705307_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718723970_1753718705307_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753718724056.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 393, y: 480, width: 821, height: 2043 }
Final blur coordinates: 480,1786 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753718724203.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718723970_1753718705307_BendoverAss.jpg
Blurred file created successfully - Size: 2430434 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718866081-132742657.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718866092_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1302ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1312ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 35ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 246
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1352ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1440, y: 975, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 480, y: 1786, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718866092_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718883453_1753718866092_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1440, y: 975, width: 202, height: 1578 }
Final blur coordinates: 975,1358 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753718883522.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 480, y: 1786, width: 2043, height: 821 }
Final blur coordinates: 1786,477 821x2043
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753718883651.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753718883453_1753718866092_BendoverAss.jpg
Blurred file created successfully - Size: 2436390 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718946682-143890827.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718946689_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1244ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1254ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 247
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1261ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753718977497-965666049.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753718977506_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1400ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1410ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 2ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 248
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1416ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753719156630-936699776.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753719156645_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1346ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1357ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 249
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1364ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753719279947-549036930.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753719279961_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 8613ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 8614ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 250
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 8624ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753719299155-30710029.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753719299164_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1498ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1498ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 251
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1503ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753719978343-18237419.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753719978355_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 13192ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 13203ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 252
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 13211ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753720737944-266023311.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753720737956_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1257ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1258ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 253
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1268ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1087, y: 1780, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753720737956_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753720930046_1753720737956_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1087, y: 1780, width: 821, height: 2043 }
Final blur coordinates: 1780,1092 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753720930174.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753720930046_1753720737956_BendoverAss.jpg
Blurred file created successfully - Size: 2427722 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753721413584-324937312.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753721413602_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1462ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1463ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 10ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 254
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1487ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1107, y: 1680, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753721413602_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753721473823_1753721413602_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1107, y: 1680, width: 821, height: 2043 }
Received manual blur box: x=1107, y=1680, w=821, h=2043
Final blur coordinates: 1680,1072 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753721473953.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 1 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753721473823_1753721413602_BendoverAss.jpg
Blurred file created successfully - Size: 2416569 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753721902301-210331572.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753721902319_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1347ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1357ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 10ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 255
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1373ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 947, y: 1560, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753721902319_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753722216729_1753721902319_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Received manual blur box: x=447, y=1440, w=1578, h=202
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753722216844.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 947, y: 1560, width: 821, height: 2043 }
Received manual blur box: x=947, y=1560, w=821, h=2043
Final blur coordinates: 1560,1232 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753722216969.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753722216729_1753721902319_BendoverAss.jpg
Blurred file created successfully - Size: 2383679 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753722407615-116004644.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753722407630_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 455ms
ğŸ“Š Status: 500, Content-Length: 106
ğŸ Complete response received in 517ms, size: 106 bytes
âœ… JSON parsed successfully, success: false
âŒ Enhanced API returned success: false
Error details: Missing chunk terminating newline
Error processing uploaded image: Error: Missing chunk terminating newline
    at IncomingMessage.<anonymous> (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:287:36)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
âœ… Upload processing completed in 522ms
ğŸ“Š Result: success=false, status=error, nudity=undefined
âŒ Sending error response to client...
âœ… Error response sent
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753722419711-382365023.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753722419722_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1397ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1397ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 256
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1406ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 393, y: 480, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753722419722_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753722437704_1753722419722_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Received manual blur box: x=447, y=1440, w=1578, h=202
Final blur coordinates: 1440,975 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753722437787.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 393, y: 480, width: 821, height: 2043 }
Received manual blur box: x=393, y=480, w=821, h=2043
Final blur coordinates: 480,1786 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753722437928.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753722437704_1753722419722_BendoverAss.jpg
Blurred file created successfully - Size: 2430434 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753723066204-490039111.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723066220_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 4529ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 4540ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 11ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 257
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 4560ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 15,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1107, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1107, y: 1520, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723066220_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723117826_1753723066220_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Auto-rotated image dimensions: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 15px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1107, width: 1578, height: 202 }
Received manual blur box: x=447, y=1107, w=1578, h=202
Final blur coordinates: 1107,975 202x1578
DEBUG: About to apply 15px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753723117926.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1107, y: 1520, width: 821, height: 2043 }
Received manual blur box: x=1107, y=1520, w=821, h=2043
Final blur coordinates: 1520,1072 2043x821
DEBUG: About to apply 15px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753723118064.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions
Applying EXIF rotation to final output
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723117826_1753723066220_BendoverAss.jpg
Blurred file created successfully - Size: 2374248 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753723657721-716652981.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723657752_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1348ms
ğŸ“Š Status: 200, Content-Length: 1089
ğŸ Complete response received in 1359ms, size: 1089 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.75638008117676
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 14ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 258
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1386ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.75638008117676
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'oval',
  blurredParts: [ 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    MALE_GENITALIA_EXPOSED: { x: 2140, y: 2120, width: 380, height: 880 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723657752_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723683105_1753723657752_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
No EXIF rotation needed
Applying selective blur to regions: [ 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2140, y: 2120, width: 380, height: 880 }
Received manual blur box: x=2140, y=2120, w=380, h=880
Using coordinates directly (normalized system): 2140,2120 380x880
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753723683222.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 1 blur regions
Using normalized image - no additional rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723683105_1753723657752_BlowJob.jpg
Blurred file created successfully - Size: 4175152 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753723838749-622310910.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723838762_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1297ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1308ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 259
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1317ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1187, y: 1473, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753723838762_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753723850283_1753723838762_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
Using EXIF auto-rotation to match AI analysis coordinate system
Normalized image dimensions for blur: 4000 x 3000
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Received manual blur box: x=447, y=1440, w=1578, h=202
Using coordinates directly (normalized system): 447,1440 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753723850351.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1187, y: 1473, width: 821, height: 2043 }
Received manual blur box: x=1187, y=1473, w=821, h=2043
Using coordinates directly (normalized system): 1187,1473 821x2043
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753724412681-380130206.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753724412695_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 5016ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 5027ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 260
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 5036ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753724955457-715909844.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753724955473_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1154ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1165ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 261
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1184ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 16,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2455, y: 945, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 110, y: 1055, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753724955473_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753724973189_1753724955473_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 16px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2455, y: 945, width: 202, height: 1578 }
Received manual blur box: x=2455, y=945, w=202, h=1578
Using coordinates directly (normalized system): 2455,945 202x1578
DEBUG: About to apply 16px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753724973276.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 110, y: 1055, width: 2043, height: 821 }
Received manual blur box: x=110, y=1055, w=2043, h=821
Using coordinates directly (normalized system): 110,1055 2043x821
DEBUG: About to apply 16px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753724973381.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753724973189_1753724955473_BendoverAss.jpg
Blurred file created successfully - Size: 2389014 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725170629-523991000.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725170646_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1202ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1212ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 12ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 4ms
Content flagged and added to moderation queue: 262
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1241ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 14,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1275, y: 685, width: 390, height: 1580 },
    FEMALE_GENITALIA_EXPOSED: { x: 1955, y: 890, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725170646_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725200606_1753725170646_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 14px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1275, y: 685, width: 390, height: 1580 }
Received manual blur box: x=1275, y=685, w=390, h=1580
Using coordinates directly (normalized system): 1275,685 390x1580
DEBUG: About to apply 14px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725200694.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1955, y: 890, width: 2043, height: 821 }
Received manual blur box: x=1955, y=890, w=2043, h=821
Using coordinates directly (normalized system): 1955,890 2043x821
DEBUG: About to apply 14px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725200790.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725200606_1753725170646_BendoverAss.jpg
Blurred file created successfully - Size: 2426072 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725313941-523835325.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725313954_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1260ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1271ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 263
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1281ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 15,
  shape: 'oval',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1385, y: 445, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1680, y: 1105, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725313954_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725335245_1753725313954_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 15px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1385, y: 445, width: 202, height: 1578 }
Received manual blur box: x=1385, y=445, w=202, h=1578
Using coordinates directly (normalized system): 1385,445 202x1578
DEBUG: About to apply 15px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725335319.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1680, y: 1105, width: 2043, height: 821 }
Received manual blur box: x=1680, y=1105, w=2043, h=821
Using coordinates directly (normalized system): 1680,1105 2043x821
DEBUG: About to apply 15px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725335427.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725335245_1753725313954_BendoverAss.jpg
Blurred file created successfully - Size: 2423684 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725453407-292073642.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725453421_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1479ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1493ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 264
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1505ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1540, y: 645, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1815, y: 1150, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725453421_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725488481_1753725453421_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1540, y: 645, width: 202, height: 1578 }
Received manual blur box: x=1540, y=645, w=202, h=1578
Using coordinates directly (normalized system): 1540,645 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725488562.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1815, y: 1150, width: 2043, height: 821 }
Received manual blur box: x=1815, y=1150, w=2043, h=821
Using coordinates directly (normalized system): 1815,1150 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725488664.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725488481_1753725453421_BendoverAss.jpg
Blurred file created successfully - Size: 2445638 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725516394-212922451.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725516409_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1214ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1225ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 265
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1232ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1655, y: 1050, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725516409_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725548549_1753725516409_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725548628.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1655, y: 1050, width: 2043, height: 821 }
Received manual blur box: x=1655, y=1050, w=2043, h=821
Using coordinates directly (normalized system): 1655,1050 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725548727.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725548549_1753725516409_BendoverAss.jpg
Blurred file created successfully - Size: 2452210 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725755360-676850893.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725755372_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1275ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1275ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 266
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1286ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1555, y: 1150, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725755372_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725767449_1753725755372_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725767521.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1555, y: 1150, width: 2043, height: 821 }
Received manual blur box: x=1555, y=1150, w=2043, h=821
Using coordinates directly (normalized system): 1555,1150 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725767620.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725767449_1753725755372_BendoverAss.jpg
Blurred file created successfully - Size: 2451864 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753725848092-988646913.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725848101_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1309ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1320ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 267
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1333ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1665, y: 1025, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753725848101_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725899040_1753725848101_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753725899118.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1665, y: 1025, width: 2043, height: 821 }
Received manual blur box: x=1665, y=1025, w=2043, h=821
Using coordinates directly (normalized system): 1665,1025 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753725899211.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753725899040_1753725848101_BendoverAss.jpg
Blurred file created successfully - Size: 2446617 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753726007328-372706659.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726007341_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1364ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1364ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 268
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1374ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1570, y: 1100, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726007341_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726027201_1753726007341_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753726027283.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1570, y: 1100, width: 2043, height: 821 }
Received manual blur box: x=1570, y=1100, w=2043, h=821
Using coordinates directly (normalized system): 1570,1100 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753726027380.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726027201_1753726007341_BendoverAss.jpg
Blurred file created successfully - Size: 2450810 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753726115196-392927143.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726115205_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1230ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1236ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 4ms
Content flagged and added to moderation queue: 269
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1248ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1660, y: 1015, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726115205_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726131001_1753726115205_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753726131075.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1660, y: 1015, width: 2043, height: 821 }
Received manual blur box: x=1660, y=1015, w=2043, h=821
Using coordinates directly (normalized system): 1660,1015 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753726131164.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726131001_1753726115205_BendoverAss.jpg
Blurred file created successfully - Size: 2450130 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753726224631-836190215.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726224643_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1385ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1395ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 270
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1403ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 },
    FEMALE_GENITALIA_EXPOSED: { x: 1545, y: 1175, width: 2043, height: 821 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726224643_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726242625_1753726224643_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape-first approach
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 2358, y: 447, width: 202, height: 1578 }
Received manual blur box: x=2358, y=447, w=202, h=1578
Using coordinates directly (normalized system): 2358,447 202x1578
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753726242703.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1545, y: 1175, width: 2043, height: 821 }
Received manual blur box: x=1545, y=1175, w=2043, h=821
Using coordinates directly (normalized system): 1545,1175 2043x821
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753726242800.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping landscape orientation or no rotation needed
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726242625_1753726224643_BendoverAss.jpg
Blurred file created successfully - Size: 2449450 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753726827129-607130705.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726827150_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1304ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1314ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 10ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 271
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1338ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 },
    FEMALE_GENITALIA_EXPOSED: { x: 1127, y: 1400, width: 821, height: 2043 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753726827150_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753726837762_1753726827150_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with proper EXIF handling
Working with upright image dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 447, y: 1440, width: 1578, height: 202 }
Received manual blur box: x=447, y=1440, w=1578, h=202
Using coordinates directly (normalized system): 447,1440 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753726837827.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1127, y: 1400, width: 821, height: 2043 }
Received manual blur box: x=1127, y=1400, w=821, h=2043
Using coordinates directly (normalized system): 1127,1400 821x2043
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727010246-57312041.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727010262_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1223ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1236ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 272
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1256ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED' ],
  overlayPositions: { BUTTOCKS_EXPOSED: { x: 1920, y: 1485, width: 1578, height: 202 } }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727010262_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753727037826_1753727010262_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape coordinates, EXIF restoration after blur
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1920, y: 1485, width: 1578, height: 202 }
Received manual blur box: x=1920, y=1485, w=1578, h=202
Using coordinates directly (normalized system): 1920,1485 1578x202
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753727037887.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Applying 1 blur regions to landscape image
ğŸ”„ Restoring original EXIF orientation 6
âœ… Restored to original orientation for device compatibility
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753727037826_1753727010262_BendoverAss.jpg
Blurred file created successfully - Size: 2635575 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727084094-303810915.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727084107_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 6035ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 6036ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 273
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 6043ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727702694-688964957.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727702709_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 6220ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 6231ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 274
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 6241ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727900817-865020886.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727900835_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753727901997-282561200.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753727902015_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
âœ… Enhanced API response received in 1287ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1288ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 275
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1299ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1502ms
ğŸ“Š Status: 200, Content-Length: 1095
ğŸ Complete response received in 1513ms, size: 1095 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 2ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 276
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1521ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753729118974-757008711.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753729118992_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1382ms
ğŸ“Š Status: 200, Content-Length: 1092
ğŸ Complete response received in 1393ms, size: 1092 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 277
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1406ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753729139501-617583882.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753729139520_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1243ms
ğŸ“Š Status: 200, Content-Length: 1092
ğŸ Complete response received in 1255ms, size: 1092 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 278
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1274ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753730014482-325593716.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753730014493_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1582ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1582ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 41ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 279
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1631ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753730419645-614291824.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753730419662_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1522ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1533ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 280
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1548ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753730434055-345413397.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753730434062_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1671ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1671ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 281
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1677ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753730810445-579734840.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753730810455_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2453ms
ğŸ“Š Status: 200, Content-Length: 948
ğŸ Complete response received in 2464ms, size: 948 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=28.055399656295776, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 28.055399656295776
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 25.2498596906662,
  nudity_contribution: 28.055399656295776,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 282
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2478ms
ğŸ“Š Result: success=true, status=flagged, nudity=28.055399656295776
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753731104877-734224733.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731104889_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 3225ms
ğŸ“Š Status: 200, Content-Length: 1092
ğŸ Complete response received in 3237ms, size: 1092 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 283
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 3253ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1642, y: 528, width: 1440, height: 2025 },
    FEMALE_GENITALIA_EXPOSED: { x: 2523, y: 1393, width: 480, height: 393 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731104889_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753731181724_1753731104889_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape coordinates, EXIF restoration after blur
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1642, y: 528, width: 1440, height: 2025 }
Received manual blur box: x=1642, y=528, w=1440, h=2025
Using coordinates directly (normalized system): 1642,528 1440x2025
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753731181885.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2523, y: 1393, width: 480, height: 393 }
Received manual blur box: x=2523, y=1393, w=480, h=393
Using coordinates directly (normalized system): 2523,1393 480x393
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753731181963.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
ğŸ”„ Restoring original EXIF orientation 6
âœ… Restored to original orientation for device compatibility
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753731181724_1753731104889_BendoverAss.jpg
Blurred file created successfully - Size: 2140371 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753731494083-415874871.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731494092_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 5323ms
ğŸ“Š Status: 200, Content-Length: 1092
ğŸ Complete response received in 5335ms, size: 1092 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 284
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 5345ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753731828825-444825620.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731828845_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1347ms
ğŸ“Š Status: 200, Content-Length: 1092
ğŸ Complete response received in 1359ms, size: 1092 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âŒ JSON parse error: Assignment to constant variable.
Raw response preview: {"image_analysis":{"combined_assessment":{"final_risk_score":47.1821254491806,"nudity_contribution":67.40303635597229,"pose_contribution":0,"reasoning":["nudity_detected_67.4%"],"risk_level":"low"},"nudity_detection":{"detected_parts":{"BUTTOCKS_EXPOSED":67.40303635597229,"FEMALE_GENITALIA_EXPOSED":...
Error processing uploaded image: Error: Failed to parse enhanced analysis response
    at IncomingMessage.<anonymous> (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:292:32)
    at IncomingMessage.emit (node:events:530:35)
    at endReadableNT (node:internal/streams/readable:1698:12)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
âœ… Upload processing completed in 1368ms
ğŸ“Š Result: success=false, status=error, nudity=undefined
âŒ Sending error response to client...
âœ… Error response sent
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753731998858-470328146.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753731998877_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1341ms
ğŸ“Š Status: 200, Content-Length: 1092
ğŸ Complete response received in 1350ms, size: 1092 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 17ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 4ms
Content flagged and added to moderation queue: 285
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1383ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753732131725-517087577.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753732131739_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1324ms
ğŸ“Š Status: 200, Content-Length: 1092
ğŸ Complete response received in 1335ms, size: 1092 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 67.40303635597229
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.1821254491806,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_67.4%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 286
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1351ms
ğŸ“Š Result: success=true, status=flagged, nudity=67.40303635597229
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753733860502-360863879.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753733860523_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1799ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1810ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 41ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 287
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1865ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753733966004-171726579.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753733966023_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753733966158-777576886.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753733966174_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2357ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 2394ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 17ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 288
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2424ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
âœ… Enhanced API response received in 2293ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 2307ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 289
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2322ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753734268016-172354192.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753734268044_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1699ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1709ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 290
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1721ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753734491440-993680487.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753734491451_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1832ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1838ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 291
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1852ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753735528995-589133052.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753735529010_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1652ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1662ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 10ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 292
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1691ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753736240217-513434682.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753736240232_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1721ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1730ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 293
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1743ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753736267601-502959798.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753736267612_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1637ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1649ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 13ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 294
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1664ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753736551265-165616223.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753736551286_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 8841ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 8842ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 12ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 295
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 8871ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753736611476-473904074.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753736611500_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1636ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1647ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 296
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1657ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753737001974-766221594.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753737001991_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2000ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 2097ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 297
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2107ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753737502487-945059097.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753737502499_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1856ms
ğŸ“Š Status: 200, Content-Length: 1093
ğŸ Complete response received in 1866ms, size: 1093 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=66.66176319122314, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 66.66176319122314
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 46.6632342338562,
  nudity_contribution: 66.66176319122314,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_66.7%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 298
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1881ms
ğŸ“Š Result: success=true, status=flagged, nudity=66.66176319122314
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753737812603-470414198.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753737812614_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1783ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1798ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 299
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1814ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED', 'ANUS_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753737812614_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738030852_1753737812614_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing with landscape coordinates, EXIF restoration after blur
Working with landscape dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738030925.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Using coordinates directly (normalized system): 2538,1392 456x372
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753738030984.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
ğŸ”„ Restoring original EXIF orientation 6
âœ… Restored to original orientation for device compatibility
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738030852_1753737812614_BendoverAss.jpg
Blurred file created successfully - Size: 2619282 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753738244207-70654282.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738244223_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1588ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1602ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 16ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 300
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1632ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'ANUS_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738244223_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738251350_1753738244223_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
âœ… Using EXIF-corrected image directly (matches NudeNet coordinate system)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738251407.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Using coordinates directly (normalized system): 1666,565 1338x1925
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753738251530.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Using coordinates directly (normalized system): 2538,1392 456x372
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753738251602.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
ğŸ”„ Restoring original EXIF orientation 6
âœ… Restored to original orientation for device compatibility
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738251350_1753738244223_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753738507874-955339161.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738507892_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2084ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 2096ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 301
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2122ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'ANUS_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738507892_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738514914_1753738507892_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738515007.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753738688605-556014920.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738688621_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1671ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1681ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 302
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1698ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738688621_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738698986_1753738688621_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738699079.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753738836170-121293512.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738836185_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1697ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1707ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 303
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1724ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738836185_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738850938_1753738836185_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738851039.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738836185_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753738903587_1753738836185_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753738903696.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753738836185_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739203205_1753738836185_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739203304.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739215064-413111784.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739215085_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1745ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1755ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 10ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 304
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1775ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739215085_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739226649_1753739215085_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739226754.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739215085_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739429348_1753739215085_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739429448.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739441282-702112002.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739441296_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1662ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1663ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 305
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1678ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739441296_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739448380_1753739441296_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using identical processing to NudeNet coordinate system
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739448480.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739655480-759761474.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739655496_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1544ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1553ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 306
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1568ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739655496_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739662492_1753739655496_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739662589.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739797046-391518561.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739797064_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1667ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1667ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 307
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1681ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739797064_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739813426_1753739797064_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739813524.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
âŒ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
âŒ Coordinates: left=1666, top=565, width=1338, height=1925
âŒ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739875081-775956072.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739875097_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2409ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 2410ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 308
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2430ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739875097_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739885694_1753739875097_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739885794.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
âŒ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
âŒ Coordinates: left=1666, top=565, width=1338, height=1925
âŒ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753739980763-379392586.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739980779_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1638ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1639ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 309
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1656ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739980779_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753739990510_1753739980779_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753739990609.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
âŒ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
âŒ Coordinates: left=1666, top=565, width=1338, height=1925
âŒ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753739980779_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740077838_1753739980779_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED
ğŸ”„ Getting metadata for fresh instance
ğŸ”„ Fresh instance metadata: 4000x3000, orientation: 6
ğŸ”„ Applying 90Â° rotation to fresh instance
ğŸ”„ Getting post-rotation metadata
ğŸ”„ Post-rotation metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753740077940.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED
ğŸ”„ Getting metadata for fresh instance
ğŸ”„ Fresh instance metadata: 4000x3000, orientation: 6
ğŸ”„ Applying 90Â° rotation to fresh instance
ğŸ”„ Getting post-rotation metadata
ğŸ”„ Post-rotation metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âŒ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
âŒ Coordinates: left=1666, top=565, width=1338, height=1925
âŒ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740094806-167738690.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740094822_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1535ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1546ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 310
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1568ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740094822_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740108578_1753740094822_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED
ğŸ”„ Getting metadata for fresh instance
ğŸ”„ Fresh instance metadata: 4000x3000, orientation: 6
ğŸ”„ Applying 90Â° rotation to fresh instance
ğŸ”„ Getting post-rotation metadata
ğŸ”„ Post-rotation metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âŒ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
âŒ Coordinates: left=1666, top=565, width=1338, height=1925
âŒ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740175315-770223302.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740175332_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 4291ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 4292ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 311
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 4310ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740175332_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740186258_1753740175332_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED
ğŸ”„ Getting metadata for fresh instance
ğŸ”„ Fresh instance metadata: 4000x3000, orientation: 6
ğŸ”„ Applying 90Â° rotation to fresh instance
ğŸ”„ Getting post-rotation metadata
ğŸ”„ Post-rotation metadata (corrected): 3000x4000
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 3000x4000
ğŸ” Right edge: 2607 <= 3000? true
ğŸ” Bottom edge: 1716 <= 4000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753740186467.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED
ğŸ”„ Getting metadata for fresh instance
ğŸ”„ Fresh instance metadata: 4000x3000, orientation: 6
ğŸ”„ Applying 90Â° rotation to fresh instance
ğŸ”„ Getting post-rotation metadata
ğŸ”„ Post-rotation metadata (corrected): 3000x4000
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 3000x4000
ğŸ” Right edge: 3004 <= 3000? false
ğŸ” Bottom edge: 2490 <= 4000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âŒ Extract failed for BUTTOCKS_EXPOSED: extract_area: bad extract area
âŒ Coordinates: left=1666, top=565, width=1338, height=1925
âŒ Image dimensions: 4000x3000
Error creating blurred version: [Error: extract_area: bad extract area]
Approve with blur error: [Error: extract_area: bad extract area]
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740252441-800563284.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740252459_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1658ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1659ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 312
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1673ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740252459_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740264825_1753740252459_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED
ğŸ”„ Getting metadata for fresh instance
ğŸ”„ Fresh instance metadata: 4000x3000, orientation: 6
ğŸ”„ Applying 90Â° rotation to fresh instance
ğŸ”„ Getting post-rotation metadata
ğŸ”„ Post-rotation metadata (corrected): 3000x4000
ğŸ”„ Converting to landscape to match admin interface coordinate system
ğŸ”„ Final landscape metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753740265194.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED
ğŸ”„ Getting metadata for fresh instance
ğŸ”„ Fresh instance metadata: 4000x3000, orientation: 6
ğŸ”„ Applying 90Â° rotation to fresh instance
ğŸ”„ Getting post-rotation metadata
ğŸ”„ Post-rotation metadata (corrected): 3000x4000
ğŸ”„ Converting to landscape to match admin interface coordinate system
ğŸ”„ Final landscape metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âœ… Fresh extract successful for BUTTOCKS_EXPOSED
âœ… Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753740265726.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED
ğŸ”„ Getting metadata for fresh instance
ğŸ”„ Fresh instance metadata: 4000x3000, orientation: 6
ğŸ”„ Applying 90Â° rotation to fresh instance
ğŸ”„ Getting post-rotation metadata
ğŸ”„ Post-rotation metadata (corrected): 3000x4000
ğŸ”„ Converting to landscape to match admin interface coordinate system
ğŸ”„ Final landscape metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753740266156.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
âœ… Keeping EXIF-corrected orientation for consistency with admin interface
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740264825_1753740252459_BendoverAss.jpg
Blurred file created successfully - Size: 2177219 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740358770-327413238.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740358785_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 6769ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 6780ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 313
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 6794ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740358785_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740373809_1753740358785_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur with NudeNet coordinate system
ğŸ”„ Applying manual 90Â° EXIF rotation (matching NudeNet processing)
âœ… Using EXIF-corrected coordinate system (matching admin interface)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED
ğŸ”„ Admin interface shows EXIF orientation: 1 (no rotation)
ğŸ”„ Using autoRotate: true to match admin interface
ğŸ”„ Auto-rotated metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753740373870.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED
ğŸ”„ Admin interface shows EXIF orientation: 1 (no rotation)
ğŸ”„ Using autoRotate: true to match admin interface
ğŸ”„ Auto-rotated metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âœ… Fresh extract successful for BUTTOCKS_EXPOSED
âœ… Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753740374004.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED
ğŸ”„ Admin interface shows EXIF orientation: 1 (no rotation)
ğŸ”„ Using autoRotate: true to match admin interface
ğŸ”„ Auto-rotated metadata: 4000x3000
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753740374075.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
âœ… Keeping EXIF-corrected orientation for consistency with admin interface
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753740373809_1753740358785_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753740666032-952121317.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753740666061_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1695ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1707ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 314
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1729ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741002672-979097834.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741002694_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 9517ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 9529ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 315
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 9547ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741002694_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741016564_1753741002694_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741016627.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âœ… Fresh extract successful for BUTTOCKS_EXPOSED
âœ… Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741016753.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741016830.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
ğŸ”„ Restoring original EXIF orientation 6 after blur application
ğŸ”„ Rotating blurred result 90Â° clockwise for EXIF 6
âœ… Blurred image rotated to original orientation for display
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741016564_1753741002694_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741039448-500226328.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741039464_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1737ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1747ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 316
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1754ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741039464_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741045733_1753741039464_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741045793.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âœ… Fresh extract successful for BUTTOCKS_EXPOSED
âœ… Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741045926.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741046014.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
ğŸ”„ Restoring original EXIF orientation 6 after blur application
ğŸ”„ Rotating blurred result 90Â° clockwise for EXIF 6
âœ… Blurred image rotated to original orientation for display
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741045733_1753741039464_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741387154-485852146.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741387171_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 5179ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 5190ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 317
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 5213ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741532780-369380451.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741532795_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1661ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1671ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 318
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1682ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741532795_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741548919_1753741532795_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741548985.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âœ… Fresh extract successful for BUTTOCKS_EXPOSED
âœ… Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741549111.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741549192.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741548919_1753741532795_BendoverAss.jpg
Blurred file created successfully - Size: 2344679 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741633824-715734366.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741633844_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1755ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1755ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 319
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1774ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741633844_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741662031_1753741633844_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741662090.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âœ… Fresh extract successful for BUTTOCKS_EXPOSED
âœ… Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741662211.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741662288.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
ğŸ”„ Rotating final blurred result back to display orientation 6
ğŸ”„ Rotating final result 90Â° clockwise for display
âœ… Final blurred image rotated to correct display orientation
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741662031_1753741633844_BendoverAss.jpg
Blurred file created successfully - Size: 2176794 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741816980-126288281.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741816998_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1998ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1999ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 320
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2020ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741816998_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741824817_1753741816998_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'BUTTOCKS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 10px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753741824877.jpg
DEBUG: Using pure Gaussian blur for ANUS_EXPOSED
Processing blur for BUTTOCKS_EXPOSED: { x: 1666, y: 565, width: 1338, height: 1925 }
Received manual blur box: x=1666, y=565, w=1338, h=1925
Working image dimensions: 4000x3000
Coordinate validation: right=3004/4000, bottom=2490/3000
Using coordinates directly (normalized system): 1666,565 1338x1925
ğŸ” About to extract region: left=1666, top=565, width=1338, height=1925
ğŸ” Extract bounds check: right=3004/4000, bottom=2490/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BUTTOCKS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1666, 565, 1338, 1925) from 4000x3000
ğŸ” Right edge: 3004 <= 4000? true
ğŸ” Bottom edge: 2490 <= 3000? true
ğŸ”„ Attempting extract for BUTTOCKS_EXPOSED...
âœ… Fresh extract successful for BUTTOCKS_EXPOSED
âœ… Successfully extracted BUTTOCKS_EXPOSED region
DEBUG: About to apply 10px blur to BUTTOCKS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_BUTTOCKS_EXPOSED_1753741825002.jpg
DEBUG: Using pure Gaussian blur for BUTTOCKS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753741825079.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 3 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753741824817_1753741816998_BendoverAss.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2407627 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BacksideClean.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753741987044-30127702.jpg',
  originalName: 'BacksideClean.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753741987059_BacksideClean.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1748ms
ğŸ“Š Status: 200, Content-Length: 1519
ğŸ Complete response received in 1756ms, size: 1519 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=58.76510143280029, pose=artistic_or_neutral, suggestive=0.2
âœ… Transformation complete, final nudity score: 58.76510143280029
ğŸ­ Pose analysis: artistic_or_neutral (0.2)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_away',
    hip_bend_angle: 5.968286919900238,
    leg_spread: 0.04622828960418701,
    reasoning: [ 'facing_away_pose' ],
    torso_angle: 2.815795564625171
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_away',
    hip_bend_angle: 5.968286919900238,
    leg_spread: 0.04622828960418701,
    shoulder_width: 0.22983288764953613,
    torso_angle: 2.815795564625171
  },
  suggestive_score: 0.2
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.135571002960205,
  nudity_contribution: 58.76510143280029,
  pose_contribution: 20,
  reasoning: [ 'nudity_detected_58.8%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 321
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1766ms
ğŸ“Š Result: success=true, status=flagged, nudity=58.76510143280029
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BacksideClean.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742000186-399381549.jpg',
  originalName: 'BacksideClean.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742000198_BacksideClean.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2449ms
ğŸ“Š Status: 200, Content-Length: 1519
ğŸ Complete response received in 2460ms, size: 1519 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=58.76510143280029, pose=artistic_or_neutral, suggestive=0.2
âœ… Transformation complete, final nudity score: 58.76510143280029
ğŸ­ Pose analysis: artistic_or_neutral (0.2)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_away',
    hip_bend_angle: 5.968286919900238,
    leg_spread: 0.04622828960418701,
    reasoning: [ 'facing_away_pose' ],
    torso_angle: 2.815795564625171
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_away',
    hip_bend_angle: 5.968286919900238,
    leg_spread: 0.04622828960418701,
    shoulder_width: 0.22983288764953613,
    torso_angle: 2.815795564625171
  },
  suggestive_score: 0.2
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 47.135571002960205,
  nudity_contribution: 58.76510143280029,
  pose_contribution: 20,
  reasoning: [ 'nudity_detected_58.8%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 322
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2466ms
ğŸ“Š Result: success=true, status=flagged, nudity=58.76510143280029
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742009485-196861902.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742009498_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 4175ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 4176ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 323
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 4184ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742023436-250424037.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742023452_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 6298ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 6308ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 17ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 324
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 6327ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'ANUS_EXPOSED',
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'ARMPITS_EXPOSED',
    'BUTTOCKS_COVERED',
    'FEET_COVERED',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED'
  ],
  overlayPositions: {
    FACE_FEMALE: { x: 1661, y: 1562, width: 1058, height: 1004 },
    MALE_GENITALIA_EXPOSED: { x: 2069, y: 2343, width: 536, height: 640 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742023452_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753742041798_1753742023452_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 1661, y: 1562, width: 1058, height: 1004 }
Received manual blur box: x=1661, y=1562, w=1058, h=1004
Working image dimensions: 4000x3000
Coordinate validation: right=2719/4000, bottom=2566/3000
Using coordinates directly (normalized system): 1661,1562 1058x1004
ğŸ” About to extract region: left=1661, top=1562, width=1058, height=1004
ğŸ” Extract bounds check: right=2719/4000, bottom=2566/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(1661, 1562, 1058, 1004) from 4000x3000
ğŸ” Right edge: 2719 <= 4000? true
ğŸ” Bottom edge: 2566 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 10px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753742041982.jpg
DEBUG: Using pure Gaussian blur for FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2069, y: 2343, width: 536, height: 640 }
Received manual blur box: x=2069, y=2343, w=536, h=640
Working image dimensions: 4000x3000
Coordinate validation: right=2605/4000, bottom=2983/3000
Using coordinates directly (normalized system): 2069,2343 536x640
ğŸ” About to extract region: left=2069, top=2343, width=536, height=640
ğŸ” Extract bounds check: right=2605/4000, bottom=2983/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(2069, 2343, 536, 640) from 4000x3000
ğŸ” Right edge: 2605 <= 4000? true
ğŸ” Bottom edge: 2983 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753742042132.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753742041798_1753742023452_BlowJob.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 4132610 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'r-sex.jpeg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742064886-112202338.jpeg',
  originalName: 'r-sex.jpeg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742064887_r-sex.jpeg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 191ms
ğŸ“Š Status: 200, Content-Length: 1227
ğŸ Complete response received in 202ms, size: 1227 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=65.19224643707275, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 65.19224643707275
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 33.68946120218632,
    leg_spread: 0.04340171813964844,
    reasoning: [],
    torso_angle: 12.08006759939978
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 33.68946120218632,
    leg_spread: 0.04340171813964844,
    shoulder_width: 0.1058916449546814,
    torso_angle: 12.08006759939978
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.67302179336548,
  nudity_contribution: 65.19224643707275,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 325
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 209ms
ğŸ“Š Result: success=true, status=flagged, nudity=65.19224643707275
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'X_rated.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742080886-398760346.jpg',
  originalName: 'X_rated.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742080893_X_rated.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2210ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 2210ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 0ms
Content flagged and added to moderation queue: 326
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2215ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [
    'ANUS_EXPOSED',
    'BUTTOCKS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'ARMPITS_EXPOSED',
    'BUTTOCKS_COVERED',
    'FEET_COVERED',
    'FACE_FEMALE',
    'FACE_MALE'
  ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742080893_X_rated.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753742098874_1753742080893_X_rated.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
Received manual blur box: x=1029, y=613, w=2832, h=1964
Working image dimensions: 4000x3000
Coordinate validation: right=3861/4000, bottom=2577/3000
Using coordinates directly (normalized system): 1029,613 2832x1964
ğŸ” About to extract region: left=1029, top=613, width=2832, height=1964
ğŸ” Extract bounds check: right=3861/4000, bottom=2577/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1029, 613, 2832, 1964) from 4000x3000
ğŸ” Right edge: 3861 <= 4000? true
ğŸ” Bottom edge: 2577 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753742099123.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 1 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753742098874_1753742080893_X_rated.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 1569781 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742145687-198687945.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742145695_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 7523ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 7532ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 327
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 7540ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742465525-60911102.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742465533_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1677ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1677ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 328
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1686ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742602160-156950841.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742602169_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1676ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1687ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 329
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1702ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753742688360-269737170.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753742688368_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1637ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1651ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 330
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1661ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753743048913-175031174.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753743048931_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1627ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1642ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 331
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1665ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753743209915-729992186.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753743209929_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2084ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 2100ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 59ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 332
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2170ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753743435300-664712260.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753743435316_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2715ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 2727ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 333
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2747ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
ğŸ” Generating Sharp.js blur preview for: originals
Blur settings: { strength: 10, shape: 'square' }
Overlay positions: {
  FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 },
  MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
}
ğŸ” Converted to absolute path: /Users/programmer/Projects/musenest/public/uploads/originals
Error generating blur preview: TypeError: ContentModerationService.processImageWithBlur is not a function
    at /Users/programmer/Projects/musenest/routes/api/media-review-queue.js:1061:55
    at Layer.handle [as handle_request] (/Users/programmer/Projects/musenest/node_modules/express/lib/router/layer.js:95:5)
    at next (/Users/programmer/Projects/musenest/node_modules/express/lib/router/route.js:149:13)
    at Route.dispatch (/Users/programmer/Projects/musenest/node_modules/express/lib/router/route.js:119:3)
    at Layer.handle [as handle_request] (/Users/programmer/Projects/musenest/node_modules/express/lib/router/layer.js:95:5)
    at /Users/programmer/Projects/musenest/node_modules/express/lib/router/index.js:284:15
    at Function.process_params (/Users/programmer/Projects/musenest/node_modules/express/lib/router/index.js:346:12)
    at next (/Users/programmer/Projects/musenest/node_modules/express/lib/router/index.js:280:10)
    at Function.handle (/Users/programmer/Projects/musenest/node_modules/express/lib/router/index.js:175:3)
    at router (/Users/programmer/Projects/musenest/node_modules/express/lib/router/index.js:47:12)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753743578218-751990620.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753743578235_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1637ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1638ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 334
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1656ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
ğŸ” Generating Sharp.js blur preview for: originals
Blur settings: { strength: 10, shape: 'square' }
Overlay positions: {
  FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 },
  MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
}
ğŸ” Converted to absolute path: /Users/programmer/Projects/musenest/public/uploads/originals
ğŸ” Using model name for preview: Preview
Original file not accessible: /Users/programmer/Projects/musenest/public/uploads/originals
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753743690483-126982829.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753743690501_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1686ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1696ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 335
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1712ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
ğŸ” Generating Sharp.js blur preview for: originals
Blur settings: { strength: 10, shape: 'square' }
Overlay positions: {
  FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 },
  MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
}
ğŸ” Request body details:
  - filePath type: string
  - filePath value: "originals"
  - blurSettings type: object
  - overlayPositions type: object
ğŸ” Converted to absolute path: /Users/programmer/Projects/musenest/public/uploads/originals
ğŸ” Using model name for preview: Preview
ğŸ” About to call createBlurredVersion with:
  - absoluteFilePath: /Users/programmer/Projects/musenest/public/uploads/originals
  - modelName: Preview
  - previewBlurSettings: {
  "strength": 10,
  "shape": "square",
  "overlayPositions": {
    "FEMALE_GENITALIA_EXPOSED": {
      "x": 1029,
      "y": 613,
      "width": 2832,
      "height": 1964
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 242,
      "y": 2115,
      "width": 1886,
      "height": 884
    }
  }
}
âŒ File not accessible: /Users/programmer/Projects/musenest/public/uploads/originals Error: ENOENT: no such file or directory, access '/Users/programmer/Projects/musenest/public/uploads/originals'
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753743859848-661226751.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753743859862_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1625ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1637ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 336
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1648ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753743928953-24869866.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753743928968_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1711ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1721ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 337
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1731ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753744035300-393146252.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753744035309_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 4113ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 4126ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 338
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 4142ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753744145769-783543785.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753744145779_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1598ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1601ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 339
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1609ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753744208419-197064593.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753744208428_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 6939ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 6942ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 340
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 6952ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
/Users/programmer/Projects/musenest/routes/api/media-review-queue.js:1102
        let absoluteFilePath = filePath;
            ^

SyntaxError: Identifier 'absoluteFilePath' has already been declared
    at wrapSafe (node:internal/modules/cjs/loader:1662:18)
    at Module._compile (node:internal/modules/cjs/loader:1704:20)
    at Object..js (node:internal/modules/cjs/loader:1895:10)
    at Module.load (node:internal/modules/cjs/loader:1465:32)
    at Function._load (node:internal/modules/cjs/loader:1282:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:235:24)
    at Module.require (node:internal/modules/cjs/loader:1487:12)
    at require (node:internal/modules/helpers:135:16)
    at Object.<anonymous> (/Users/programmer/Projects/musenest/server.js:161:36)

Node.js v22.17.0
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753744363306-216797832.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753744363326_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2159ms
ğŸ“Š Status: 200, Content-Length: 942
ğŸ Complete response received in 2160ms, size: 942 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=57.414573431015015, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 57.414573431015015
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 51.67311608791352,
  nudity_contribution: 57.414573431015015,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 341
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2177ms
ğŸ“Š Result: success=true, status=flagged, nudity=57.414573431015015
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753744490288-823778068.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753744490314_HoldingTits.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1704ms
ğŸ“Š Status: 200, Content-Length: 1386
ğŸ Complete response received in 1716ms, size: 1386 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=81.35455846786499, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.35455846786499
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    reasoning: [],
    torso_angle: 1.0296496805327666
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 1.0296496805327666
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 56.94819092750549,
  nudity_contribution: 81.35455846786499,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.4%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 342
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1732ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.35455846786499
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753744624988-960122474.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753744625001_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1698ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1710ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 343
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1719ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753744733374-668086713.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753744733386_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1801ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1812ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 344
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1820ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 10,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 },
    MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753744733386_Labia.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753744767750_1753744733386_Labia.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 10px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
Received manual blur box: x=1029, y=613, w=2832, h=1964
Working image dimensions: 4000x3000
Coordinate validation: right=3861/4000, bottom=2577/3000
Using coordinates directly (normalized system): 1029,613 2832x1964
ğŸ” About to extract region: left=1029, top=613, width=2832, height=1964
ğŸ” Extract bounds check: right=3861/4000, bottom=2577/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1029, 613, 2832, 1964) from 4000x3000
ğŸ” Right edge: 3861 <= 4000? true
ğŸ” Bottom edge: 2577 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753744767971.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
Received manual blur box: x=242, y=2115, w=1886, h=884
Working image dimensions: 4000x3000
Coordinate validation: right=2128/4000, bottom=2999/3000
Using coordinates directly (normalized system): 242,2115 1886x884
ğŸ” About to extract region: left=242, top=2115, width=1886, height=884
ğŸ” Extract bounds check: right=2128/4000, bottom=2999/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(242, 2115, 1886, 884) from 4000x3000
ğŸ” Right edge: 2128 <= 4000? true
ğŸ” Bottom edge: 2999 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 10px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753744768202.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753744767750_1753744733386_Labia.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 1428797 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753745001371-375719219.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745001381_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1765ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1766ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 345
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1780ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753745135823-626875093.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745135833_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1607ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1618ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 346
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1634ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 20,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745135833_Labia.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753745174335_1753745135833_Labia.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 20px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
Received manual blur box: x=1029, y=613, w=2832, h=1964
Working image dimensions: 4000x3000
Coordinate validation: right=3861/4000, bottom=2577/3000
Using coordinates directly (normalized system): 1029,613 2832x1964
ğŸ” About to extract region: left=1029, top=613, width=2832, height=1964
ğŸ” Extract bounds check: right=3861/4000, bottom=2577/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1029, 613, 2832, 1964) from 4000x3000
ğŸ” Right edge: 3861 <= 4000? true
ğŸ” Bottom edge: 2577 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 20px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753745174830.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 1 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753745174335_1753745135833_Labia.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 1513284 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753745355834-593199294.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745355845_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1606ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1617ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 347
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1628ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753745553198-996526335.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745553207_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1543ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1553ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 348
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1560ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 65,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 },
    MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745553207_Labia.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753745580173_1753745553207_Labia.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 65px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
Received manual blur box: x=1029, y=613, w=2832, h=1964
Working image dimensions: 4000x3000
Coordinate validation: right=3861/4000, bottom=2577/3000
Using coordinates directly (normalized system): 1029,613 2832x1964
ğŸ” About to extract region: left=1029, top=613, width=2832, height=1964
ğŸ” Extract bounds check: right=3861/4000, bottom=2577/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1029, 613, 2832, 1964) from 4000x3000
ğŸ” Right edge: 3861 <= 4000? true
ğŸ” Bottom edge: 2577 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 65px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753745582677.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
Received manual blur box: x=242, y=2115, w=1886, h=884
Working image dimensions: 4000x3000
Coordinate validation: right=2128/4000, bottom=2999/3000
Using coordinates directly (normalized system): 242,2115 1886x884
ğŸ” About to extract region: left=242, top=2115, width=1886, height=884
ğŸ” Extract bounds check: right=2128/4000, bottom=2999/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(242, 2115, 1886, 884) from 4000x3000
ğŸ” Right edge: 2128 <= 4000? true
ğŸ” Bottom edge: 2999 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 65px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753745583452.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753745580173_1753745553207_Labia.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 1313199 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753745759251-4182269.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745759264_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1676ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 1687ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 16ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 349
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1708ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 34,
  shape: 'square',
  blurredParts: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FACE_FEMALE: { x: 1661, y: 1562, width: 1058, height: 1004 },
    MALE_GENITALIA_EXPOSED: { x: 2069, y: 2343, width: 536, height: 640 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745759264_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753745838997_1753745759264_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 34px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 1661, y: 1562, width: 1058, height: 1004 }
Received manual blur box: x=1661, y=1562, w=1058, h=1004
Working image dimensions: 4000x3000
Coordinate validation: right=2719/4000, bottom=2566/3000
Using coordinates directly (normalized system): 1661,1562 1058x1004
ğŸ” About to extract region: left=1661, top=1562, width=1058, height=1004
ğŸ” Extract bounds check: right=2719/4000, bottom=2566/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(1661, 1562, 1058, 1004) from 4000x3000
ğŸ” Right edge: 2719 <= 4000? true
ğŸ” Bottom edge: 2566 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 34px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753745839186.jpg
DEBUG: Using pure Gaussian blur for FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2069, y: 2343, width: 536, height: 640 }
Received manual blur box: x=2069, y=2343, w=536, h=640
Working image dimensions: 4000x3000
Coordinate validation: right=2605/4000, bottom=2983/3000
Using coordinates directly (normalized system): 2069,2343 536x640
ğŸ” About to extract region: left=2069, top=2343, width=536, height=640
ğŸ” Extract bounds check: right=2605/4000, bottom=2983/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(2069, 2343, 536, 640) from 4000x3000
ğŸ” Right edge: 2605 <= 4000? true
ğŸ” Bottom edge: 2983 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 34px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753745839467.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753745838997_1753745759264_BlowJob.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 4120557 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753745931875-837562103.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753745931903_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 5275ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 5275ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 350
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 5291ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753746858892-352452463.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753746858906_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1818ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 1829ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 351
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1843ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753746961565-607866537.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753746961588_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 3262ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 3265ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 352
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 3279ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753746978110-784147028.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753746978119_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2246ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 2256ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 2ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 353
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2263ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753747086744-892403569.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747086764_HoldingTits.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1698ms
ğŸ“Š Status: 200, Content-Length: 1386
ğŸ Complete response received in 1708ms, size: 1386 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=81.35455846786499, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.35455846786499
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    reasoning: [],
    torso_angle: 1.0296496805327666
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 1.0296496805327666
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 56.94819092750549,
  nudity_contribution: 81.35455846786499,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.4%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 354
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1721ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.35455846786499
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753747319510-997589687.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747319518_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1645ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1660ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 355
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1671ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 4,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747319518_Labia.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753747344506_1753747319518_Labia.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 4px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
Received manual blur box: x=1029, y=613, w=2832, h=1964
Working image dimensions: 4000x3000
Coordinate validation: right=3861/4000, bottom=2577/3000
Using coordinates directly (normalized system): 1029,613 2832x1964
ğŸ” About to extract region: left=1029, top=613, width=2832, height=1964
ğŸ” Extract bounds check: right=3861/4000, bottom=2577/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1029, 613, 2832, 1964) from 4000x3000
ğŸ” Right edge: 3861 <= 4000? true
ğŸ” Bottom edge: 2577 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 4px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753747344660.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Applying 1 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753747344506_1753747319518_Labia.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 1707018 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753747592311-656910384.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747592319_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 6697ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 6707ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 12ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 356
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 6728ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753747614095-230420998.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747614103_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 7313ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 7322ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 357
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 7331ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'square',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 },
    MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747614103_Labia.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753747638468_1753747614103_Labia.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 26px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
Received manual blur box: x=1029, y=613, w=2832, h=1964
Working image dimensions: 4000x3000
Coordinate validation: right=3861/4000, bottom=2577/3000
Using coordinates directly (normalized system): 1029,613 2832x1964
ğŸ” About to extract region: left=1029, top=613, width=2832, height=1964
ğŸ” Extract bounds check: right=3861/4000, bottom=2577/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1029, 613, 2832, 1964) from 4000x3000
ğŸ” Right edge: 3861 <= 4000? true
ğŸ” Bottom edge: 2577 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753747639184.jpg
DEBUG: Using pure Gaussian blur for FEMALE_GENITALIA_EXPOSED
Processing blur for MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
Received manual blur box: x=242, y=2115, w=1886, h=884
Working image dimensions: 4000x3000
Coordinate validation: right=2128/4000, bottom=2999/3000
Using coordinates directly (normalized system): 242,2115 1886x884
ğŸ” About to extract region: left=242, top=2115, width=1886, height=884
ğŸ” Extract bounds check: right=2128/4000, bottom=2999/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(242, 2115, 1886, 884) from 4000x3000
ğŸ” Right edge: 2128 <= 4000? true
ğŸ” Bottom edge: 2999 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753747639598.jpg
DEBUG: Using pure Gaussian blur for MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753747638468_1753747614103_Labia.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 1350434 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753747680646-860462821.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747680666_HoldingTits.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1884ms
ğŸ“Š Status: 200, Content-Length: 1386
ğŸ Complete response received in 1890ms, size: 1386 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=81.35455846786499, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.35455846786499
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    reasoning: [],
    torso_angle: 1.0296496805327666
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 1.0296496805327666
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 56.94819092750549,
  nudity_contribution: 81.35455846786499,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.4%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 358
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1900ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.35455846786499
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753747767372-644308359.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747767389_HoldingTits.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1833ms
ğŸ“Š Status: 200, Content-Length: 1386
ğŸ Complete response received in 1834ms, size: 1386 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=81.35455846786499, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.35455846786499
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    reasoning: [],
    torso_angle: 1.0296496805327666
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 1.0296496805327666
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 56.94819092750549,
  nudity_contribution: 81.35455846786499,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.4%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 8ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 359
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1846ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.35455846786499
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'FEMALE_BREAST_COVERED', 'manual_blur_1' ],
  overlayPositions: {
    FEMALE_BREAST_COVERED: { x: 1980, y: 1930, width: 785, height: 790 },
    manual_blur_1: { x: 2895, y: 1985, width: 1000, height: 750 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753747767389_HoldingTits.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753747804330_1753747767389_HoldingTits.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FEMALE_BREAST_COVERED', 'manual_blur_1' ]
Blur setting: 26px (1:1 ratio)
Processing blur for FEMALE_BREAST_COVERED: { x: 1980, y: 1930, width: 785, height: 790 }
Received manual blur box: x=1980, y=1930, w=785, h=790
Working image dimensions: 4000x3000
Coordinate validation: right=2765/4000, bottom=2720/3000
Using coordinates directly (normalized system): 1980,1930 785x790
ğŸ” About to extract region: left=1980, top=1930, width=785, height=790
ğŸ” Extract bounds check: right=2765/4000, bottom=2720/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_COVERED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(1980, 1930, 785, 790) from 4000x3000
ğŸ” Right edge: 2765 <= 4000? true
ğŸ” Bottom edge: 2720 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_COVERED...
âœ… Fresh extract successful for FEMALE_BREAST_COVERED
âœ… Successfully extracted FEMALE_BREAST_COVERED region
DEBUG: About to apply 26px blur to FEMALE_BREAST_COVERED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_BREAST_COVERED_1753747804438.jpg
DEBUG: Using pure Gaussian blur for FEMALE_BREAST_COVERED
Processing blur for manual_blur_1: { x: 2895, y: 1985, width: 1000, height: 750 }
Received manual blur box: x=2895, y=1985, w=1000, h=750
Working image dimensions: 4000x3000
Coordinate validation: right=3895/4000, bottom=2735/3000
Using coordinates directly (normalized system): 2895,1985 1000x750
ğŸ” About to extract region: left=2895, top=1985, width=1000, height=750
ğŸ” Extract bounds check: right=3895/4000, bottom=2735/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for manual_blur_1 in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(2895, 1985, 1000, 750) from 4000x3000
ğŸ” Right edge: 3895 <= 4000? true
ğŸ” Bottom edge: 2735 <= 3000? true
ğŸ”„ Attempting extract for manual_blur_1...
âœ… Fresh extract successful for manual_blur_1
âœ… Successfully extracted manual_blur_1 region
DEBUG: About to apply 26px blur to manual_blur_1 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_1_1753747804559.jpg
DEBUG: Using pure Gaussian blur for manual_blur_1
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753747804330_1753747767389_HoldingTits.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 1584275 bytes
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753748032195-16344098.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748032216_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1633ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1645ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 9ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 360
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1668ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2195, y: 1330, width: 343, height: 383 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748032216_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748064814_1753748032216_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 26px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2195, y: 1330, width: 343, height: 383 }
Received manual blur box: x=2195, y=1330, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2538/4000, bottom=1713/3000
Using coordinates directly (normalized system): 2195,1330 343x383
ğŸ” About to extract region: left=2195, top=1330, width=343, height=383
ğŸ” Extract bounds check: right=2538/4000, bottom=1713/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2195, 1330, 343, 383) from 4000x3000
ğŸ” Right edge: 2538 <= 4000? true
ğŸ” Bottom edge: 1713 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 26px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753748064889.jpg
DEBUG: Applying oval shape to ANUS_EXPOSED blur
DEBUG: Applied oval mask to ANUS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753748064973.jpg
DEBUG: Applying oval shape to FEMALE_GENITALIA_EXPOSED blur
DEBUG: Applied oval mask to FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748064814_1753748032216_BendoverAss.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2703687 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753748171819-955713998.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748171834_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1742ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1753ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 361
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1771ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748171834_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748187158_1753748171834_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 26px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 26px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753748187226.jpg
DEBUG: Applying oval shape to ANUS_EXPOSED blur
DEBUG: Applied oval mask to ANUS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753748187304.jpg
DEBUG: Applying oval shape to FEMALE_GENITALIA_EXPOSED blur
DEBUG: Applied oval mask to FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748187158_1753748171834_BendoverAss.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2704905 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753748308045-255077449.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748308063_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1663ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1673ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 8ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 362
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1692ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748308063_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748322062_1753748308063_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 26px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 26px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753748322132.jpg
DEBUG: Applying oval shape to ANUS_EXPOSED blur
DEBUG: Applied oval-only blur to ANUS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753748322217.jpg
DEBUG: Applying oval shape to FEMALE_GENITALIA_EXPOSED blur
DEBUG: Applied oval-only blur to FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748322062_1753748308063_BendoverAss.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2702014 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753748430934-782442933.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748430956_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1821ms
ğŸ“Š Status: 200, Content-Length: 943
ğŸ Complete response received in 1834ms, size: 943 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=55.722469091415405, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 55.722469091415405
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.150222182273865,
  nudity_contribution: 55.722469091415405,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 363
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1852ms
ğŸ“Š Result: success=true, status=flagged, nudity=55.722469091415405
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'FACE_FEMALE' ],
  overlayPositions: { FACE_FEMALE: { x: 1980, y: 2325, width: 695, height: 675 } }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748430956_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748462763_1753748430956_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FACE_FEMALE' ]
Blur setting: 26px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 1980, y: 2325, width: 695, height: 675 }
Received manual blur box: x=1980, y=2325, w=695, h=675
Working image dimensions: 4000x3000
Coordinate validation: right=2675/4000, bottom=3000/3000
Using coordinates directly (normalized system): 1980,2325 695x675
ğŸ” About to extract region: left=1980, top=2325, width=695, height=675
ğŸ” Extract bounds check: right=2675/4000, bottom=3000/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(1980, 2325, 695, 675) from 4000x3000
ğŸ” Right edge: 2675 <= 4000? true
ğŸ” Bottom edge: 3000 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 26px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753748462900.jpg
DEBUG: Applying oval shape to FACE_FEMALE blur
DEBUG: Applied oval blur blending to FACE_FEMALE
Applying 1 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748462763_1753748430956_BlowJob.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 4265841 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753748498062-923529557.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748498075_BendoverAss.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1622ms
ğŸ“Š Status: 200, Content-Length: 1223
ğŸ Complete response received in 1633ms, size: 1223 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=71.90195918083191, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 71.90195918083191
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 50.331371426582336,
  nudity_contribution: 71.90195918083191,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_71.9%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 364
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1641ms
ğŸ“Š Result: success=true, status=flagged, nudity=71.90195918083191
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED', 'FACE_FEMALE' ],
  overlayPositions: {
    ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 },
    FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748498075_BendoverAss.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748519117_1753748498075_BendoverAss.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ANUS_EXPOSED', 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 26px (1:1 ratio)
Processing blur for ANUS_EXPOSED: { x: 2264, y: 1333, width: 343, height: 383 }
Received manual blur box: x=2264, y=1333, w=343, h=383
Working image dimensions: 4000x3000
Coordinate validation: right=2607/4000, bottom=1716/3000
Using coordinates directly (normalized system): 2264,1333 343x383
ğŸ” About to extract region: left=2264, top=1333, width=343, height=383
ğŸ” Extract bounds check: right=2607/4000, bottom=1716/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ANUS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2264, 1333, 343, 383) from 4000x3000
ğŸ” Right edge: 2607 <= 4000? true
ğŸ” Bottom edge: 1716 <= 3000? true
ğŸ”„ Attempting extract for ANUS_EXPOSED...
âœ… Fresh extract successful for ANUS_EXPOSED
âœ… Successfully extracted ANUS_EXPOSED region
DEBUG: About to apply 26px blur to ANUS_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_ANUS_EXPOSED_1753748519185.jpg
DEBUG: Applying oval shape to ANUS_EXPOSED blur
DEBUG: Applied oval blur blending to ANUS_EXPOSED
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 2538, y: 1392, width: 456, height: 372 }
Received manual blur box: x=2538, y=1392, w=456, h=372
Working image dimensions: 4000x3000
Coordinate validation: right=2994/4000, bottom=1764/3000
Using coordinates directly (normalized system): 2538,1392 456x372
ğŸ” About to extract region: left=2538, top=1392, width=456, height=372
ğŸ” Extract bounds check: right=2994/4000, bottom=1764/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2538, 1392, 456, 372) from 4000x3000
ğŸ” Right edge: 2994 <= 4000? true
ğŸ” Bottom edge: 1764 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753748519286.jpg
DEBUG: Applying oval shape to FEMALE_GENITALIA_EXPOSED blur
DEBUG: Applied oval blur blending to FEMALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748519117_1753748498075_BendoverAss.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2707181 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753748724335-624668257.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748724355_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1695ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 1705ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 365
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1724ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 66,
  shape: 'oval',
  blurredParts: [
    'ANUS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED'
  ],
  overlayPositions: {
    FACE_FEMALE: { x: 820, y: 1035, width: 1058, height: 1004 },
    MALE_GENITALIA_EXPOSED: { x: 2645, y: 1080, width: 536, height: 640 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748724355_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748752249_1753748724355_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 66px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 820, y: 1035, width: 1058, height: 1004 }
Received manual blur box: x=820, y=1035, w=1058, h=1004
Working image dimensions: 4000x3000
Coordinate validation: right=1878/4000, bottom=2039/3000
Using coordinates directly (normalized system): 820,1035 1058x1004
ğŸ” About to extract region: left=820, top=1035, width=1058, height=1004
ğŸ” Extract bounds check: right=1878/4000, bottom=2039/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(820, 1035, 1058, 1004) from 4000x3000
ğŸ” Right edge: 1878 <= 4000? true
ğŸ” Bottom edge: 2039 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 66px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753748752635.jpg
DEBUG: Applying oval shape to FACE_FEMALE blur
DEBUG: Blur settings received: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ANUS_EXPOSED",
    "FEMALE_GENITALIA_EXPOSED",
    "FACE_FEMALE",
    "MALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 820,
      "y": 1035,
      "width": 1058,
      "height": 1004
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 2645,
      "y": 1080,
      "width": 536,
      "height": 640
    }
  }
}
DEBUG: Starting oval processing for FACE_FEMALE (1058x1004)
DEBUG: Created oval mask for FACE_FEMALE, mask size: 4248928
DEBUG: Created buffers for FACE_FEMALE, original: 3186696, blurred: 3186696
DEBUG: Successfully applied oval blur blending to FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2645, y: 1080, width: 536, height: 640 }
Received manual blur box: x=2645, y=1080, w=536, h=640
Working image dimensions: 4000x3000
Coordinate validation: right=3181/4000, bottom=1720/3000
Using coordinates directly (normalized system): 2645,1080 536x640
ğŸ” About to extract region: left=2645, top=1080, width=536, height=640
ğŸ” Extract bounds check: right=3181/4000, bottom=1720/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(2645, 1080, 536, 640) from 4000x3000
ğŸ” Right edge: 3181 <= 4000? true
ğŸ” Bottom edge: 1720 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 66px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753748753346.jpg
DEBUG: Applying oval shape to MALE_GENITALIA_EXPOSED blur
DEBUG: Blur settings received: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ANUS_EXPOSED",
    "FEMALE_GENITALIA_EXPOSED",
    "FACE_FEMALE",
    "MALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 820,
      "y": 1035,
      "width": 1058,
      "height": 1004
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 2645,
      "y": 1080,
      "width": 536,
      "height": 640
    }
  }
}
DEBUG: Starting oval processing for MALE_GENITALIA_EXPOSED (536x640)
DEBUG: Created oval mask for MALE_GENITALIA_EXPOSED, mask size: 1372160
DEBUG: Created buffers for MALE_GENITALIA_EXPOSED, original: 1029120, blurred: 1029120
DEBUG: Successfully applied oval blur blending to MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748752249_1753748724355_BlowJob.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 4080235 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753748897336-963328788.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748897360_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1714ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 1752ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 366
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1770ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 66,
  shape: 'oval',
  blurredParts: [
    'ANUS_EXPOSED',
    'FEMALE_GENITALIA_EXPOSED',
    'FACE_FEMALE',
    'MALE_GENITALIA_EXPOSED'
  ],
  overlayPositions: {
    FACE_FEMALE: { x: 360, y: 650, width: 1058, height: 1004 },
    MALE_GENITALIA_EXPOSED: { x: 2995, y: 730, width: 536, height: 640 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748897360_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748922293_1753748897360_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 66px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 360, y: 650, width: 1058, height: 1004 }
Received manual blur box: x=360, y=650, w=1058, h=1004
Working image dimensions: 4000x3000
Coordinate validation: right=1418/4000, bottom=1654/3000
Using coordinates directly (normalized system): 360,650 1058x1004
ğŸ” About to extract region: left=360, top=650, width=1058, height=1004
ğŸ” Extract bounds check: right=1418/4000, bottom=1654/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(360, 650, 1058, 1004) from 4000x3000
ğŸ” Right edge: 1418 <= 4000? true
ğŸ” Bottom edge: 1654 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 66px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753748922674.jpg
DEBUG: Applying oval shape to FACE_FEMALE blur
DEBUG: Blur settings received: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ANUS_EXPOSED",
    "FEMALE_GENITALIA_EXPOSED",
    "FACE_FEMALE",
    "MALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 360,
      "y": 650,
      "width": 1058,
      "height": 1004
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 2995,
      "y": 730,
      "width": 536,
      "height": 640
    }
  }
}
DEBUG: Starting SIMPLIFIED oval processing for FACE_FEMALE (1058x1004)
DEBUG: Successfully applied SIMPLIFIED oval processing to FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 2995, y: 730, width: 536, height: 640 }
Received manual blur box: x=2995, y=730, w=536, h=640
Working image dimensions: 4000x3000
Coordinate validation: right=3531/4000, bottom=1370/3000
Using coordinates directly (normalized system): 2995,730 536x640
ğŸ” About to extract region: left=2995, top=730, width=536, height=640
ğŸ” Extract bounds check: right=3531/4000, bottom=1370/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(2995, 730, 536, 640) from 4000x3000
ğŸ” Right edge: 3531 <= 4000? true
ğŸ” Bottom edge: 1370 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 66px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753748923007.jpg
DEBUG: Applying oval shape to MALE_GENITALIA_EXPOSED blur
DEBUG: Blur settings received: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ANUS_EXPOSED",
    "FEMALE_GENITALIA_EXPOSED",
    "FACE_FEMALE",
    "MALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 360,
      "y": 650,
      "width": 1058,
      "height": 1004
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 2995,
      "y": 730,
      "width": 536,
      "height": 640
    }
  }
}
DEBUG: Starting SIMPLIFIED oval processing for MALE_GENITALIA_EXPOSED (536x640)
DEBUG: Successfully applied SIMPLIFIED oval processing to MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753748922293_1753748897360_BlowJob.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 3817159 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753748995917-12737034.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753748995942_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1868ms
ğŸ“Š Status: 200, Content-Length: 772
ğŸ Complete response received in 1871ms, size: 772 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=0, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 0
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 0,
  nudity_contribution: 0,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'minimal'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
Approved content processed: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/1753748995942_BlowJob.jpg
âœ… Upload processing completed in 1884ms
ğŸ“Š Result: success=true, status=approved, nudity=0
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753749009830-142675885.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749009844_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1686ms
ğŸ“Š Status: 200, Content-Length: 1081
ğŸ Complete response received in 1700ms, size: 1081 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=78.8359522819519, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 78.8359522819519
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.95235705375671,
  nudity_contribution: 78.8359522819519,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 368
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1708ms
ğŸ“Š Result: success=true, status=flagged, nudity=78.8359522819519
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FACE_FEMALE: { x: 95, y: 785, width: 1058, height: 1004 },
    MALE_GENITALIA_EXPOSED: { x: 3355, y: 845, width: 536, height: 640 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749009844_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753749038250_1753749009844_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FACE_FEMALE', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 26px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 95, y: 785, width: 1058, height: 1004 }
Received manual blur box: x=95, y=785, w=1058, h=1004
Working image dimensions: 4000x3000
Coordinate validation: right=1153/4000, bottom=1789/3000
Using coordinates directly (normalized system): 95,785 1058x1004
ğŸ” About to extract region: left=95, top=785, width=1058, height=1004
ğŸ” Extract bounds check: right=1153/4000, bottom=1789/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(95, 785, 1058, 1004) from 4000x3000
ğŸ” Right edge: 1153 <= 4000? true
ğŸ” Bottom edge: 1789 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 26px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753749038381.jpg
DEBUG: ==========================================
DEBUG: Processing FACE_FEMALE with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 26,
  "shape": "oval",
  "blurredParts": [
    "FACE_FEMALE",
    "MALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 95,
      "y": 785,
      "width": 1058,
      "height": 1004
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 3355,
      "y": 845,
      "width": 536,
      "height": 640
    }
  }
}
DEBUG: ==========================================
DEBUG: Starting SIMPLIFIED oval processing for FACE_FEMALE (1058x1004)
DEBUG: Successfully applied SIMPLIFIED oval processing to FACE_FEMALE
Processing blur for MALE_GENITALIA_EXPOSED: { x: 3355, y: 845, width: 536, height: 640 }
Received manual blur box: x=3355, y=845, w=536, h=640
Working image dimensions: 4000x3000
Coordinate validation: right=3891/4000, bottom=1485/3000
Using coordinates directly (normalized system): 3355,845 536x640
ğŸ” About to extract region: left=3355, top=845, width=536, height=640
ğŸ” Extract bounds check: right=3891/4000, bottom=1485/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(3355, 845, 536, 640) from 4000x3000
ğŸ” Right edge: 3891 <= 4000? true
ğŸ” Bottom edge: 1485 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753749038540.jpg
DEBUG: ==========================================
DEBUG: Processing MALE_GENITALIA_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 26,
  "shape": "oval",
  "blurredParts": [
    "FACE_FEMALE",
    "MALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 95,
      "y": 785,
      "width": 1058,
      "height": 1004
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 3355,
      "y": 845,
      "width": 536,
      "height": 640
    }
  }
}
DEBUG: ==========================================
DEBUG: Starting SIMPLIFIED oval processing for MALE_GENITALIA_EXPOSED (536x640)
DEBUG: Successfully applied SIMPLIFIED oval processing to MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753749038250_1753749009844_BlowJob.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 3830553 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753749241054-426698410.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749241075_BlowJob.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1831ms
ğŸ“Š Status: 200, Content-Length: 942
ğŸ Complete response received in 1832ms, size: 942 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=59.030115604400635, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 59.030115604400635
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 53.12710404396057,
  nudity_contribution: 59.030115604400635,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 369
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1848ms
ğŸ“Š Result: success=true, status=flagged, nudity=59.030115604400635
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 74,
  shape: 'oval',
  blurredParts: [ 'FACE_FEMALE', 'manual_blur_1' ],
  overlayPositions: {
    FACE_FEMALE: { x: 2600, y: 315, width: 1100, height: 887 },
    manual_blur_1: { x: 350, y: 375, width: 1000, height: 750 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749241075_BlowJob.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753749285611_1753749241075_BlowJob.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FACE_FEMALE', 'manual_blur_1' ]
Blur setting: 74px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 2600, y: 315, width: 1100, height: 887 }
Received manual blur box: x=2600, y=315, w=1100, h=887
Working image dimensions: 4000x3000
Coordinate validation: right=3700/4000, bottom=1202/3000
Using coordinates directly (normalized system): 2600,315 1100x887
ğŸ” About to extract region: left=2600, top=315, width=1100, height=887
ğŸ” Extract bounds check: right=3700/4000, bottom=1202/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(2600, 315, 1100, 887) from 4000x3000
ğŸ” Right edge: 3700 <= 4000? true
ğŸ” Bottom edge: 1202 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 74px blur to FACE_FEMALE region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FACE_FEMALE_1753749286001.jpg
DEBUG: ==========================================
DEBUG: Processing FACE_FEMALE with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 74,
  "shape": "oval",
  "blurredParts": [
    "FACE_FEMALE",
    "manual_blur_1"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 2600,
      "y": 315,
      "width": 1100,
      "height": 887
    },
    "manual_blur_1": {
      "x": 350,
      "y": 375,
      "width": 1000,
      "height": 750
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FACE_FEMALE - creating custom SVG blur
DEBUG: Created SVG oval blur for FACE_FEMALE
Processing blur for manual_blur_1: { x: 350, y: 375, width: 1000, height: 750 }
Received manual blur box: x=350, y=375, w=1000, h=750
Working image dimensions: 4000x3000
Coordinate validation: right=1350/4000, bottom=1125/3000
Using coordinates directly (normalized system): 350,375 1000x750
ğŸ” About to extract region: left=350, top=375, width=1000, height=750
ğŸ” Extract bounds check: right=1350/4000, bottom=1125/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for manual_blur_1 in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(350, 375, 1000, 750) from 4000x3000
ğŸ” Right edge: 1350 <= 4000? true
ğŸ” Bottom edge: 1125 <= 3000? true
ğŸ”„ Attempting extract for manual_blur_1...
âœ… Fresh extract successful for manual_blur_1
âœ… Successfully extracted manual_blur_1 region
DEBUG: About to apply 74px blur to manual_blur_1 region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_manual_blur_1_1753749286582.jpg
DEBUG: ==========================================
DEBUG: Processing manual_blur_1 with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 74,
  "shape": "oval",
  "blurredParts": [
    "FACE_FEMALE",
    "manual_blur_1"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 2600,
      "y": 315,
      "width": 1100,
      "height": 887
    },
    "manual_blur_1": {
      "x": 350,
      "y": 375,
      "width": 1000,
      "height": 750
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for manual_blur_1 - creating custom SVG blur
DEBUG: Created SVG oval blur for manual_blur_1
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753749285611_1753749241075_BlowJob.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 3877060 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753749382854-375400442.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749382871_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1687ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1698ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 370
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1710ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 74,
  shape: 'oval',
  blurredParts: [ 'FACE_FEMALE', 'manual_blur_1', 'FEMALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749382871_Labia.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753749681282_1753749382871_Labia.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED' ]
Blur setting: 74px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
Received manual blur box: x=1029, y=613, w=2832, h=1964
Working image dimensions: 4000x3000
Coordinate validation: right=3861/4000, bottom=2577/3000
Using coordinates directly (normalized system): 1029,613 2832x1964
ğŸ” About to extract region: left=1029, top=613, width=2832, height=1964
ğŸ” Extract bounds check: right=3861/4000, bottom=2577/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1029, 613, 2832, 1964) from 4000x3000
ğŸ” Right edge: 3861 <= 4000? true
ğŸ” Bottom edge: 2577 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 74px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753749684192.jpg
DEBUG: ==========================================
DEBUG: Processing FEMALE_GENITALIA_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 74,
  "shape": "oval",
  "blurredParts": [
    "FACE_FEMALE",
    "manual_blur_1",
    "FEMALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FEMALE_GENITALIA_EXPOSED": {
      "x": 1029,
      "y": 613,
      "width": 2832,
      "height": 1964
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_GENITALIA_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_GENITALIA_EXPOSED
Applying 1 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753749681282_1753749382871_Labia.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 1655530 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753749757007-763448931.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749757020_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1571ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1583ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 6ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 371
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1592ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753749768772-99432913.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749768791_Labia.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1966ms
ğŸ“Š Status: 200, Content-Length: 1103
ğŸ Complete response received in 1978ms, size: 1103 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=70.4887330532074, pose=no_pose_detected, suggestive=0
âœ… Transformation complete, final nudity score: 70.4887330532074
ğŸ­ Pose analysis: no_pose_detected (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 49.34211313724518,
  nudity_contribution: 70.4887330532074,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_70.5%' ],
  risk_level: 'low'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 372
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1987ms
ğŸ“Š Result: success=true, status=flagged, nudity=70.4887330532074
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'FEMALE_GENITALIA_EXPOSED', 'MALE_GENITALIA_EXPOSED' ],
  overlayPositions: {
    FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 },
    MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749768791_Labia.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753749778476_1753749768791_Labia.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_GENITALIA_EXPOSED', 'MALE_GENITALIA_EXPOSED' ]
Blur setting: 26px (1:1 ratio)
Processing blur for FEMALE_GENITALIA_EXPOSED: { x: 1029, y: 613, width: 2832, height: 1964 }
Received manual blur box: x=1029, y=613, w=2832, h=1964
Working image dimensions: 4000x3000
Coordinate validation: right=3861/4000, bottom=2577/3000
Using coordinates directly (normalized system): 1029,613 2832x1964
ğŸ” About to extract region: left=1029, top=613, width=2832, height=1964
ğŸ” Extract bounds check: right=3861/4000, bottom=2577/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1029, 613, 2832, 1964) from 4000x3000
ğŸ” Right edge: 3861 <= 4000? true
ğŸ” Bottom edge: 2577 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for FEMALE_GENITALIA_EXPOSED
âœ… Successfully extracted FEMALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to FEMALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_FEMALE_GENITALIA_EXPOSED_1753749779129.jpg
DEBUG: ==========================================
DEBUG: Processing FEMALE_GENITALIA_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 26,
  "shape": "oval",
  "blurredParts": [
    "FEMALE_GENITALIA_EXPOSED",
    "MALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FEMALE_GENITALIA_EXPOSED": {
      "x": 1029,
      "y": 613,
      "width": 2832,
      "height": 1964
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 242,
      "y": 2115,
      "width": 1886,
      "height": 884
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_GENITALIA_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_GENITALIA_EXPOSED
Processing blur for MALE_GENITALIA_EXPOSED: { x: 242, y: 2115, width: 1886, height: 884 }
Received manual blur box: x=242, y=2115, w=1886, h=884
Working image dimensions: 4000x3000
Coordinate validation: right=2128/4000, bottom=2999/3000
Using coordinates directly (normalized system): 242,2115 1886x884
ğŸ” About to extract region: left=242, top=2115, width=1886, height=884
ğŸ” Extract bounds check: right=2128/4000, bottom=2999/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for MALE_GENITALIA_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(242, 2115, 1886, 884) from 4000x3000
ğŸ” Right edge: 2128 <= 4000? true
ğŸ” Bottom edge: 2999 <= 3000? true
ğŸ”„ Attempting extract for MALE_GENITALIA_EXPOSED...
âœ… Fresh extract successful for MALE_GENITALIA_EXPOSED
âœ… Successfully extracted MALE_GENITALIA_EXPOSED region
DEBUG: About to apply 26px blur to MALE_GENITALIA_EXPOSED region
DEBUG: Saved blurred region to /Users/programmer/Projects/musenest/debug_blur_MALE_GENITALIA_EXPOSED_1753749780487.jpg
DEBUG: ==========================================
DEBUG: Processing MALE_GENITALIA_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 26,
  "shape": "oval",
  "blurredParts": [
    "FEMALE_GENITALIA_EXPOSED",
    "MALE_GENITALIA_EXPOSED"
  ],
  "overlayPositions": {
    "FEMALE_GENITALIA_EXPOSED": {
      "x": 1029,
      "y": 613,
      "width": 2832,
      "height": 1964
    },
    "MALE_GENITALIA_EXPOSED": {
      "x": 242,
      "y": 2115,
      "width": 1886,
      "height": 884
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for MALE_GENITALIA_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for MALE_GENITALIA_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753749778476_1753749768791_Labia.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 1509806 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753749789238-844233752.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749789255_HoldingTits.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1753ms
ğŸ“Š Status: 200, Content-Length: 1386
ğŸ Complete response received in 1758ms, size: 1386 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=81.35455846786499, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.35455846786499
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    reasoning: [],
    torso_angle: 1.0296496805327666
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 1.0296496805327666
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 56.94819092750549,
  nudity_contribution: 81.35455846786499,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.4%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 2ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 373
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1765ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.35455846786499
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753749988810-565355187.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749988836_HoldingTits.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1770ms
ğŸ“Š Status: 200, Content-Length: 1386
ğŸ Complete response received in 1782ms, size: 1386 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=81.35455846786499, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.35455846786499
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    reasoning: [],
    torso_angle: 1.0296496805327666
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.8920967781858733,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 1.0296496805327666
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 56.94819092750549,
  nudity_contribution: 81.35455846786499,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.4%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 374
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1800ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.35455846786499
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 26,
  shape: 'oval',
  blurredParts: [ 'FACE_FEMALE', 'FEMALE_BREAST_COVERED' ],
  overlayPositions: {
    FACE_FEMALE: { x: 2341, y: 690, width: 808, height: 715 },
    FEMALE_BREAST_COVERED: { x: 1979, y: 1931, width: 787, height: 612 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753749988836_HoldingTits.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753750003977_1753749988836_HoldingTits.jpg
Raw image dimensions: 4000 x 3000 orientation: 1
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 1
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 1
Applying selective blur to regions: [ 'FACE_FEMALE', 'FEMALE_BREAST_COVERED' ]
Blur setting: 26px (1:1 ratio)
Processing blur for FACE_FEMALE: { x: 2341, y: 690, width: 808, height: 715 }
Received manual blur box: x=2341, y=690, w=808, h=715
Working image dimensions: 4000x3000
Coordinate validation: right=3149/4000, bottom=1405/3000
Using coordinates directly (normalized system): 2341,690 808x715
ğŸ” About to extract region: left=2341, top=690, width=808, height=715
ğŸ” Extract bounds check: right=3149/4000, bottom=1405/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(2341, 690, 808, 715) from 4000x3000
ğŸ” Right edge: 3149 <= 4000? true
ğŸ” Bottom edge: 1405 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 26px blur to FACE_FEMALE region
DEBUG: ==========================================
DEBUG: Processing FACE_FEMALE with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 26,
  "shape": "oval",
  "blurredParts": [
    "FACE_FEMALE",
    "FEMALE_BREAST_COVERED"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 2341,
      "y": 690,
      "width": 808,
      "height": 715
    },
    "FEMALE_BREAST_COVERED": {
      "x": 1979,
      "y": 1931,
      "width": 787,
      "height": 612
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FACE_FEMALE - creating custom SVG blur
DEBUG: Created SVG oval blur for FACE_FEMALE
Processing blur for FEMALE_BREAST_COVERED: { x: 1979, y: 1931, width: 787, height: 612 }
Received manual blur box: x=1979, y=1931, w=787, h=612
Working image dimensions: 4000x3000
Coordinate validation: right=2766/4000, bottom=2543/3000
Using coordinates directly (normalized system): 1979,1931 787x612
ğŸ” About to extract region: left=1979, top=1931, width=787, height=612
ğŸ” Extract bounds check: right=2766/4000, bottom=2543/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_COVERED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 1
ğŸ” FINAL BOUNDS CHECK: extract(1979, 1931, 787, 612) from 4000x3000
ğŸ” Right edge: 2766 <= 4000? true
ğŸ” Bottom edge: 2543 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_COVERED...
âœ… Fresh extract successful for FEMALE_BREAST_COVERED
âœ… Successfully extracted FEMALE_BREAST_COVERED region
DEBUG: About to apply 26px blur to FEMALE_BREAST_COVERED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_COVERED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 26,
  "shape": "oval",
  "blurredParts": [
    "FACE_FEMALE",
    "FEMALE_BREAST_COVERED"
  ],
  "overlayPositions": {
    "FACE_FEMALE": {
      "x": 2341,
      "y": 690,
      "width": 808,
      "height": 715
    },
    "FEMALE_BREAST_COVERED": {
      "x": 1979,
      "y": 1931,
      "width": 787,
      "height": 612
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_BREAST_COVERED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_BREAST_COVERED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753750003977_1753749988836_HoldingTits.jpg
Setting EXIF orientation metadata to: 1
Blurred file created successfully - Size: 1611189 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753750041676-112472031.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753750041694_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 5260ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 5271ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.8350772857666, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.79609775543213
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    reasoning: [],
    torso_angle: 1.3421758314396786
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    shoulder_width: 0.24153465032577515,
    torso_angle: 1.3421758314396786
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.684554100036614,
  nudity_contribution: 83.8350772857666,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.8%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 375
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 5281ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.79609775543213
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 42,
  shape: 'oval',
  blurredParts: [
    'FEMALE_BREAST_COVERED',
    'FEMALE_BREAST_EXPOSED',
    'FEMALE_GENITALIA_COVERED'
  ],
  overlayPositions: {
    FEMALE_BREAST_EXPOSED: { x: 1910, y: 1660, width: 145, height: 145 },
    FEMALE_GENITALIA_COVERED: { x: 1885, y: 1140, width: 120, height: 135 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753750041694_BreastStall.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753750102271_1753750041694_BreastStall.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'FEMALE_BREAST_EXPOSED', 'FEMALE_GENITALIA_COVERED' ]
Blur setting: 42px (1:1 ratio)
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1910, y: 1660, width: 145, height: 145 }
Received manual blur box: x=1910, y=1660, w=145, h=145
Working image dimensions: 4000x3000
Coordinate validation: right=2055/4000, bottom=1805/3000
Using coordinates directly (normalized system): 1910,1660 145x145
ğŸ” About to extract region: left=1910, top=1660, width=145, height=145
ğŸ” Extract bounds check: right=2055/4000, bottom=1805/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1910, 1660, 145, 145) from 4000x3000
ğŸ” Right edge: 2055 <= 4000? true
ğŸ” Bottom edge: 1805 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_EXPOSED...
âœ… Fresh extract successful for FEMALE_BREAST_EXPOSED
âœ… Successfully extracted FEMALE_BREAST_EXPOSED region
DEBUG: About to apply 42px blur to FEMALE_BREAST_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 42,
  "shape": "oval",
  "blurredParts": [
    "FEMALE_BREAST_COVERED",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "FEMALE_BREAST_EXPOSED": {
      "x": 1910,
      "y": 1660,
      "width": 145,
      "height": 145
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 1885,
      "y": 1140,
      "width": 120,
      "height": 135
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_BREAST_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_BREAST_EXPOSED
Processing blur for FEMALE_GENITALIA_COVERED: { x: 1885, y: 1140, width: 120, height: 135 }
Received manual blur box: x=1885, y=1140, w=120, h=135
Working image dimensions: 4000x3000
Coordinate validation: right=2005/4000, bottom=1275/3000
Using coordinates directly (normalized system): 1885,1140 120x135
ğŸ” About to extract region: left=1885, top=1140, width=120, height=135
ğŸ” Extract bounds check: right=2005/4000, bottom=1275/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_COVERED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1885, 1140, 120, 135) from 4000x3000
ğŸ” Right edge: 2005 <= 4000? true
ğŸ” Bottom edge: 1275 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_COVERED...
âœ… Fresh extract successful for FEMALE_GENITALIA_COVERED
âœ… Successfully extracted FEMALE_GENITALIA_COVERED region
DEBUG: About to apply 42px blur to FEMALE_GENITALIA_COVERED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_GENITALIA_COVERED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 42,
  "shape": "oval",
  "blurredParts": [
    "FEMALE_BREAST_COVERED",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "FEMALE_BREAST_EXPOSED": {
      "x": 1910,
      "y": 1660,
      "width": 145,
      "height": 145
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 1885,
      "y": 1140,
      "width": 120,
      "height": 135
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_GENITALIA_COVERED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_GENITALIA_COVERED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753750102271_1753750041694_BreastStall.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2554312 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753750134921-709856179.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753750134932_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 4293ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 4303ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.8350772857666, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.79609775543213
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    reasoning: [],
    torso_angle: 1.3421758314396786
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    shoulder_width: 0.24153465032577515,
    torso_angle: 1.3421758314396786
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.684554100036614,
  nudity_contribution: 83.8350772857666,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.8%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 376
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 4310ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.79609775543213
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 74,
  shape: 'oval',
  blurredParts: [
    'FEMALE_BREAST_COVERED',
    'ARMPITS_EXPOSED',
    'FEMALE_BREAST_EXPOSED'
  ],
  overlayPositions: {
    ARMPITS_EXPOSED: { x: 1865, y: 1090, width: 180, height: 195 },
    FEMALE_BREAST_EXPOSED: { x: 1925, y: 1650, width: 175, height: 160 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753750134932_BreastStall.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753750205100_1753750134932_BreastStall.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ]
Blur setting: 74px (1:1 ratio)
Processing blur for ARMPITS_EXPOSED: { x: 1865, y: 1090, width: 180, height: 195 }
Received manual blur box: x=1865, y=1090, w=180, h=195
Working image dimensions: 4000x3000
Coordinate validation: right=2045/4000, bottom=1285/3000
Using coordinates directly (normalized system): 1865,1090 180x195
ğŸ” About to extract region: left=1865, top=1090, width=180, height=195
ğŸ” Extract bounds check: right=2045/4000, bottom=1285/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ARMPITS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1865, 1090, 180, 195) from 4000x3000
ğŸ” Right edge: 2045 <= 4000? true
ğŸ” Bottom edge: 1285 <= 3000? true
ğŸ”„ Attempting extract for ARMPITS_EXPOSED...
âœ… Fresh extract successful for ARMPITS_EXPOSED
âœ… Successfully extracted ARMPITS_EXPOSED region
DEBUG: About to apply 74px blur to ARMPITS_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing ARMPITS_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 74,
  "shape": "oval",
  "blurredParts": [
    "FEMALE_BREAST_COVERED",
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1865,
      "y": 1090,
      "width": 180,
      "height": 195
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1925,
      "y": 1650,
      "width": 175,
      "height": 160
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for ARMPITS_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for ARMPITS_EXPOSED
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1925, y: 1650, width: 175, height: 160 }
Received manual blur box: x=1925, y=1650, w=175, h=160
Working image dimensions: 4000x3000
Coordinate validation: right=2100/4000, bottom=1810/3000
Using coordinates directly (normalized system): 1925,1650 175x160
ğŸ” About to extract region: left=1925, top=1650, width=175, height=160
ğŸ” Extract bounds check: right=2100/4000, bottom=1810/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1925, 1650, 175, 160) from 4000x3000
ğŸ” Right edge: 2100 <= 4000? true
ğŸ” Bottom edge: 1810 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_EXPOSED...
âœ… Fresh extract successful for FEMALE_BREAST_EXPOSED
âœ… Successfully extracted FEMALE_BREAST_EXPOSED region
DEBUG: About to apply 74px blur to FEMALE_BREAST_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 74,
  "shape": "oval",
  "blurredParts": [
    "FEMALE_BREAST_COVERED",
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1865,
      "y": 1090,
      "width": 180,
      "height": 195
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1925,
      "y": 1650,
      "width": 175,
      "height": 160
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_BREAST_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_BREAST_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753750205100_1753750134932_BreastStall.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2554238 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastBathroom.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753750442110-898596324.jpg',
  originalName: 'BreastBathroom.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753750442117_BreastBathroom.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1166ms
ğŸ“Š Status: 200, Content-Length: 1651
ğŸ Complete response received in 1177ms, size: 1651 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=87.26015090942383, pose=moderately_suggestive, suggestive=0.3
âœ… Transformation complete, final nudity score: 87.26015090942383
ğŸ­ Pose analysis: moderately_suggestive (0.3)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_right',
    hip_bend_angle: 3.4934520187016846,
    leg_spread: 0.33759184181690216,
    reasoning: [ 'wide_leg_spread' ],
    torso_angle: 4.085899154384683
  },
  pose_category: 'moderately_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_right',
    hip_bend_angle: 3.4934520187016846,
    leg_spread: 0.33759184181690216,
    shoulder_width: 0.4857635647058487,
    torso_angle: 4.085899154384683
  },
  suggestive_score: 0.3
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.08210563659667,
  nudity_contribution: 87.26015090942383,
  pose_contribution: 30,
  reasoning: [ 'nudity_detected_87.3%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 8ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 377
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1190ms
ğŸ“Š Result: success=true, status=flagged, nudity=87.26015090942383
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastBathroom.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753750563678-902153576.jpg',
  originalName: 'BreastBathroom.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753750563684_BreastBathroom.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1068ms
ğŸ“Š Status: 200, Content-Length: 1651
ğŸ Complete response received in 1079ms, size: 1651 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=87.26015090942383, pose=moderately_suggestive, suggestive=0.3
âœ… Transformation complete, final nudity score: 87.26015090942383
ğŸ­ Pose analysis: moderately_suggestive (0.3)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_right',
    hip_bend_angle: 3.4934520187016846,
    leg_spread: 0.33759184181690216,
    reasoning: [ 'wide_leg_spread' ],
    torso_angle: 4.085899154384683
  },
  pose_category: 'moderately_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_right',
    hip_bend_angle: 3.4934520187016846,
    leg_spread: 0.33759184181690216,
    shoulder_width: 0.4857635647058487,
    torso_angle: 4.085899154384683
  },
  suggestive_score: 0.3
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 70.08210563659667,
  nudity_contribution: 87.26015090942383,
  pose_contribution: 30,
  reasoning: [ 'nudity_detected_87.3%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 378
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1089ms
ğŸ“Š Result: success=true, status=flagged, nudity=87.26015090942383
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753750694746-631095842.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753750694756_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1624ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 1634ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.8350772857666, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.79609775543213
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    reasoning: [],
    torso_angle: 1.3421758314396786
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    shoulder_width: 0.24153465032577515,
    torso_angle: 1.3421758314396786
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.684554100036614,
  nudity_contribution: 83.8350772857666,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.8%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 5ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 379
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1642ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.79609775543213
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753752514992-917425236.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753752515004_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2189ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 2196ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.8350772857666, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.79609775543213
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    reasoning: [],
    torso_angle: 1.3421758314396786
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    shoulder_width: 0.24153465032577515,
    torso_angle: 1.3421758314396786
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.684554100036614,
  nudity_contribution: 83.8350772857666,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.8%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 39ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 380
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2239ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.79609775543213
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 50,
  shape: 'square',
  blurredParts: [
    'ARMPITS_EXPOSED',
    'BELLY_EXPOSED',
    'FACE_FEMALE',
    'FEMALE_BREAST_EXPOSED',
    'FEMALE_GENITALIA_COVERED'
  ],
  overlayPositions: {
    ARMPITS_EXPOSED: { x: 1531, y: 873, width: 291, height: 227 },
    BELLY_EXPOSED: { x: 2073, y: 1050, width: 605, height: 619 },
    FACE_FEMALE: { x: 926, y: 1291, width: 468, height: 389 },
    FEMALE_BREAST_EXPOSED: { x: 1674, y: 1474, width: 477, height: 376 },
    FEMALE_GENITALIA_COVERED: { x: 2763, y: 1230, width: 380, height: 303 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753752515004_BreastStall.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753752536083_1753752515004_BreastStall.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [
  'ARMPITS_EXPOSED',
  'BELLY_EXPOSED',
  'FACE_FEMALE',
  'FEMALE_BREAST_EXPOSED',
  'FEMALE_GENITALIA_COVERED'
]
Blur setting: 50px (1:1 ratio)
Processing blur for ARMPITS_EXPOSED: { x: 1531, y: 873, width: 291, height: 227 }
Received manual blur box: x=1531, y=873, w=291, h=227
Working image dimensions: 4000x3000
Coordinate validation: right=1822/4000, bottom=1100/3000
Using coordinates directly (normalized system): 1531,873 291x227
ğŸ” About to extract region: left=1531, top=873, width=291, height=227
ğŸ” Extract bounds check: right=1822/4000, bottom=1100/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ARMPITS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1531, 873, 291, 227) from 4000x3000
ğŸ” Right edge: 1822 <= 4000? true
ğŸ” Bottom edge: 1100 <= 3000? true
ğŸ”„ Attempting extract for ARMPITS_EXPOSED...
âœ… Fresh extract successful for ARMPITS_EXPOSED
âœ… Successfully extracted ARMPITS_EXPOSED region
DEBUG: About to apply 50px blur to ARMPITS_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing ARMPITS_EXPOSED with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 50,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1531,
      "y": 873,
      "width": 291,
      "height": 227
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 605,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 468,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1674,
      "y": 1474,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1230,
      "width": 380,
      "height": 303
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for ARMPITS_EXPOSED
Processing blur for BELLY_EXPOSED: { x: 2073, y: 1050, width: 605, height: 619 }
Received manual blur box: x=2073, y=1050, w=605, h=619
Working image dimensions: 4000x3000
Coordinate validation: right=2678/4000, bottom=1669/3000
Using coordinates directly (normalized system): 2073,1050 605x619
ğŸ” About to extract region: left=2073, top=1050, width=605, height=619
ğŸ” Extract bounds check: right=2678/4000, bottom=1669/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BELLY_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2073, 1050, 605, 619) from 4000x3000
ğŸ” Right edge: 2678 <= 4000? true
ğŸ” Bottom edge: 1669 <= 3000? true
ğŸ”„ Attempting extract for BELLY_EXPOSED...
âœ… Fresh extract successful for BELLY_EXPOSED
âœ… Successfully extracted BELLY_EXPOSED region
DEBUG: About to apply 50px blur to BELLY_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing BELLY_EXPOSED with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 50,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1531,
      "y": 873,
      "width": 291,
      "height": 227
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 605,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 468,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1674,
      "y": 1474,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1230,
      "width": 380,
      "height": 303
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for BELLY_EXPOSED
Processing blur for FACE_FEMALE: { x: 926, y: 1291, width: 468, height: 389 }
Received manual blur box: x=926, y=1291, w=468, h=389
Working image dimensions: 4000x3000
Coordinate validation: right=1394/4000, bottom=1680/3000
Using coordinates directly (normalized system): 926,1291 468x389
ğŸ” About to extract region: left=926, top=1291, width=468, height=389
ğŸ” Extract bounds check: right=1394/4000, bottom=1680/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(926, 1291, 468, 389) from 4000x3000
ğŸ” Right edge: 1394 <= 4000? true
ğŸ” Bottom edge: 1680 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 50px blur to FACE_FEMALE region
DEBUG: ==========================================
DEBUG: Processing FACE_FEMALE with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 50,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1531,
      "y": 873,
      "width": 291,
      "height": 227
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 605,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 468,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1674,
      "y": 1474,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1230,
      "width": 380,
      "height": 303
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for FACE_FEMALE
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1674, y: 1474, width: 477, height: 376 }
Received manual blur box: x=1674, y=1474, w=477, h=376
Working image dimensions: 4000x3000
Coordinate validation: right=2151/4000, bottom=1850/3000
Using coordinates directly (normalized system): 1674,1474 477x376
ğŸ” About to extract region: left=1674, top=1474, width=477, height=376
ğŸ” Extract bounds check: right=2151/4000, bottom=1850/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1674, 1474, 477, 376) from 4000x3000
ğŸ” Right edge: 2151 <= 4000? true
ğŸ” Bottom edge: 1850 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_EXPOSED...
âœ… Fresh extract successful for FEMALE_BREAST_EXPOSED
âœ… Successfully extracted FEMALE_BREAST_EXPOSED region
DEBUG: About to apply 50px blur to FEMALE_BREAST_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_EXPOSED with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 50,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1531,
      "y": 873,
      "width": 291,
      "height": 227
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 605,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 468,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1674,
      "y": 1474,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1230,
      "width": 380,
      "height": 303
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for FEMALE_BREAST_EXPOSED
Processing blur for FEMALE_GENITALIA_COVERED: { x: 2763, y: 1230, width: 380, height: 303 }
Received manual blur box: x=2763, y=1230, w=380, h=303
Working image dimensions: 4000x3000
Coordinate validation: right=3143/4000, bottom=1533/3000
Using coordinates directly (normalized system): 2763,1230 380x303
ğŸ” About to extract region: left=2763, top=1230, width=380, height=303
ğŸ” Extract bounds check: right=3143/4000, bottom=1533/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_COVERED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2763, 1230, 380, 303) from 4000x3000
ğŸ” Right edge: 3143 <= 4000? true
ğŸ” Bottom edge: 1533 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_COVERED...
âœ… Fresh extract successful for FEMALE_GENITALIA_COVERED
âœ… Successfully extracted FEMALE_GENITALIA_COVERED region
DEBUG: About to apply 50px blur to FEMALE_GENITALIA_COVERED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_GENITALIA_COVERED with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 50,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1531,
      "y": 873,
      "width": 291,
      "height": 227
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 605,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 468,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1674,
      "y": 1474,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1230,
      "width": 380,
      "height": 303
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for FEMALE_GENITALIA_COVERED
Applying 5 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753752536083_1753752515004_BreastStall.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2471007 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753752554321-750225013.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753752554333_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1603ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 1613ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.8350772857666, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.79609775543213
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    reasoning: [],
    torso_angle: 1.3421758314396786
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    shoulder_width: 0.24153465032577515,
    torso_angle: 1.3421758314396786
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.684554100036614,
  nudity_contribution: 83.8350772857666,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.8%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 381
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1620ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.79609775543213
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 50,
  shape: 'oval',
  blurredParts: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ],
  overlayPositions: {
    ARMPITS_EXPOSED: { x: 1860, y: 1085, width: 175, height: 200 },
    FEMALE_BREAST_EXPOSED: { x: 1885, y: 1655, width: 190, height: 140 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753752554333_BreastStall.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753752613324_1753752554333_BreastStall.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ]
Blur setting: 50px (1:1 ratio)
Processing blur for ARMPITS_EXPOSED: { x: 1860, y: 1085, width: 175, height: 200 }
Received manual blur box: x=1860, y=1085, w=175, h=200
Working image dimensions: 4000x3000
Coordinate validation: right=2035/4000, bottom=1285/3000
Using coordinates directly (normalized system): 1860,1085 175x200
ğŸ” About to extract region: left=1860, top=1085, width=175, height=200
ğŸ” Extract bounds check: right=2035/4000, bottom=1285/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ARMPITS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1860, 1085, 175, 200) from 4000x3000
ğŸ” Right edge: 2035 <= 4000? true
ğŸ” Bottom edge: 1285 <= 3000? true
ğŸ”„ Attempting extract for ARMPITS_EXPOSED...
âœ… Fresh extract successful for ARMPITS_EXPOSED
âœ… Successfully extracted ARMPITS_EXPOSED region
DEBUG: About to apply 50px blur to ARMPITS_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing ARMPITS_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 50,
  "shape": "oval",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1860,
      "y": 1085,
      "width": 175,
      "height": 200
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1885,
      "y": 1655,
      "width": 190,
      "height": 140
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for ARMPITS_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for ARMPITS_EXPOSED
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1885, y: 1655, width: 190, height: 140 }
Received manual blur box: x=1885, y=1655, w=190, h=140
Working image dimensions: 4000x3000
Coordinate validation: right=2075/4000, bottom=1795/3000
Using coordinates directly (normalized system): 1885,1655 190x140
ğŸ” About to extract region: left=1885, top=1655, width=190, height=140
ğŸ” Extract bounds check: right=2075/4000, bottom=1795/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1885, 1655, 190, 140) from 4000x3000
ğŸ” Right edge: 2075 <= 4000? true
ğŸ” Bottom edge: 1795 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_EXPOSED...
âœ… Fresh extract successful for FEMALE_BREAST_EXPOSED
âœ… Successfully extracted FEMALE_BREAST_EXPOSED region
DEBUG: About to apply 50px blur to FEMALE_BREAST_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 50,
  "shape": "oval",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1860,
      "y": 1085,
      "width": 175,
      "height": 200
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1885,
      "y": 1655,
      "width": 190,
      "height": 140
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_BREAST_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_BREAST_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753752613324_1753752554333_BreastStall.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2552691 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753752647126-995901683.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753752647139_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1644ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 1654ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.8350772857666, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.79609775543213
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    reasoning: [],
    torso_angle: 1.3421758314396786
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    shoulder_width: 0.24153465032577515,
    torso_angle: 1.3421758314396786
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.684554100036614,
  nudity_contribution: 83.8350772857666,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.8%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 3ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 382
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1661ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.79609775543213
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 66,
  shape: 'oval',
  blurredParts: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ],
  overlayPositions: {
    ARMPITS_EXPOSED: { x: 1875, y: 1090, width: 175, height: 225 },
    FEMALE_BREAST_EXPOSED: { x: 1865, y: 1590, width: 220, height: 230 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753752647139_BreastStall.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753752695479_1753752647139_BreastStall.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ]
Blur setting: 66px (1:1 ratio)
Processing blur for ARMPITS_EXPOSED: { x: 1875, y: 1090, width: 175, height: 225 }
Received manual blur box: x=1875, y=1090, w=175, h=225
Working image dimensions: 4000x3000
Coordinate validation: right=2050/4000, bottom=1315/3000
Using coordinates directly (normalized system): 1875,1090 175x225
ğŸ” About to extract region: left=1875, top=1090, width=175, height=225
ğŸ” Extract bounds check: right=2050/4000, bottom=1315/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ARMPITS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1875, 1090, 175, 225) from 4000x3000
ğŸ” Right edge: 2050 <= 4000? true
ğŸ” Bottom edge: 1315 <= 3000? true
ğŸ”„ Attempting extract for ARMPITS_EXPOSED...
âœ… Fresh extract successful for ARMPITS_EXPOSED
âœ… Successfully extracted ARMPITS_EXPOSED region
DEBUG: About to apply 66px blur to ARMPITS_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing ARMPITS_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1875,
      "y": 1090,
      "width": 175,
      "height": 225
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1865,
      "y": 1590,
      "width": 220,
      "height": 230
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for ARMPITS_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for ARMPITS_EXPOSED
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1865, y: 1590, width: 220, height: 230 }
Received manual blur box: x=1865, y=1590, w=220, h=230
Working image dimensions: 4000x3000
Coordinate validation: right=2085/4000, bottom=1820/3000
Using coordinates directly (normalized system): 1865,1590 220x230
ğŸ” About to extract region: left=1865, top=1590, width=220, height=230
ğŸ” Extract bounds check: right=2085/4000, bottom=1820/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1865, 1590, 220, 230) from 4000x3000
ğŸ” Right edge: 2085 <= 4000? true
ğŸ” Bottom edge: 1820 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_EXPOSED...
âœ… Fresh extract successful for FEMALE_BREAST_EXPOSED
âœ… Successfully extracted FEMALE_BREAST_EXPOSED region
DEBUG: About to apply 66px blur to FEMALE_BREAST_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1875,
      "y": 1090,
      "width": 175,
      "height": 225
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1865,
      "y": 1590,
      "width": 220,
      "height": 230
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_BREAST_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_BREAST_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753752695479_1753752647139_BreastStall.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2552141 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753753418282-124156399.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753753418299_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1588ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 1589ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.8350772857666, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.79609775543213
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    reasoning: [],
    torso_angle: 1.3421758314396786
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    shoulder_width: 0.24153465032577515,
    torso_angle: 1.3421758314396786
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.684554100036614,
  nudity_contribution: 83.8350772857666,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.8%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 7ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 3ms
Content flagged and added to moderation queue: 383
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1609ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.79609775543213
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 66,
  shape: 'oval',
  blurredParts: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ],
  overlayPositions: {
    ARMPITS_EXPOSED: { x: 1870, y: 1135, width: 155, height: 160 },
    FEMALE_BREAST_EXPOSED: { x: 1870, y: 1620, width: 175, height: 155 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753753418299_BreastStall.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753753470034_1753753418299_BreastStall.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ]
Blur setting: 66px backend â†’ 66px Sharp.js sigma (1:1 ratio)
Processing blur for ARMPITS_EXPOSED: { x: 1870, y: 1135, width: 155, height: 160 }
Received manual blur box: x=1870, y=1135, w=155, h=160
Working image dimensions: 4000x3000
Coordinate validation: right=2025/4000, bottom=1295/3000
Using coordinates directly (normalized system): 1870,1135 155x160
ğŸ” About to extract region: left=1870, top=1135, width=155, height=160
ğŸ” Extract bounds check: right=2025/4000, bottom=1295/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ARMPITS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1870, 1135, 155, 160) from 4000x3000
ğŸ” Right edge: 2025 <= 4000? true
ğŸ” Bottom edge: 1295 <= 3000? true
ğŸ”„ Attempting extract for ARMPITS_EXPOSED...
âœ… Fresh extract successful for ARMPITS_EXPOSED
âœ… Successfully extracted ARMPITS_EXPOSED region
DEBUG: About to apply 66px blur to ARMPITS_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing ARMPITS_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1870,
      "y": 1135,
      "width": 155,
      "height": 160
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1870,
      "y": 1620,
      "width": 175,
      "height": 155
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for ARMPITS_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for ARMPITS_EXPOSED
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1870, y: 1620, width: 175, height: 155 }
Received manual blur box: x=1870, y=1620, w=175, h=155
Working image dimensions: 4000x3000
Coordinate validation: right=2045/4000, bottom=1775/3000
Using coordinates directly (normalized system): 1870,1620 175x155
ğŸ” About to extract region: left=1870, top=1620, width=175, height=155
ğŸ” Extract bounds check: right=2045/4000, bottom=1775/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1870, 1620, 175, 155) from 4000x3000
ğŸ” Right edge: 2045 <= 4000? true
ğŸ” Bottom edge: 1775 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_EXPOSED...
âœ… Fresh extract successful for FEMALE_BREAST_EXPOSED
âœ… Successfully extracted FEMALE_BREAST_EXPOSED region
DEBUG: About to apply 66px blur to FEMALE_BREAST_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1870,
      "y": 1135,
      "width": 155,
      "height": 160
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1870,
      "y": 1620,
      "width": 175,
      "height": 155
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_BREAST_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_BREAST_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753753470034_1753753418299_BreastStall.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2554686 bytes
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node server.js`[39m
ğŸ” Testing database connection...
âœ… Database connected successfully
ğŸš€ MuseNest Server Started
ğŸ“ Server running on port 3000
ğŸŒ Environment: development
ğŸ”— Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753753591367-838930598.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753753591383_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 1544ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 1556ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.47635865211487, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.64592981338501
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 4.637077570694168,
    leg_spread: 0.10031664371490479,
    reasoning: [],
    torso_angle: 1.4958002983887677
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 4.637077570694168,
    leg_spread: 0.10031664371490479,
    shoulder_width: 0.24376517534255981,
    torso_angle: 1.4958002983887677
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.4334510564804,
  nudity_contribution: 83.47635865211487,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.5%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 8ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 2ms
Content flagged and added to moderation queue: 384
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 1576ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.64592981338501
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 66,
  shape: 'square',
  blurredParts: [
    'ARMPITS_EXPOSED',
    'BELLY_EXPOSED',
    'FACE_FEMALE',
    'FEMALE_BREAST_EXPOSED',
    'FEMALE_GENITALIA_COVERED'
  ],
  overlayPositions: {
    ARMPITS_EXPOSED: { x: 1530, y: 872, width: 291, height: 228 },
    BELLY_EXPOSED: { x: 2073, y: 1050, width: 604, height: 619 },
    FACE_FEMALE: { x: 926, y: 1291, width: 467, height: 389 },
    FEMALE_BREAST_EXPOSED: { x: 1673, y: 1473, width: 477, height: 376 },
    FEMALE_GENITALIA_COVERED: { x: 2763, y: 1229, width: 381, height: 301 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753753591383_BreastStall.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753753615545_1753753591383_BreastStall.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [
  'ARMPITS_EXPOSED',
  'BELLY_EXPOSED',
  'FACE_FEMALE',
  'FEMALE_BREAST_EXPOSED',
  'FEMALE_GENITALIA_COVERED'
]
Blur setting: 66px backend â†’ 39.6px Sharp.js sigma
Processing blur for ARMPITS_EXPOSED: { x: 1530, y: 872, width: 291, height: 228 }
Received manual blur box: x=1530, y=872, w=291, h=228
Working image dimensions: 4000x3000
Coordinate validation: right=1821/4000, bottom=1100/3000
Using coordinates directly (normalized system): 1530,872 291x228
ğŸ” About to extract region: left=1530, top=872, width=291, height=228
ğŸ” Extract bounds check: right=1821/4000, bottom=1100/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ARMPITS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1530, 872, 291, 228) from 4000x3000
ğŸ” Right edge: 1821 <= 4000? true
ğŸ” Bottom edge: 1100 <= 3000? true
ğŸ”„ Attempting extract for ARMPITS_EXPOSED...
âœ… Fresh extract successful for ARMPITS_EXPOSED
âœ… Successfully extracted ARMPITS_EXPOSED region
DEBUG: About to apply 39.6px blur to ARMPITS_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing ARMPITS_EXPOSED with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1530,
      "y": 872,
      "width": 291,
      "height": 228
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 604,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 467,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1673,
      "y": 1473,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1229,
      "width": 381,
      "height": 301
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for ARMPITS_EXPOSED
Processing blur for BELLY_EXPOSED: { x: 2073, y: 1050, width: 604, height: 619 }
Received manual blur box: x=2073, y=1050, w=604, h=619
Working image dimensions: 4000x3000
Coordinate validation: right=2677/4000, bottom=1669/3000
Using coordinates directly (normalized system): 2073,1050 604x619
ğŸ” About to extract region: left=2073, top=1050, width=604, height=619
ğŸ” Extract bounds check: right=2677/4000, bottom=1669/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for BELLY_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2073, 1050, 604, 619) from 4000x3000
ğŸ” Right edge: 2677 <= 4000? true
ğŸ” Bottom edge: 1669 <= 3000? true
ğŸ”„ Attempting extract for BELLY_EXPOSED...
âœ… Fresh extract successful for BELLY_EXPOSED
âœ… Successfully extracted BELLY_EXPOSED region
DEBUG: About to apply 39.6px blur to BELLY_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing BELLY_EXPOSED with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1530,
      "y": 872,
      "width": 291,
      "height": 228
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 604,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 467,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1673,
      "y": 1473,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1229,
      "width": 381,
      "height": 301
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for BELLY_EXPOSED
Processing blur for FACE_FEMALE: { x: 926, y: 1291, width: 467, height: 389 }
Received manual blur box: x=926, y=1291, w=467, h=389
Working image dimensions: 4000x3000
Coordinate validation: right=1393/4000, bottom=1680/3000
Using coordinates directly (normalized system): 926,1291 467x389
ğŸ” About to extract region: left=926, top=1291, width=467, height=389
ğŸ” Extract bounds check: right=1393/4000, bottom=1680/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FACE_FEMALE in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(926, 1291, 467, 389) from 4000x3000
ğŸ” Right edge: 1393 <= 4000? true
ğŸ” Bottom edge: 1680 <= 3000? true
ğŸ”„ Attempting extract for FACE_FEMALE...
âœ… Fresh extract successful for FACE_FEMALE
âœ… Successfully extracted FACE_FEMALE region
DEBUG: About to apply 39.6px blur to FACE_FEMALE region
DEBUG: ==========================================
DEBUG: Processing FACE_FEMALE with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1530,
      "y": 872,
      "width": 291,
      "height": 228
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 604,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 467,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1673,
      "y": 1473,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1229,
      "width": 381,
      "height": 301
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for FACE_FEMALE
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1673, y: 1473, width: 477, height: 376 }
Received manual blur box: x=1673, y=1473, w=477, h=376
Working image dimensions: 4000x3000
Coordinate validation: right=2150/4000, bottom=1849/3000
Using coordinates directly (normalized system): 1673,1473 477x376
ğŸ” About to extract region: left=1673, top=1473, width=477, height=376
ğŸ” Extract bounds check: right=2150/4000, bottom=1849/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1673, 1473, 477, 376) from 4000x3000
ğŸ” Right edge: 2150 <= 4000? true
ğŸ” Bottom edge: 1849 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_EXPOSED...
âœ… Fresh extract successful for FEMALE_BREAST_EXPOSED
âœ… Successfully extracted FEMALE_BREAST_EXPOSED region
DEBUG: About to apply 39.6px blur to FEMALE_BREAST_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_EXPOSED with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1530,
      "y": 872,
      "width": 291,
      "height": 228
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 604,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 467,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1673,
      "y": 1473,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1229,
      "width": 381,
      "height": 301
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for FEMALE_BREAST_EXPOSED
Processing blur for FEMALE_GENITALIA_COVERED: { x: 2763, y: 1229, width: 381, height: 301 }
Received manual blur box: x=2763, y=1229, w=381, h=301
Working image dimensions: 4000x3000
Coordinate validation: right=3144/4000, bottom=1530/3000
Using coordinates directly (normalized system): 2763,1229 381x301
ğŸ” About to extract region: left=2763, top=1229, width=381, height=301
ğŸ” Extract bounds check: right=3144/4000, bottom=1530/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_GENITALIA_COVERED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(2763, 1229, 381, 301) from 4000x3000
ğŸ” Right edge: 3144 <= 4000? true
ğŸ” Bottom edge: 1530 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_GENITALIA_COVERED...
âœ… Fresh extract successful for FEMALE_GENITALIA_COVERED
âœ… Successfully extracted FEMALE_GENITALIA_COVERED region
DEBUG: About to apply 39.6px blur to FEMALE_GENITALIA_COVERED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_GENITALIA_COVERED with shape: "square"
DEBUG: Shape comparison: shape === 'oval' is false
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is true
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "square",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "BELLY_EXPOSED",
    "FACE_FEMALE",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_COVERED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1530,
      "y": 872,
      "width": 291,
      "height": 228
    },
    "BELLY_EXPOSED": {
      "x": 2073,
      "y": 1050,
      "width": 604,
      "height": 619
    },
    "FACE_FEMALE": {
      "x": 926,
      "y": 1291,
      "width": 467,
      "height": 389
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1673,
      "y": 1473,
      "width": 477,
      "height": 376
    },
    "FEMALE_GENITALIA_COVERED": {
      "x": 2763,
      "y": 1229,
      "width": 381,
      "height": 301
    }
  }
}
DEBUG: ==========================================
DEBUG: Using square/rectangle shape for FEMALE_GENITALIA_COVERED
Applying 5 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753753615545_1753753591383_BreastStall.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2470971 bytes
Received upload request: {
  model_id: '1',
  model_slug: 'escortexample',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BreastStall.jpg'
}
ğŸš€ Processing upload for model escortexample with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753753744513-78774761.jpg',
  originalName: 'BreastStall.jpg',
  modelId: 1,
  modelSlug: 'escortexample',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escortexample
ğŸš€ Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753753744528_BreastStall.jpg
ğŸ“¡ Target: 52.15.235.216:5000/analyze
ğŸ“ Form data prepared: context_type=public_gallery, model_id=1
ğŸ“¤ Sending form data to enhanced API...
ğŸ”Œ Socket assigned for enhanced API request
ğŸŒ Socket connected to EC2
âœ… Enhanced API response received in 2327ms
ğŸ“Š Status: 200, Content-Length: 1780
ğŸ Complete response received in 2338ms, size: 1780 bytes
âœ… JSON parsed successfully, success: true
ğŸ¯ Transforming enhanced API response...
ğŸ“Š Raw API results: nudity=83.8350772857666, pose=artistic_or_neutral, suggestive=0
âœ… Transformation complete, final nudity score: 81.79609775543213
ğŸ­ Pose analysis: artistic_or_neutral (0)
ğŸ” Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
ğŸ” Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    reasoning: [],
    torso_angle: 1.3421758314396786
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 5.325518917379975,
    leg_spread: 0.11395132541656494,
    shoulder_width: 0.24153465032577515,
    torso_angle: 1.3421758314396786
  },
  suggestive_score: 0
}
ğŸ” Debug - Combined assessment: {
  final_risk_score: 58.684554100036614,
  nudity_contribution: 83.8350772857666,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_83.8%' ],
  risk_level: 'medium'
}
ğŸ’¾ Storing moderation result in database...
ğŸ”Œ Got dedicated database connection
âœ… Database insert completed in 4ms
ğŸ”Œ Database connection released
ğŸ“‹ Adding flagged content to moderation queue...
ğŸ”Œ Got dedicated database connection for queue
âœ… Queue insert completed in 1ms
Content flagged and added to moderation queue: 385
ğŸ”Œ Queue database connection released
âœ… Upload processing completed in 2347ms
ğŸ“Š Result: success=true, status=flagged, nudity=81.79609775543213
ğŸ“¤ Sending successful response to client...
âœ… Response sent successfully
Creating blurred version with settings: {
  strength: 66,
  shape: 'oval',
  blurredParts: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ],
  overlayPositions: {
    ARMPITS_EXPOSED: { x: 1865, y: 1125, width: 175, height: 175 },
    FEMALE_BREAST_EXPOSED: { x: 1915, y: 1635, width: 165, height: 185 }
  }
}
Original path: /Users/programmer/Projects/musenest/public/uploads/escortexample/originals/1753753744528_BreastStall.jpg
Output path: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753753815204_1753753744528_BreastStall.jpg
Raw image dimensions: 4000 x 3000 orientation: 6
ğŸ”„ Processing blur in EXIF-stripped coordinate system (matching NudeNet)
ğŸ”„ Working with raw image: 4000x3000, orientation: 6
âœ… Using EXIF-stripped coordinate system (matching NudeNet detection)
Working with corrected dimensions: 4000 x 3000
Original raw dimensions: 4000 x 3000 orientation: 6
Applying selective blur to regions: [ 'ARMPITS_EXPOSED', 'FEMALE_BREAST_EXPOSED' ]
Blur setting: 66px backend â†’ 39.6px Sharp.js sigma
Processing blur for ARMPITS_EXPOSED: { x: 1865, y: 1125, width: 175, height: 175 }
Received manual blur box: x=1865, y=1125, w=175, h=175
Working image dimensions: 4000x3000
Coordinate validation: right=2040/4000, bottom=1300/3000
Using coordinates directly (normalized system): 1865,1125 175x175
ğŸ” About to extract region: left=1865, top=1125, width=175, height=175
ğŸ” Extract bounds check: right=2040/4000, bottom=1300/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for ARMPITS_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1865, 1125, 175, 175) from 4000x3000
ğŸ” Right edge: 2040 <= 4000? true
ğŸ” Bottom edge: 1300 <= 3000? true
ğŸ”„ Attempting extract for ARMPITS_EXPOSED...
âœ… Fresh extract successful for ARMPITS_EXPOSED
âœ… Successfully extracted ARMPITS_EXPOSED region
DEBUG: About to apply 39.6px blur to ARMPITS_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing ARMPITS_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1865,
      "y": 1125,
      "width": 175,
      "height": 175
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1915,
      "y": 1635,
      "width": 165,
      "height": 185
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for ARMPITS_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for ARMPITS_EXPOSED
Processing blur for FEMALE_BREAST_EXPOSED: { x: 1915, y: 1635, width: 165, height: 185 }
Received manual blur box: x=1915, y=1635, w=165, h=185
Working image dimensions: 4000x3000
Coordinate validation: right=2080/4000, bottom=1820/3000
Using coordinates directly (normalized system): 1915,1635 165x185
ğŸ” About to extract region: left=1915, top=1635, width=165, height=185
ğŸ” Extract bounds check: right=2080/4000, bottom=1820/3000
ğŸ” ACTUAL working image dimensions just before extract: 4000x3000
ğŸ”„ Creating fresh Sharp instance for FEMALE_BREAST_EXPOSED in raw EXIF-stripped space
ğŸ”„ Using autoRotate: false to match NudeNet coordinate space
ğŸ”„ Raw metadata (EXIF-stripped): 4000x3000, orientation: 6
ğŸ” FINAL BOUNDS CHECK: extract(1915, 1635, 165, 185) from 4000x3000
ğŸ” Right edge: 2080 <= 4000? true
ğŸ” Bottom edge: 1820 <= 3000? true
ğŸ”„ Attempting extract for FEMALE_BREAST_EXPOSED...
âœ… Fresh extract successful for FEMALE_BREAST_EXPOSED
âœ… Successfully extracted FEMALE_BREAST_EXPOSED region
DEBUG: About to apply 39.6px blur to FEMALE_BREAST_EXPOSED region
DEBUG: ==========================================
DEBUG: Processing FEMALE_BREAST_EXPOSED with shape: "oval"
DEBUG: Shape comparison: shape === 'oval' is true
DEBUG: Shape comparison: shape === 'rounded' is false
DEBUG: Shape comparison: shape === 'square' is false
DEBUG: Full blur settings: {
  "strength": 66,
  "shape": "oval",
  "blurredParts": [
    "ARMPITS_EXPOSED",
    "FEMALE_BREAST_EXPOSED"
  ],
  "overlayPositions": {
    "ARMPITS_EXPOSED": {
      "x": 1865,
      "y": 1125,
      "width": 175,
      "height": 175
    },
    "FEMALE_BREAST_EXPOSED": {
      "x": 1915,
      "y": 1635,
      "width": 165,
      "height": 185
    }
  }
}
DEBUG: ==========================================
DEBUG: FORCING OVAL SHAPE for FEMALE_BREAST_EXPOSED - creating custom SVG blur
DEBUG: Created SVG oval blur for FEMALE_BREAST_EXPOSED
Applying 2 blur regions to landscape image
âœ… Keeping EXIF-stripped result - admin interface now uses same coordinate space
Saving processed image to: /Users/programmer/Projects/musenest/public/uploads/escortexample/public/blurred/blurred_1753753815204_1753753744528_BreastStall.jpg
Setting EXIF orientation metadata to: 6
Blurred file created successfully - Size: 2551851 bytes
