# Production Environment Configuration for Gallery Image Picker
# Copy this file to .env in production and configure with your actual values

# Node Environment
NODE_ENV=production

# Database Configuration
DB_HOST=your-production-db-host
DB_USER=musenest_prod_user
DB_PASSWORD=your-strong-database-password
DB_NAME=musenest_production
DB_PORT=3306

# Server Configuration  
PORT=3000
HTTPS_ENABLED=true

# JWT Configuration - Use a strong, unique secret
JWT_SECRET=your-super-secure-jwt-secret-at-least-32-characters-long
JWT_EXPIRES_IN=7d

# File Upload Configuration
UPLOAD_DIR=/var/www/musenest/uploads
MAX_FILE_SIZE=10485760  # 10MB in bytes
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,webp

# Security Configuration
BCRYPT_ROUNDS=12
RATE_LIMIT_WINDOW=15      # Rate limit window in minutes
RATE_LIMIT_MAX=100        # Max requests per window (production setting)

# Gallery Image Picker Specific Settings
GALLERY_BATCH_LIMIT=50    # Max images per batch operation
GALLERY_CACHE_TTL=300     # Cache TTL in seconds (5 minutes)
GALLERY_CACHE_SIZE=100    # Max number of cached library responses
GALLERY_CONCURRENT_UPLOADS=3  # Concurrent upload limit

# CDN Configuration (Optional but recommended)
CDN_URL=https://cdn.yourdomain.com
CDN_ENABLED=true

# Redis Configuration (Optional for session storage and caching)
REDIS_URL=redis://localhost:6379
REDIS_ENABLED=false

# AI Server Configuration (if using AI features)
AI_SERVER_URL=https://your-ai-server.com
AI_SERVER_API_KEY=your-ai-api-key

# Monitoring and Logging
LOG_LEVEL=info
METRICS_ENABLED=true
HEALTH_CHECK_ENDPOINT=/_health

# SMTP Configuration (for notifications)
SMTP_HOST=smtp.yourmailprovider.com
SMTP_PORT=587
SMTP_USER=your-email@yourdomain.com
SMTP_PASS=your-email-password
SMTP_FROM=noreply@yourdomain.com

# Stripe Configuration (if using payments)
STRIPE_PUBLIC_KEY=pk_live_your_stripe_public_key
STRIPE_SECRET_KEY=sk_live_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# SSL/TLS Configuration
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/private.key

# Database SSL Configuration (recommended for production)
DB_SSL_ENABLED=true
DB_SSL_REJECT_UNAUTHORIZED=true

# Security Headers Configuration
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true

# Performance Optimization
ENABLE_COMPRESSION=true
STATIC_CACHE_MAX_AGE=31536000  # 1 year for static assets
API_CACHE_MAX_AGE=300          # 5 minutes for API responses

# Error Handling
SHOW_STACK_TRACE=false  # Never show stack traces in production
LOG_SQL_QUERIES=false   # Disable SQL query logging for performance

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Health Check Configuration
HEALTH_CHECK_DB_TIMEOUT=5000
HEALTH_CHECK_REDIS_TIMEOUT=3000

# Rate Limiting for Gallery Operations
GALLERY_LIBRARY_RATE_LIMIT=60      # 60 requests per minute
GALLERY_BATCH_RATE_LIMIT=20        # 20 batch operations per 5 minutes  
GALLERY_UPLOAD_RATE_LIMIT=100      # 100 uploads per 10 minutes

# Image Processing Configuration
IMAGE_QUALITY=85
THUMBNAIL_QUALITY=75
WATERMARK_OPACITY=0.3
ENABLE_WEBP=true
ENABLE_AVIF=false  # Not widely supported yet

# Content Security Policy
CSP_DEFAULT_SRC="'self'"
CSP_SCRIPT_SRC="'self' 'unsafe-inline'"
CSP_STYLE_SRC="'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com"
CSP_IMG_SRC="'self' data: https:"
CSP_FONT_SRC="'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com"

# Feature Flags
GALLERY_PICKER_LEGACY_FALLBACK=false
GALLERY_PICKER_ANALYTICS_ENABLED=true
MALWARE_SCANNING_ENABLED=false  # Requires additional service integration