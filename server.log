🔍 Testing database connection...
✅ Database connected successfully
🚀 MuseNest Server Started
📍 Server running on port 3000
🌍 Environment: development
🔗 Health check: http://localhost:3000/health

Next steps:
1. Copy .env.example to .env and configure your database
2. Run: npm run migrate (to set up database)
3. Run: npm run seed (to add sample data)
Loaded 0 active impersonation sessions
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'test_small.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753670926057-617535803.jpg',
  originalName: 'test_small.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753670926062_test_small.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 306ms
📊 Status: 200, Content-Length: 1342
🏁 Complete response received in 316ms, size: 1342 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=87.58293986320496, pose=highly_suggestive, suggestive=0.8999999999999999
✅ Transformation complete, final nudity score: 87.58293986320496
🎭 Pose analysis: highly_suggestive (0.8999999999999999)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_right',
    hip_bend_angle: 90.0525157338934,
    leg_spread: 0.3585890531539917,
    reasoning: [ 'bent_over_pose', 'wide_leg_spread', 'extreme_torso_angle' ],
    torso_angle: 84.10572142942219
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_right',
    hip_bend_angle: 90.0525157338934,
    leg_spread: 0.3585890531539917,
    shoulder_width: 0.4913264960050583,
    torso_angle: 84.10572142942219
  },
  suggestive_score: 0.8999999999999999
}
🔍 Debug - Combined assessment: {
  final_risk_score: 87.82464587688446,
  nudity_contribution: 87.58293986320496,
  pose_contribution: 89.99999999999999,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'high'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 7ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 162
🔌 Queue database connection released
✅ Upload processing completed in 333ms
📊 Result: success=true, status=flagged, nudity=87.58293986320496
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'x-penetration.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753670957999-580711040.jpeg',
  originalName: 'x-penetration.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753670958001_x-penetration.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 279ms
📊 Status: 200, Content-Length: 910
🏁 Complete response received in 290ms, size: 910 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.14563584327698, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.14563584327698
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 64.03107225894928,
  nudity_contribution: 71.14563584327698,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 163
🔌 Queue database connection released
✅ Upload processing completed in 297ms
📊 Result: success=true, status=flagged, nudity=71.14563584327698
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'x-penetration.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671009091-676988084.jpeg',
  originalName: 'x-penetration.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671009095_x-penetration.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 178ms
📊 Status: 200, Content-Length: 910
🏁 Complete response received in 187ms, size: 910 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.14563584327698, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.14563584327698
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 64.03107225894928,
  nudity_contribution: 71.14563584327698,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 9ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 164
🔌 Queue database connection released
✅ Upload processing completed in 203ms
📊 Result: success=true, status=flagged, nudity=71.14563584327698
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671039768-569676835.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671039782_Labia.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1263ms
📊 Status: 200, Content-Length: 878
🏁 Complete response received in 1263ms, size: 878 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=65.223228931427, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 65.223228931427
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 58.70090603828431,
  nudity_contribution: 65.223228931427,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 165
🔌 Queue database connection released
✅ Upload processing completed in 1270ms
📊 Result: success=true, status=flagged, nudity=65.223228931427
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'r-sex.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671165102-154809249.jpeg',
  originalName: 'r-sex.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671165105_r-sex.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 205ms
📊 Status: 200, Content-Length: 1200
🏁 Complete response received in 214ms, size: 1200 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=65.8961832523346, pose=highly_suggestive, suggestive=0.6000000000000001
✅ Transformation complete, final nudity score: 65.8961832523346
🎭 Pose analysis: highly_suggestive (0.6000000000000001)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 56.31053879781366,
    leg_spread: 0.04340171813964844,
    reasoning: [ 'bent_over_pose', 'extreme_torso_angle' ],
    torso_angle: 77.91993240060023
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 56.31053879781366,
    leg_spread: 0.04340171813964844,
    shoulder_width: 0.1058916449546814,
    torso_angle: 77.91993240060023
  },
  suggestive_score: 0.6000000000000001
}
🔍 Debug - Combined assessment: {
  final_risk_score: 65.30656492710114,
  nudity_contribution: 65.8961832523346,
  pose_contribution: 60.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 166
🔌 Queue database connection released
✅ Upload processing completed in 225ms
📊 Result: success=true, status=flagged, nudity=65.8961832523346
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'r-sex.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671402723-361481895.jpeg',
  originalName: 'r-sex.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671402725_r-sex.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 197ms
📊 Status: 200, Content-Length: 1200
🏁 Complete response received in 208ms, size: 1200 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=65.8961832523346, pose=highly_suggestive, suggestive=0.6000000000000001
✅ Transformation complete, final nudity score: 65.8961832523346
🎭 Pose analysis: highly_suggestive (0.6000000000000001)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_left',
    hip_bend_angle: 56.31053879781366,
    leg_spread: 0.04340171813964844,
    reasoning: [ 'bent_over_pose', 'extreme_torso_angle' ],
    torso_angle: 77.91993240060023
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_left',
    hip_bend_angle: 56.31053879781366,
    leg_spread: 0.04340171813964844,
    shoulder_width: 0.1058916449546814,
    torso_angle: 77.91993240060023
  },
  suggestive_score: 0.6000000000000001
}
🔍 Debug - Combined assessment: {
  final_risk_score: 65.30656492710114,
  nudity_contribution: 65.8961832523346,
  pose_contribution: 60.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 167
🔌 Queue database connection released
✅ Upload processing completed in 218ms
📊 Result: success=true, status=flagged, nudity=65.8961832523346
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'Labia.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671429953-719148727.jpg',
  originalName: 'Labia.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671429962_Labia.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1172ms
📊 Status: 200, Content-Length: 878
🏁 Complete response received in 1184ms, size: 878 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=65.223228931427, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 65.223228931427
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 58.70090603828431,
  nudity_contribution: 65.223228931427,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 168
🔌 Queue database connection released
✅ Upload processing completed in 1190ms
📊 Result: success=true, status=flagged, nudity=65.223228931427
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671442034-385057035.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671442046_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 6588ms
📊 Status: 200, Content-Length: 872
🏁 Complete response received in 6599ms, size: 872 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=78.75638008117676, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 78.75638008117676
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 70.88074207305908,
  nudity_contribution: 78.75638008117676,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 169
🔌 Queue database connection released
✅ Upload processing completed in 6605ms
📊 Result: success=true, status=flagged, nudity=78.75638008117676
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BacksideClean.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671475019-13164622.jpg',
  originalName: 'BacksideClean.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671475031_BacksideClean.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1387ms
📊 Status: 200, Content-Length: 1251
🏁 Complete response received in 1403ms, size: 1251 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=69.93350386619568, pose=highly_suggestive, suggestive=0.6000000000000001
✅ Transformation complete, final nudity score: 69.93350386619568
🎭 Pose analysis: highly_suggestive (0.6000000000000001)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 84.03171308009976,
    leg_spread: 0.04622828960418701,
    reasoning: [ 'bent_over_pose', 'extreme_torso_angle' ],
    torso_angle: 92.81579556462518
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 84.03171308009976,
    leg_spread: 0.04622828960418701,
    shoulder_width: 0.22983288764953613,
    torso_angle: 92.81579556462518
  },
  suggestive_score: 0.6000000000000001
}
🔍 Debug - Combined assessment: {
  final_risk_score: 68.94015347957611,
  nudity_contribution: 69.93350386619568,
  pose_contribution: 60.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 0ms
Content flagged and added to moderation queue: 170
🔌 Queue database connection released
✅ Upload processing completed in 1410ms
📊 Result: success=true, status=flagged, nudity=69.93350386619568
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671549041-786326129.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671549064_HoldingTits.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 4211ms
📊 Status: 200, Content-Length: 1253
🏁 Complete response received in 4222ms, size: 1253 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=81.63187503814697, pose=highly_suggestive, suggestive=0.6000000000000001
✅ Transformation complete, final nudity score: 81.63187503814697
🎭 Pose analysis: highly_suggestive (0.6000000000000001)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 91.89209677818587,
    leg_spread: 0.19951117038726807,
    reasoning: [ 'bent_over_pose', 'extreme_torso_angle' ],
    torso_angle: 88.97035031946724
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 91.89209677818587,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 88.97035031946724
  },
  suggestive_score: 0.6000000000000001
}
🔍 Debug - Combined assessment: {
  final_risk_score: 79.46868753433229,
  nudity_contribution: 81.63187503814697,
  pose_contribution: 60.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 171
🔌 Queue database connection released
✅ Upload processing completed in 4231ms
📊 Result: success=true, status=flagged, nudity=81.63187503814697
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'HoldingTits.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671588876-103358962.jpg',
  originalName: 'HoldingTits.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671588896_HoldingTits.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 4583ms
📊 Status: 200, Content-Length: 1253
🏁 Complete response received in 4593ms, size: 1253 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=81.63187503814697, pose=highly_suggestive, suggestive=0.6000000000000001
✅ Transformation complete, final nudity score: 81.63187503814697
🎭 Pose analysis: highly_suggestive (0.6000000000000001)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 91.89209677818587,
    leg_spread: 0.19951117038726807,
    reasoning: [ 'bent_over_pose', 'extreme_torso_angle' ],
    torso_angle: 88.97035031946724
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 91.89209677818587,
    leg_spread: 0.19951117038726807,
    shoulder_width: 0.30918198823928833,
    torso_angle: 88.97035031946724
  },
  suggestive_score: 0.6000000000000001
}
🔍 Debug - Combined assessment: {
  final_risk_score: 79.46868753433229,
  nudity_contribution: 81.63187503814697,
  pose_contribution: 60.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 172
🔌 Queue database connection released
✅ Upload processing completed in 4600ms
📊 Result: success=true, status=flagged, nudity=81.63187503814697
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'X-sec.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671627173-100012039.jpeg',
  originalName: 'X-sec.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671627176_X-sec.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 195ms
📊 Status: 200, Content-Length: 1330
🏁 Complete response received in 203ms, size: 1330 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=77.13833451271057, pose=highly_suggestive, suggestive=0.65
✅ Transformation complete, final nudity score: 71.16628289222717
🎭 Pose analysis: highly_suggestive (0.65)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'side_view',
    hip_bend_angle: 4.3175212637308045,
    leg_spread: 0.10303080081939697,
    reasoning: [ 'bent_over_pose', 'side_view_bent_posture' ],
    torso_angle: 39.6245518787368
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'side_view',
    hip_bend_angle: 4.3175212637308045,
    leg_spread: 0.10303080081939697,
    shoulder_width: 0.08878228068351746,
    torso_angle: 39.6245518787368
  },
  suggestive_score: 0.65
}
🔍 Debug - Combined assessment: {
  final_risk_score: 75.92450106143951,
  nudity_contribution: 77.13833451271057,
  pose_contribution: 65,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 173
🔌 Queue database connection released
✅ Upload processing completed in 215ms
📊 Result: success=true, status=flagged, nudity=71.16628289222717
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'PullingNipples.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671884973-105724942.jpg',
  originalName: 'PullingNipples.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671884984_PullingNipples.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1356ms
📊 Status: 200, Content-Length: 1285
🏁 Complete response received in 1356ms, size: 1285 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=77.49767899513245, pose=highly_suggestive, suggestive=0.6000000000000001
✅ Transformation complete, final nudity score: 77.49767899513245
🎭 Pose analysis: highly_suggestive (0.6000000000000001)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 86.71089133540248,
    leg_spread: 0.21122115850448608,
    reasoning: [ 'bent_over_pose', 'extreme_torso_angle' ],
    torso_angle: 96.06361745235209
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 86.71089133540248,
    leg_spread: 0.21122115850448608,
    shoulder_width: 0.3002632260322571,
    torso_angle: 96.06361745235209
  },
  suggestive_score: 0.6000000000000001
}
🔍 Debug - Combined assessment: {
  final_risk_score: 75.74791109561922,
  nudity_contribution: 77.49767899513245,
  pose_contribution: 60.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 174
🔌 Queue database connection released
✅ Upload processing completed in 1367ms
📊 Result: success=true, status=flagged, nudity=77.49767899513245
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'x-penetration.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671925809-697761618.jpeg',
  originalName: 'x-penetration.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671925814_x-penetration.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 184ms
📊 Status: 200, Content-Length: 910
🏁 Complete response received in 193ms, size: 910 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.14563584327698, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.14563584327698
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 64.03107225894928,
  nudity_contribution: 71.14563584327698,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 4ms
Content flagged and added to moderation queue: 175
🔌 Queue database connection released
✅ Upload processing completed in 210ms
📊 Result: success=true, status=flagged, nudity=71.14563584327698
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BacksideClean.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753671970774-960019870.jpg',
  originalName: 'BacksideClean.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753671970787_BacksideClean.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1306ms
📊 Status: 200, Content-Length: 1251
🏁 Complete response received in 1317ms, size: 1251 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=69.93350386619568, pose=highly_suggestive, suggestive=0.6000000000000001
✅ Transformation complete, final nudity score: 69.93350386619568
🎭 Pose analysis: highly_suggestive (0.6000000000000001)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 84.03171308009976,
    leg_spread: 0.04622828960418701,
    reasoning: [ 'bent_over_pose', 'extreme_torso_angle' ],
    torso_angle: 92.81579556462518
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 84.03171308009976,
    leg_spread: 0.04622828960418701,
    shoulder_width: 0.22983288764953613,
    torso_angle: 92.81579556462518
  },
  suggestive_score: 0.6000000000000001
}
🔍 Debug - Combined assessment: {
  final_risk_score: 68.94015347957611,
  nudity_contribution: 69.93350386619568,
  pose_contribution: 60.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 176
🔌 Queue database connection released
✅ Upload processing completed in 1328ms
📊 Result: success=true, status=flagged, nudity=69.93350386619568
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BacksideClean.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753673380191-391009943.jpg',
  originalName: 'BacksideClean.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753673380203_BacksideClean.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1396ms
📊 Status: 200, Content-Length: 1173
🏁 Complete response received in 1396ms, size: 1173 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=69.93350386619568, pose=artistic_or_neutral, suggestive=0
✅ Transformation complete, final nudity score: 69.93350386619568
🎭 Pose analysis: artistic_or_neutral (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 5.968286919900238,
    leg_spread: 0.04622828960418701,
    reasoning: [],
    torso_angle: 2.815795564625171
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 5.968286919900238,
    leg_spread: 0.04622828960418701,
    shoulder_width: 0.22983288764953613,
    torso_angle: 2.815795564625171
  },
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 62.94015347957611,
  nudity_contribution: 69.93350386619568,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 8ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 177
🔌 Queue database connection released
✅ Upload processing completed in 1411ms
📊 Result: success=true, status=flagged, nudity=69.93350386619568
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BacksideClean.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753674457956-997757725.jpg',
  originalName: 'BacksideClean.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753674457972_BacksideClean.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1424ms
📊 Status: 200, Content-Length: 1188
🏁 Complete response received in 1437ms, size: 1188 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=69.93350386619568, pose=artistic_or_neutral, suggestive=0.2
✅ Transformation complete, final nudity score: 69.93350386619568
🎭 Pose analysis: artistic_or_neutral (0.2)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_away',
    hip_bend_angle: 5.968286919900238,
    leg_spread: 0.04622828960418701,
    reasoning: [ 'facing_away_pose' ],
    torso_angle: 2.815795564625171
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_away',
    hip_bend_angle: 5.968286919900238,
    leg_spread: 0.04622828960418701,
    shoulder_width: 0.22983288764953613,
    torso_angle: 2.815795564625171
  },
  suggestive_score: 0.2
}
🔍 Debug - Combined assessment: {
  final_risk_score: 64.94015347957611,
  nudity_contribution: 69.93350386619568,
  pose_contribution: 20,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 4ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 178
🔌 Queue database connection released
✅ Upload processing completed in 1447ms
📊 Result: success=true, status=flagged, nudity=69.93350386619568
📤 Sending successful response to client...
✅ Response sent successfully
Error ending impersonation: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Error cleaning up expired sessions: Error: Impersonation session not found
    at ImpersonationManager.endImpersonation (/Users/programmer/Projects/musenest/middleware/impersonation.js:143:23)
    at ImpersonationManager.cleanupExpiredSessions (/Users/programmer/Projects/musenest/middleware/impersonation.js:308:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BendoverAss.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753674536237-456771605.jpg',
  originalName: 'BendoverAss.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753674536246_BendoverAss.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1294ms
📊 Status: 200, Content-Length: 878
🏁 Complete response received in 1294ms, size: 878 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.40303635597229, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 67.40303635597229
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 60.66273272037507,
  nudity_contribution: 67.40303635597229,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 7ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 179
🔌 Queue database connection released
✅ Upload processing completed in 1306ms
📊 Result: success=true, status=flagged, nudity=67.40303635597229
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'NightBreasts.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753674557517-519725330.jpg',
  originalName: 'NightBreasts.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753674557524_NightBreasts.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1416ms
📊 Status: 200, Content-Length: 1252
🏁 Complete response received in 1416ms, size: 1252 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=81.20414018630981, pose=artistic_or_neutral, suggestive=0
✅ Transformation complete, final nudity score: 81.20414018630981
🎭 Pose analysis: artistic_or_neutral (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.018776093400945,
    leg_spread: 0.04153671860694885,
    reasoning: [],
    torso_angle: 6.857114064630232
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.018776093400945,
    leg_spread: 0.04153671860694885,
    shoulder_width: 0.2704388499259949,
    torso_angle: 6.857114064630232
  },
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 73.08372616767883,
  nudity_contribution: 81.20414018630981,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 180
🔌 Queue database connection released
✅ Upload processing completed in 1423ms
📊 Result: success=true, status=flagged, nudity=81.20414018630981
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'x-penetration.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753674610288-713991318.jpeg',
  originalName: 'x-penetration.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753674610290_x-penetration.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 173ms
📊 Status: 200, Content-Length: 910
🏁 Complete response received in 184ms, size: 910 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=71.14563584327698, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 71.14563584327698
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 64.03107225894928,
  nudity_contribution: 71.14563584327698,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 181
🔌 Queue database connection released
✅ Upload processing completed in 192ms
📊 Result: success=true, status=flagged, nudity=71.14563584327698
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'x-sex-1.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753674622201-552955835.jpeg',
  originalName: 'x-sex-1.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753674622202_x-sex-1.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 208ms
📊 Status: 200, Content-Length: 1272
🏁 Complete response received in 219ms, size: 1272 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.37103462219238, pose=highly_suggestive, suggestive=1.1
✅ Transformation complete, final nudity score: 67.37103462219238
🎭 Pose analysis: highly_suggestive (1.1)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_away',
    hip_bend_angle: 0.45358630448978937,
    leg_spread: 0.03394770622253418,
    reasoning: [
      'bent_over_pose',
      'extreme_torso_angle',
      'facing_away_bent_over_pose'
    ],
    torso_angle: 88.36457381269457
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_away',
    hip_bend_angle: 0.45358630448978937,
    leg_spread: 0.03394770622253418,
    shoulder_width: 0.013736248016357422,
    torso_angle: 88.36457381269457
  },
  suggestive_score: 1.1
}
🔍 Debug - Combined assessment: {
  final_risk_score: 71.63393115997314,
  nudity_contribution: 67.37103462219238,
  pose_contribution: 110.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 182
🔌 Queue database connection released
✅ Upload processing completed in 223ms
📊 Result: success=true, status=flagged, nudity=67.37103462219238
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'x-sex-1.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753675192696-704138346.jpeg',
  originalName: 'x-sex-1.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753675192698_x-sex-1.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 203ms
📊 Status: 200, Content-Length: 1272
🏁 Complete response received in 207ms, size: 1272 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.37103462219238, pose=highly_suggestive, suggestive=1.1
✅ Transformation complete, final nudity score: 67.37103462219238
🎭 Pose analysis: highly_suggestive (1.1)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_away',
    hip_bend_angle: 0.45358630448978937,
    leg_spread: 0.03394770622253418,
    reasoning: [
      'bent_over_pose',
      'extreme_torso_angle',
      'facing_away_bent_over_pose'
    ],
    torso_angle: 88.36457381269457
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_away',
    hip_bend_angle: 0.45358630448978937,
    leg_spread: 0.03394770622253418,
    shoulder_width: 0.013736248016357422,
    torso_angle: 88.36457381269457
  },
  suggestive_score: 1.1
}
🔍 Debug - Combined assessment: {
  final_risk_score: 71.63393115997314,
  nudity_contribution: 67.37103462219238,
  pose_contribution: 110.00000000000001,
  reasoning: [ 'suggestive_pose_highly_suggestive' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 5ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 183
🔌 Queue database connection released
✅ Upload processing completed in 218ms
📊 Result: success=true, status=flagged, nudity=67.37103462219238
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'x-sex-1.jpeg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753675704989-392441078.jpeg',
  originalName: 'x-sex-1.jpeg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753675704991_x-sex-1.jpeg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 207ms
📊 Status: 200, Content-Length: 1507
🏁 Complete response received in 216ms, size: 1507 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=67.37103462219238, pose=highly_suggestive, suggestive=1.1
✅ Transformation complete, final nudity score: 67.37103462219238
🎭 Pose analysis: highly_suggestive (1.1)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_away',
    hip_bend_angle: 0.45358630448978937,
    leg_spread: 0.03394770622253418,
    reasoning: [
      'bent_over_pose',
      'extreme_torso_angle',
      'facing_away_bent_over_pose'
    ],
    torso_angle: 88.36457381269457
  },
  pose_category: 'highly_suggestive',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_away',
    hip_bend_angle: 0.45358630448978937,
    leg_spread: 0.03394770622253418,
    shoulder_width: 0.013736248016357422,
    torso_angle: 88.36457381269457
  },
  suggestive_score: 1.1
}
🔍 Debug - Combined assessment: {
  final_risk_score: 80.15972423553467,
  nudity_contribution: 67.37103462219238,
  pose_contribution: 110.00000000000001,
  reasoning: [ 'nudity_detected_67.4%', 'suggestive_pose_highly_suggestive' ],
  risk_level: 'high'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 6ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 184
🔌 Queue database connection released
✅ Upload processing completed in 230ms
📊 Result: success=true, status=flagged, nudity=67.37103462219238
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'NightBreasts.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753675723642-171442745.jpg',
  originalName: 'NightBreasts.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753675723650_NightBreasts.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1570ms
📊 Status: 200, Content-Length: 1667
🏁 Complete response received in 1581ms, size: 1667 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=81.20414018630981, pose=artistic_or_neutral, suggestive=0
✅ Transformation complete, final nudity score: 81.20414018630981
🎭 Pose analysis: artistic_or_neutral (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.018776093400945,
    leg_spread: 0.04153671860694885,
    reasoning: [],
    torso_angle: 6.857114064630232
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.018776093400945,
    leg_spread: 0.04153671860694885,
    shoulder_width: 0.2704388499259949,
    torso_angle: 6.857114064630232
  },
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 56.84289813041686,
  nudity_contribution: 81.20414018630981,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.2%' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 2ms
Content flagged and added to moderation queue: 185
🔌 Queue database connection released
✅ Upload processing completed in 1588ms
📊 Result: success=true, status=flagged, nudity=81.20414018630981
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'NightBreasts.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753675743047-109268347.jpg',
  originalName: 'NightBreasts.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753675743057_NightBreasts.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 1505ms
📊 Status: 200, Content-Length: 1667
🏁 Complete response received in 1505ms, size: 1667 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=81.20414018630981, pose=artistic_or_neutral, suggestive=0
✅ Transformation complete, final nudity score: 81.20414018630981
🎭 Pose analysis: artistic_or_neutral (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.018776093400945,
    leg_spread: 0.04153671860694885,
    reasoning: [],
    torso_angle: 6.857114064630232
  },
  pose_category: 'artistic_or_neutral',
  pose_detected: true,
  raw_metrics: {
    body_orientation: 'facing_camera',
    hip_bend_angle: 1.018776093400945,
    leg_spread: 0.04153671860694885,
    shoulder_width: 0.2704388499259949,
    torso_angle: 6.857114064630232
  },
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 56.84289813041686,
  nudity_contribution: 81.20414018630981,
  pose_contribution: 0,
  reasoning: [ 'nudity_detected_81.2%' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 2ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 1ms
Content flagged and added to moderation queue: 186
🔌 Queue database connection released
✅ Upload processing completed in 1513ms
📊 Result: success=true, status=flagged, nudity=81.20414018630981
📤 Sending successful response to client...
✅ Response sent successfully
Received upload request: {
  model_id: '1',
  model_slug: 'escort-example',
  usage_intent: 'public_site',
  context_type: 'public_gallery',
  file: 'BlowJob.jpg'
}
🚀 Processing upload for model escort-example with intent: public_site
ContentModerationService processing: {
  filePath: '/Users/programmer/Projects/musenest/temp_uploads/temp-1753675770948-62799469.jpg',
  originalName: 'BlowJob.jpg',
  modelId: 1,
  modelSlug: 'escort-example',
  usageIntent: 'public_site',
  contextType: 'public_gallery'
}
Folder structure created for model: escort-example
🚀 Starting enhanced analysis for image: /Users/programmer/Projects/musenest/public/uploads/escort-example/originals/1753675770958_BlowJob.jpg
📡 Target: 52.15.235.216:5000/analyze
📝 Form data prepared: context_type=public_gallery, model_id=1
📤 Sending form data to enhanced API...
🔌 Socket assigned for enhanced API request
🌐 Socket connected to EC2
✅ Enhanced API response received in 6102ms
📊 Status: 200, Content-Length: 1087
🏁 Complete response received in 6111ms, size: 1087 bytes
✅ JSON parsed successfully, success: true
🎯 Transforming enhanced API response...
📊 Raw API results: nudity=79.22142744064331, pose=no_pose_detected, suggestive=0
✅ Transformation complete, final nudity score: 79.22142744064331
🎭 Pose analysis: no_pose_detected (0)
🔍 Debug - Full transformed result keys: [
  'detected_parts',
  'part_locations',
  'nudity_score',
  'has_nudity',
  'pose_analysis',
  'combined_assessment',
  'moderation_decision',
  'explicit_pose_score',
  'final_risk_score',
  'risk_level',
  'pose_category',
  'success',
  'analysis_version'
]
🔍 Debug - Pose analysis data: {
  details: { reasoning: [ 'no_pose_landmarks_found' ] },
  pose_category: 'no_pose_detected',
  pose_detected: false,
  suggestive_score: 0
}
🔍 Debug - Combined assessment: {
  final_risk_score: 71.29928469657898,
  nudity_contribution: 79.22142744064331,
  pose_contribution: 0,
  reasoning: [ 'content_appears_safe' ],
  risk_level: 'medium'
}
Error loading moderation rules: SyntaxError: "[object Object]" is not valid JSON
    at JSON.parse (<anonymous>)
    at /Users/programmer/Projects/musenest/src/services/ContentModerationService.js:31:33
    at Array.forEach (<anonymous>)
    at ContentModerationService.loadModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:28:19)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async ContentModerationService.applyModerationRules (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:428:54)
    at async ContentModerationService.processUploadedImage (/Users/programmer/Projects/musenest/src/services/ContentModerationService.js:140:38)
    at async /Users/programmer/Projects/musenest/routes/api/enhanced-content-moderation.js:89:24
💾 Storing moderation result in database...
🔌 Got dedicated database connection
✅ Database insert completed in 3ms
🔌 Database connection released
📋 Adding flagged content to moderation queue...
🔌 Got dedicated database connection for queue
✅ Queue insert completed in 5ms
Content flagged and added to moderation queue: 187
🔌 Queue database connection released
✅ Upload processing completed in 6121ms
📊 Result: success=true, status=flagged, nudity=79.22142744064331
📤 Sending successful response to client...
✅ Response sent successfully
