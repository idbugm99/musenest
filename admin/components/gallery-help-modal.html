<!-- Gallery Help Modal Component -->
<div class="modal fade" id="galleryHelpModal" tabindex="-1" aria-labelledby="galleryHelpTitle" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-info text-white">
        <h4 class="modal-title" id="galleryHelpTitle">
          <i class="fas fa-question-circle me-2"></i>Gallery Image Picker - Help
        </h4>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      
      <div class="modal-body">
        <div class="row">
          <div class="col-12">
            <!-- Quick Start -->
            <div class="mb-4">
              <h5 class="text-primary">
                <i class="fas fa-rocket me-2"></i>Quick Start
              </h5>
              <p class="mb-2">The Gallery Image Picker helps you add multiple images to gallery sections quickly and safely:</p>
              <ol class="mb-0">
                <li><strong>Click "Add Images to Gallery"</strong> for any section</li>
                <li><strong>Select multiple images</strong> by clicking them</li>
                <li><strong>Use filters</strong> to find specific content types</li>
                <li><strong>Click "Add X to Gallery"</strong> to batch add selected images</li>
              </ol>
            </div>

            <!-- Safety Features -->
            <div class="mb-4">
              <h5 class="text-danger">
                <i class="fas fa-shield-alt me-2"></i>Safety & Content Controls
              </h5>
              
              <div class="row">
                <div class="col-md-6">
                  <div class="card border-success">
                    <div class="card-header bg-success text-white">
                      <h6 class="mb-0">
                        <i class="fas fa-eye me-1"></i>Public Sections
                      </h6>
                    </div>
                    <div class="card-body">
                      <p class="small mb-2"><strong>Strict Safety Controls:</strong></p>
                      <ul class="small mb-0">
                        <li>‚úÖ Only approved content allowed</li>
                        <li>‚úÖ Must be intended for public viewing</li>
                        <li>‚ùå Flagged/private content blocked</li>
                        <li>üîí Dangerous filters disabled</li>
                      </ul>
                    </div>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <div class="card border-warning">
                    <div class="card-header bg-warning text-dark">
                      <h6 class="mb-0">
                        <i class="fas fa-lock me-1"></i>Private Sections
                      </h6>
                    </div>
                    <div class="card-body">
                      <p class="small mb-2"><strong>Flexible Content:</strong></p>
                      <ul class="small mb-0">
                        <li>‚úÖ All approved & blurred content</li>
                        <li>‚ö†Ô∏è Flagged content with warnings</li>
                        <li>üîì All filter options available</li>
                        <li>üìã Admin choice required</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Features Overview -->
            <div class="mb-4">
              <h5 class="text-success">
                <i class="fas fa-star me-2"></i>Key Features
              </h5>
              
              <div class="row">
                <div class="col-md-6">
                  <h6><i class="fas fa-check-square me-1 text-primary"></i>Multi-Select</h6>
                  <ul class="small">
                    <li>Select multiple images at once</li>
                    <li>Selection persists across pages</li>
                    <li>Visual selection counters</li>
                  </ul>
                </div>
                
                <div class="col-md-6">
                  <h6><i class="fas fa-filter me-1 text-primary"></i>Smart Filtering</h6>
                  <ul class="small">
                    <li>Status: Approved, Blurred, All</li>
                    <li>Context: Public, Paysite, Private</li>
                    <li>Real-time search by filename</li>
                  </ul>
                </div>
                
                <div class="col-md-6">
                  <h6><i class="fas fa-chart-line me-1 text-primary"></i>Progress Tracking</h6>
                  <ul class="small">
                    <li>Real-time batch operation progress</li>
                    <li>Detailed success/failure results</li>
                    <li>Automatic deduplication</li>
                  </ul>
                </div>
                
                <div class="col-md-6">
                  <h6><i class="fas fa-keyboard me-1 text-primary"></i>Keyboard Support</h6>
                  <ul class="small">
                    <li>Arrow keys: Navigate images</li>
                    <li>Space: Toggle selection</li>
                    <li>Enter: Add selected images</li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Status Badges -->
            <div class="mb-4">
              <h5 class="text-info">
                <i class="fas fa-tags me-2"></i>Understanding Status Badges
              </h5>
              
              <div class="row">
                <div class="col-md-6">
                  <p class="mb-2"><strong>Moderation Status:</strong></p>
                  <div class="d-flex flex-wrap gap-2 mb-3">
                    <span class="badge bg-success">approved</span>
                    <span class="badge bg-primary">approved_blurred</span>
                    <span class="badge bg-warning text-dark">pending</span>
                    <span class="badge bg-danger">flagged</span>
                  </div>
                </div>
                
                <div class="col-md-6">
                  <p class="mb-2"><strong>Usage Context:</strong></p>
                  <div class="d-flex flex-wrap gap-2 mb-3">
                    <span class="badge" style="background-color: #20c997;">public_site</span>
                    <span class="badge" style="background-color: #6f42c1;">paysite</span>
                    <span class="badge bg-secondary">private</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Common Issues -->
            <div class="mb-4">
              <h5 class="text-warning">
                <i class="fas fa-exclamation-triangle me-2"></i>Common Issues & Solutions
              </h5>
              
              <div class="accordion" id="helpAccordion">
                <div class="accordion-item">
                  <h6 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#issue1">
                      Images won't add to public section
                    </button>
                  </h6>
                  <div id="issue1" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                    <div class="accordion-body small">
                      <strong>Cause:</strong> Public sections only accept approved content intended for public viewing.<br>
                      <strong>Solution:</strong> Check that images have "approved" status and "public_site" context. Use private sections for other content types.
                    </div>
                  </div>
                </div>
                
                <div class="accordion-item">
                  <h6 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#issue2">
                      Images show "Already in section"
                    </button>
                  </h6>
                  <div id="issue2" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                    <div class="accordion-body small">
                      <strong>Cause:</strong> The system automatically prevents duplicate images in sections.<br>
                      <strong>Solution:</strong> This is normal behavior. Images are skipped if they're already in the target section.
                    </div>
                  </div>
                </div>
                
                <div class="accordion-item">
                  <h6 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#issue3">
                      Selection lost when changing pages
                    </button>
                  </h6>
                  <div id="issue3" class="accordion-collapse collapse" data-bs-parent="#helpAccordion">
                    <div class="accordion-body small">
                      <strong>Cause:</strong> Browser issue or JavaScript error.<br>
                      <strong>Solution:</strong> Refresh the page and try again. Check browser console for errors. Use fewer images per batch if the problem persists.
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Tips & Best Practices -->
            <div class="mb-3">
              <h5 class="text-primary">
                <i class="fas fa-lightbulb me-2"></i>Tips & Best Practices
              </h5>
              
              <div class="row">
                <div class="col-md-6">
                  <h6 class="small text-muted mb-1">PERFORMANCE</h6>
                  <ul class="small">
                    <li>Use filters to reduce image counts</li>
                    <li>Process large batches in smaller chunks</li>
                    <li>Clear selection between different sections</li>
                  </ul>
                </div>
                
                <div class="col-md-6">
                  <h6 class="small text-muted mb-1">CONTENT MANAGEMENT</h6>
                  <ul class="small">
                    <li>Review results after batch operations</li>
                    <li>Use descriptive filenames for easier searching</li>
                    <li>Keep public sections limited to safe content</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-secondary" onclick="window.open('/docs/GALLERY_IMAGE_PICKER_USER_GUIDE.md', '_blank')">
          <i class="fas fa-book me-1"></i>Full Documentation
        </button>
        <button type="button" class="btn btn-primary" data-bs-dismiss="modal">
          <i class="fas fa-check me-1"></i>Got It
        </button>
      </div>
    </div>
  </div>
</div>

<script>
// Initialize help modal
document.addEventListener('DOMContentLoaded', function() {
  // Global function to show help
  window.showGalleryHelp = function() {
    const helpModal = new bootstrap.Modal(document.getElementById('galleryHelpModal'));
    helpModal.show();
  };
});
</script>