<!--
Gallery Analytics and Usage Reporting Component
Comprehensive analytics dashboard for gallery usage patterns and insights
-->

<div class="analytics-reporting">
    <!-- Analytics Overview -->
    <div class="analytics-overview">
        <div class="overview-header">
            <h2>Gallery Analytics & Usage Reports</h2>
            <div class="header-actions">
                <div class="date-range-selector">
                    <select id="dateRangeSelect" class="form-control">
                        <option value="7">Last 7 days</option>
                        <option value="30" selected>Last 30 days</option>
                        <option value="90">Last 90 days</option>
                        <option value="365">Last year</option>
                        <option value="custom">Custom range</option>
                    </select>
                </div>
                <button class="btn btn-outline" id="refreshAnalyticsBtn">
                    <i class="fas fa-sync-alt"></i>
                    Refresh Data
                </button>
                <button class="btn btn-primary" id="exportReportBtn">
                    <i class="fas fa-download"></i>
                    Export Report
                </button>
            </div>
        </div>

        <!-- Key Metrics Cards -->
        <div class="metrics-cards">
            <div class="metric-card visitors-card">
                <div class="metric-header">
                    <div class="metric-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="metric-info">
                        <h3>Total Visitors</h3>
                        <p class="metric-subtitle">Unique users</p>
                    </div>
                </div>
                <div class="metric-value" id="totalVisitors">--</div>
                <div class="metric-change" id="visitorsChange">
                    <span class="change-indicator">--</span>
                    <span class="change-text">vs previous period</span>
                </div>
            </div>

            <div class="metric-card views-card">
                <div class="metric-header">
                    <div class="metric-icon">
                        <i class="fas fa-eye"></i>
                    </div>
                    <div class="metric-info">
                        <h3>Gallery Views</h3>
                        <p class="metric-subtitle">Total views</p>
                    </div>
                </div>
                <div class="metric-value" id="totalGalleryViews">--</div>
                <div class="metric-change" id="viewsChange">
                    <span class="change-indicator">--</span>
                    <span class="change-text">vs previous period</span>
                </div>
            </div>

            <div class="metric-card engagement-card">
                <div class="metric-header">
                    <div class="metric-icon">
                        <i class="fas fa-mouse-pointer"></i>
                    </div>
                    <div class="metric-info">
                        <h3>Image Interactions</h3>
                        <p class="metric-subtitle">Clicks & views</p>
                    </div>
                </div>
                <div class="metric-value" id="totalInteractions">--</div>
                <div class="metric-change" id="interactionsChange">
                    <span class="change-indicator">--</span>
                    <span class="change-text">vs previous period</span>
                </div>
            </div>

            <div class="metric-card session-card">
                <div class="metric-header">
                    <div class="metric-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="metric-info">
                        <h3>Avg Session Duration</h3>
                        <p class="metric-subtitle">Time spent</p>
                    </div>
                </div>
                <div class="metric-value" id="avgSessionDuration">--</div>
                <div class="metric-change" id="sessionChange">
                    <span class="change-indicator">--</span>
                    <span class="change-text">vs previous period</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Analytics Details Section -->
    <div class="analytics-details">
        
        <!-- Traffic Analytics -->
        <div class="analytics-section" id="trafficAnalyticsSection">
            <div class="section-header">
                <h3>
                    <i class="fas fa-chart-line"></i>
                    Traffic & Engagement Analytics
                </h3>
                <div class="section-controls">
                    <button class="btn btn-sm btn-outline" id="trafficViewModeBtn" data-view="chart">
                        <i class="fas fa-chart-bar"></i>
                        Chart View
                    </button>
                </div>
            </div>
            
            <div class="analytics-content">
                <div class="chart-grid">
                    <div class="chart-container">
                        <h4>Daily Visitors & Views</h4>
                        <canvas id="trafficChart" width="400" height="200"></canvas>
                    </div>
                    
                    <div class="chart-container">
                        <h4>User Engagement Over Time</h4>
                        <canvas id="engagementChart" width="400" height="200"></canvas>
                    </div>
                </div>

                <div class="traffic-stats">
                    <div class="stat-group">
                        <h5>Visitor Statistics</h5>
                        <div class="stat-list">
                            <div class="stat-item">
                                <label>New Visitors</label>
                                <div class="stat-value" id="newVisitors">-- <span class="stat-percent">(--%)</span></div>
                            </div>
                            <div class="stat-item">
                                <label>Returning Visitors</label>
                                <div class="stat-value" id="returningVisitors">-- <span class="stat-percent">(--%)</span></div>
                            </div>
                            <div class="stat-item">
                                <label>Bounce Rate</label>
                                <div class="stat-value" id="bounceRate">--%</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stat-group">
                        <h5>Engagement Metrics</h5>
                        <div class="stat-list">
                            <div class="stat-item">
                                <label>Pages per Session</label>
                                <div class="stat-value" id="pagesPerSession">--</div>
                            </div>
                            <div class="stat-item">
                                <label>Average Time on Page</label>
                                <div class="stat-value" id="avgTimeOnPage">-- min</div>
                            </div>
                            <div class="stat-item">
                                <label>Interaction Rate</label>
                                <div class="stat-value" id="interactionRate">--%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gallery Performance Analytics -->
        <div class="analytics-section" id="galleryPerformanceSection">
            <div class="section-header">
                <h3>
                    <i class="fas fa-images"></i>
                    Gallery Performance Analytics
                </h3>
                <div class="section-controls">
                    <select id="galleryFilterSelect" class="form-control form-control-sm">
                        <option value="all">All Galleries</option>
                        <option value="most-viewed">Most Viewed</option>
                        <option value="highest-engagement">Highest Engagement</option>
                        <option value="poorest-performance">Needs Improvement</option>
                    </select>
                </div>
            </div>
            
            <div class="analytics-content">
                <div class="gallery-performance-list" id="galleryPerformanceList">
                    <!-- Gallery performance items populated dynamically -->
                </div>

                <div class="performance-insights">
                    <div class="insight-card">
                        <h4><i class="fas fa-trophy"></i> Top Performing Galleries</h4>
                        <div class="top-galleries" id="topGalleries">
                            <!-- Top galleries populated dynamically -->
                        </div>
                    </div>
                    
                    <div class="insight-card">
                        <h4><i class="fas fa-star"></i> Most Engaged Images</h4>
                        <div class="top-images" id="topImages">
                            <!-- Top images populated dynamically -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Behavior Analytics -->
        <div class="analytics-section" id="userBehaviorSection">
            <div class="section-header">
                <h3>
                    <i class="fas fa-user-friends"></i>
                    User Behavior Analytics
                </h3>
                <div class="section-controls">
                    <button class="btn btn-sm btn-outline" id="heatmapToggleBtn">
                        <i class="fas fa-fire"></i>
                        Show Heatmap
                    </button>
                </div>
            </div>
            
            <div class="analytics-content">
                <div class="behavior-grid">
                    <div class="behavior-chart">
                        <h4>User Journey Flow</h4>
                        <div class="flow-visualization" id="userFlowChart">
                            <!-- User flow visualization -->
                        </div>
                    </div>
                    
                    <div class="behavior-stats">
                        <h4>Behavior Patterns</h4>
                        <div class="pattern-list">
                            <div class="pattern-item">
                                <div class="pattern-icon">
                                    <i class="fas fa-search"></i>
                                </div>
                                <div class="pattern-info">
                                    <h5>Search Usage</h5>
                                    <div class="pattern-value" id="searchUsage">--% of sessions</div>
                                    <div class="pattern-details" id="searchDetails">-- avg queries</div>
                                </div>
                            </div>
                            
                            <div class="pattern-item">
                                <div class="pattern-icon">
                                    <i class="fas fa-filter"></i>
                                </div>
                                <div class="pattern-info">
                                    <h5>Filter Usage</h5>
                                    <div class="pattern-value" id="filterUsage">--% of sessions</div>
                                    <div class="pattern-details" id="filterDetails">-- most used</div>
                                </div>
                            </div>
                            
                            <div class="pattern-item">
                                <div class="pattern-icon">
                                    <i class="fas fa-expand"></i>
                                </div>
                                <div class="pattern-info">
                                    <h5>Lightbox Usage</h5>
                                    <div class="pattern-value" id="lightboxUsage">--% of interactions</div>
                                    <div class="pattern-details" id="lightboxDetails">-- avg per session</div>
                                </div>
                            </div>
                            
                            <div class="pattern-item">
                                <div class="pattern-icon">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <div class="pattern-info">
                                    <h5>Mobile Usage</h5>
                                    <div class="pattern-value" id="mobileUsage">--% of traffic</div>
                                    <div class="pattern-details" id="mobileDetails">-- avg session time</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Click Heatmap -->
                <div class="heatmap-container" id="heatmapContainer" style="display: none;">
                    <h4>Click Heatmap</h4>
                    <div class="heatmap-visualization" id="clickHeatmap">
                        <!-- Heatmap visualization -->
                    </div>
                    <div class="heatmap-legend">
                        <span>Low Activity</span>
                        <div class="legend-gradient"></div>
                        <span>High Activity</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search & Filter Analytics -->
        <div class="analytics-section" id="searchAnalyticsSection">
            <div class="section-header">
                <h3>
                    <i class="fas fa-search"></i>
                    Search & Filter Analytics
                </h3>
                <button class="btn btn-sm btn-primary" id="exportSearchDataBtn">
                    <i class="fas fa-download"></i>
                    Export Search Data
                </button>
            </div>
            
            <div class="analytics-content">
                <div class="search-grid">
                    <div class="search-queries">
                        <h4>Top Search Queries</h4>
                        <div class="query-list" id="topQueries">
                            <!-- Top search queries populated dynamically -->
                        </div>
                    </div>
                    
                    <div class="search-stats">
                        <h4>Search Performance</h4>
                        <div class="search-metrics">
                            <div class="search-metric">
                                <label>Total Searches</label>
                                <div class="metric-value" id="totalSearches">--</div>
                            </div>
                            <div class="search-metric">
                                <label>Avg Results Found</label>
                                <div class="metric-value" id="avgResultsFound">--</div>
                            </div>
                            <div class="search-metric">
                                <label>Zero Results Rate</label>
                                <div class="metric-value" id="zeroResultsRate">--%</div>
                            </div>
                            <div class="search-metric">
                                <label>Search Exit Rate</label>
                                <div class="metric-value" id="searchExitRate">--%</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="filter-analytics">
                    <h4>Filter Usage Patterns</h4>
                    <div class="filter-chart-container">
                        <canvas id="filterUsageChart" width="400" height="200"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance Insights & Recommendations -->
        <div class="analytics-section" id="insightsSection">
            <div class="section-header">
                <h3>
                    <i class="fas fa-lightbulb"></i>
                    Insights & Recommendations
                </h3>
                <button class="btn btn-sm btn-primary" id="generateInsightsBtn">
                    <i class="fas fa-magic"></i>
                    Generate New Insights
                </button>
            </div>
            
            <div class="analytics-content">
                <div class="insights-grid">
                    <div class="insights-list" id="insightsList">
                        <!-- Insights populated dynamically -->
                    </div>
                    
                    <div class="recommendations-list" id="recommendationsList">
                        <!-- Recommendations populated dynamically -->
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- Custom Date Range Modal -->
    <div class="analytics-modal" id="customDateModal" style="display: none;">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Custom Date Range</h3>
                <button class="modal-close" id="closeDateModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="date-range-form">
                    <div class="form-group">
                        <label>Start Date</label>
                        <input type="date" id="customStartDate" class="form-control">
                    </div>
                    <div class="form-group">
                        <label>End Date</label>
                        <input type="date" id="customEndDate" class="form-control">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDateRange">Cancel</button>
                <button class="btn btn-primary" id="applyDateRange">Apply Range</button>
            </div>
        </div>
    </div>

</div>

<!-- Analytics Templates -->
<script type="text/template" id="galleryPerformanceTemplate">
    <div class="gallery-performance-item" data-gallery-id="{{id}}">
        <div class="gallery-info">
            <div class="gallery-thumbnail">
                {{#if thumbnail}}
                <img src="{{thumbnail}}" alt="{{name}}" loading="lazy">
                {{else}}
                <div class="thumbnail-placeholder">
                    <i class="fas fa-images"></i>
                </div>
                {{/if}}
            </div>
            <div class="gallery-details">
                <h4>{{name}}</h4>
                <p class="gallery-meta">{{type}} • {{imageCount}} images</p>
            </div>
        </div>
        
        <div class="gallery-metrics">
            <div class="metric-item">
                <label>Views</label>
                <div class="metric-number">{{views}}</div>
            </div>
            <div class="metric-item">
                <label>Interactions</label>
                <div class="metric-number">{{interactions}}</div>
            </div>
            <div class="metric-item">
                <label>Engagement</label>
                <div class="metric-number">{{engagementRate}}%</div>
            </div>
            <div class="metric-item">
                <label>Avg Time</label>
                <div class="metric-number">{{avgViewTime}}s</div>
            </div>
        </div>
        
        <div class="gallery-actions">
            <button class="btn btn-sm btn-outline" data-action="view-details" data-gallery-id="{{id}}">
                <i class="fas fa-chart-line"></i>
                Details
            </button>
            <button class="btn btn-sm btn-primary" data-action="optimize" data-gallery-id="{{id}}">
                <i class="fas fa-magic"></i>
                Optimize
            </button>
        </div>
    </div>
</script>

<script type="text/template" id="insightTemplate">
    <div class="insight-item {{priority}}">
        <div class="insight-icon">
            <i class="fas fa-{{icon}}"></i>
        </div>
        <div class="insight-content">
            <div class="insight-header">
                <h4>{{title}}</h4>
                <span class="priority-badge {{priority}}">{{priority}}</span>
            </div>
            <p class="insight-description">{{description}}</p>
            <div class="insight-impact">
                <strong>Potential Impact:</strong> {{impact}}
            </div>
            {{#if metrics}}
            <div class="insight-metrics">
                {{#each metrics}}
                <span class="insight-metric">{{this.label}}: <strong>{{this.value}}</strong></span>
                {{/each}}
            </div>
            {{/if}}
        </div>
        <div class="insight-actions">
            <button class="btn btn-sm btn-outline" data-action="learn-more" data-insight-id="{{id}}">
                Learn More
            </button>
            {{#if actionable}}
            <button class="btn btn-sm btn-primary" data-action="implement" data-insight-id="{{id}}">
                Implement
            </button>
            {{/if}}
        </div>
    </div>
</script>

<style>
/* Analytics Reporting Specific Styles */
.analytics-reporting {
    padding: 0;
}

.analytics-overview {
    margin-bottom: 2rem;
}

.overview-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.overview-header h2 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 600;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.date-range-selector select {
    min-width: 150px;
}

/* Metrics Cards */
.metrics-cards {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.metric-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 0.75rem;
    padding: 1.5rem;
    transition: all 0.2s ease-in-out;
}

.metric-card:hover {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
}

.metric-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
}

.metric-icon {
    width: 3rem;
    height: 3rem;
    border-radius: 0.75rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
    color: white;
}

.visitors-card .metric-icon {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
}

.views-card .metric-icon {
    background: linear-gradient(135deg, #10b981, #059669);
}

.engagement-card .metric-icon {
    background: linear-gradient(135deg, #f59e0b, #d97706);
}

.session-card .metric-icon {
    background: linear-gradient(135deg, #8b5cf6, #7c3aed);
}

.metric-info h3 {
    margin: 0 0 0.25rem 0;
    font-size: 1.125rem;
    font-weight: 600;
}

.metric-subtitle {
    margin: 0;
    font-size: 0.75rem;
    color: #64748b;
}

.metric-value {
    font-size: 2.5rem;
    font-weight: 700;
    color: #1e293b;
    margin-bottom: 0.5rem;
}

.metric-change {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}

.change-indicator {
    font-weight: 600;
}

.change-indicator.positive {
    color: #10b981;
}

.change-indicator.negative {
    color: #ef4444;
}

.change-text {
    color: #64748b;
}

/* Analytics Sections */
.analytics-section {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 0.75rem;
    margin-bottom: 2rem;
    overflow: hidden;
}

.analytics-section .section-header {
    padding: 1.5rem;
    border-bottom: 1px solid #e2e8f0;
    background: #f8fafc;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.analytics-section .section-header h3 {
    margin: 0;
    font-size: 1.125rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.section-controls {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.analytics-content {
    padding: 1.5rem;
}

/* Charts */
.chart-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

.chart-container {
    background: #f8fafc;
    border-radius: 0.5rem;
    padding: 1rem;
}

.chart-container h4 {
    margin: 0 0 1rem 0;
    font-size: 1rem;
    font-weight: 600;
    text-align: center;
}

/* Traffic Stats */
.traffic-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
}

.stat-group h5 {
    margin: 0 0 1rem 0;
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
}

.stat-list {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.stat-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem;
    background: #f9fafb;
    border-radius: 0.375rem;
}

.stat-item label {
    font-size: 0.875rem;
    color: #6b7280;
}

.stat-value {
    font-weight: 600;
    color: #111827;
}

.stat-percent {
    font-size: 0.75rem;
    color: #6b7280;
    font-weight: normal;
}

/* Gallery Performance */
.gallery-performance-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2rem;
}

.gallery-performance-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    background: #f9fafb;
}

.gallery-info {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex: 1;
}

.gallery-thumbnail {
    width: 4rem;
    height: 4rem;
    border-radius: 0.5rem;
    overflow: hidden;
    background: #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
}

.gallery-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.thumbnail-placeholder {
    color: #9ca3af;
}

.gallery-details h4 {
    margin: 0 0 0.25rem 0;
    font-size: 1rem;
    font-weight: 600;
}

.gallery-meta {
    margin: 0;
    font-size: 0.75rem;
    color: #6b7280;
}

.gallery-metrics {
    display: flex;
    gap: 2rem;
}

.metric-item {
    text-align: center;
}

.metric-item label {
    display: block;
    font-size: 0.75rem;
    color: #6b7280;
    margin-bottom: 0.25rem;
}

.metric-number {
    font-size: 1.25rem;
    font-weight: 600;
    color: #111827;
}

.gallery-actions {
    display: flex;
    gap: 0.5rem;
}

/* Performance Insights */
.performance-insights {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
}

.insight-card {
    background: #f8fafc;
    border-radius: 0.5rem;
    padding: 1.5rem;
}

.insight-card h4 {
    margin: 0 0 1rem 0;
    font-size: 1rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

/* User Behavior */
.behavior-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

.behavior-chart {
    background: #f8fafc;
    border-radius: 0.5rem;
    padding: 1.5rem;
}

.flow-visualization {
    height: 200px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.375rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #9ca3af;
    font-style: italic;
}

.pattern-list {
    display: flex;
    flex-direction: column;
    gap: 1rem;
}

.pattern-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: #f8fafc;
    border-radius: 0.5rem;
}

.pattern-icon {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    background: #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #6b7280;
}

.pattern-info h5 {
    margin: 0 0 0.25rem 0;
    font-size: 0.875rem;
    font-weight: 600;
}

.pattern-value {
    font-size: 1.125rem;
    font-weight: 700;
    color: #111827;
}

.pattern-details {
    font-size: 0.75rem;
    color: #6b7280;
}

/* Heatmap */
.heatmap-container {
    margin-top: 2rem;
    padding: 1.5rem;
    background: #f8fafc;
    border-radius: 0.5rem;
}

.heatmap-visualization {
    height: 300px;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 0.375rem;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #9ca3af;
    font-style: italic;
}

.heatmap-legend {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    font-size: 0.875rem;
    color: #6b7280;
}

.legend-gradient {
    width: 100px;
    height: 10px;
    background: linear-gradient(90deg, #dbeafe, #3b82f6);
    border-radius: 5px;
}

/* Search Analytics */
.search-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
    margin-bottom: 2rem;
}

.query-list {
    max-height: 300px;
    overflow-y: auto;
}

.search-metrics {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.search-metric {
    padding: 1rem;
    background: #f8fafc;
    border-radius: 0.5rem;
    text-align: center;
}

.search-metric label {
    display: block;
    font-size: 0.75rem;
    color: #6b7280;
    margin-bottom: 0.5rem;
}

/* Insights */
.insights-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 2rem;
}

.insight-item {
    display: flex;
    gap: 1rem;
    padding: 1rem;
    border: 1px solid #e5e7eb;
    border-radius: 0.5rem;
    background: #f9fafb;
    margin-bottom: 1rem;
}

.insight-item.high {
    border-left: 4px solid #ef4444;
}

.insight-item.medium {
    border-left: 4px solid #f59e0b;
}

.insight-item.low {
    border-left: 4px solid #10b981;
}

.insight-content {
    flex: 1;
}

.insight-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

.insight-header h4 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
}

.priority-badge {
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    text-transform: capitalize;
}

.priority-badge.high {
    background: #dc2626;
    color: white;
}

.priority-badge.medium {
    background: #d97706;
    color: white;
}

.priority-badge.low {
    background: #16a34a;
    color: white;
}

/* Analytics Modal */
.analytics-modal {
    position: fixed;
    inset: 0;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.analytics-modal .modal-content {
    background: white;
    border-radius: 0.75rem;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    width: 100%;
    max-width: 32rem;
    overflow: hidden;
}

/* Responsive Design */
@media (max-width: 1024px) {
    .metrics-cards {
        grid-template-columns: repeat(2, 1fr);
    }
    
    .chart-grid {
        grid-template-columns: 1fr;
    }
    
    .traffic-stats,
    .behavior-grid,
    .search-grid,
    .insights-grid {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 640px) {
    .metrics-cards {
        grid-template-columns: 1fr;
    }
    
    .overview-header {
        flex-direction: column;
        gap: 1rem;
        align-items: flex-start;
    }
    
    .header-actions {
        width: 100%;
        justify-content: space-between;
    }
    
    .gallery-performance-item {
        flex-direction: column;
        align-items: flex-start;
    }
    
    .gallery-metrics {
        width: 100%;
        justify-content: space-between;
    }
}
</style>

<script type="module" src="/admin/js/analytics-reporting.js"></script>