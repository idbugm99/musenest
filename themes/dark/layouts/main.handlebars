<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{pageTitle}} - {{siteName}}</title>
    <meta name="description" content="{{metaDescription}}">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Universal Icon System -->
    <link rel="stylesheet" href="/templates/universal/universal-icons.css">
    
    <!-- Dark Sophisticated Boudoir Theme Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600&family=Inter:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- Dark Sophisticated Boudoir Theme CSS -->
    <link href="/public/themes/dark/dark-boudoir.css" rel="stylesheet">
    
    <style>
        :root {
            /* Note: Theme colors are loaded dynamically via /api/theme-colors/{themeId}/css */
            
            /* Typography System */
            --font-display: 'Playfair Display', Georgia, serif;
            --font-body: 'Inter', system-ui, sans-serif;
            --font-accent: 'Dancing Script', cursive;
            
            /* Shadow System */
            --shadow-sm: 0 1px 3px rgba(212, 175, 55, 0.1);
            --shadow-md: 0 4px 12px rgba(212, 175, 55, 0.15);
            --shadow-lg: 0 8px 24px rgba(212, 175, 55, 0.2);
            --shadow-xl: 0 16px 48px rgba(212, 175, 55, 0.25);
            
            /* Radius System */
            --radius-sm: 0.375rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
            
            /* Spacing System */
            --space-xs: 0.5rem;
            --space-sm: 1rem;
            --space-md: 1.5rem;
            --space-lg: 2rem;
            --space-xl: 3rem;
            --space-2xl: 4rem;
            --space-3xl: 6rem;
        }
        
        /* Base Styling */
        body {
            font-family: var(--font-body);
            background: var(--theme-bg);
            color: var(--theme-text);
            line-height: 1.6;
            margin: 0;
            padding: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Silk Float Animation */
        @keyframes silk-float {
            0%, 100% { transform: translateY(0) scale(1); }
            50% { transform: translateY(-20px) scale(1.05); }
        }
        
        /* Responsive Grid Utilities */
        @media (max-width: 768px) {
            .boudoir-grid-2,
            .boudoir-grid-3,
            .boudoir-grid-4 {
                grid-template-columns: 1fr !important;
            }
            
            .boudoir-container {
                padding: 0 var(--space-sm) !important;
            }
        }
        
        /* Universal Gallery Integration */
        .universal-gallery * {
            background: var(--theme-bg) !important;
        }
        
        .gallery-hero {
            background: var(--theme-bg) !important;
        }
        
        .universal-gallery-section {
            background: var(--theme-surface) !important;
            border: 1px solid var(--theme-border) !important;
        }
    </style>
    
    <!-- Dynamic theme color CSS -->
    <link rel="stylesheet" href="/api/theme-colors/{{#if previewThemeId}}{{previewThemeId}}{{else}}{{themeId}}{{/if}}/css?v={{timestamp}}&force=1{{#if previewPaletteId}}&preview_palette={{previewPaletteId}}{{/if}}">
    <!-- Responsive Design -->
    <link rel="stylesheet" href="/themes/dark/assets/dark-responsive.css">
</head>
<body data-theme="{{themeId}}" {{#if previewThemeId}}data-preview-theme="{{previewThemeId}}"{{/if}}>
    
    <!-- Navigation -->
    {{>navigation}}
    
    <!-- Main Content -->
    <main>
        {{{body}}}
    </main>
    
    <!-- Footer -->
    {{>footer}}
    
    <!-- AOS Animation Library -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- Initialize AOS -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            AOS.init({
                duration: 800,
                easing: 'ease-out-cubic',
                once: true,
                offset: 100,
                disable: function() {
                    return window.innerWidth < 768;
                }
            });
        });
        
        // Parallax effect for boudoir theme
        if (window.innerWidth >= 768 && !window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            window.addEventListener('scroll', function() {
                const scrolled = window.pageYOffset;
                const parallaxElements = document.querySelectorAll('[data-parallax]');
                
                parallaxElements.forEach(function(element) {
                    const speed = element.dataset.parallax || 0.5;
                    const yPos = -(scrolled * speed);
                    element.style.transform = `translateY(${yPos}px)`;
                });
            });
        }
    </script>
    
    <!-- Additional page-specific scripts -->
    {{#if additionalJS}}
    <script>
        {{{additionalJS}}}
    </script>
    {{/if}}
    
</body>
</html>