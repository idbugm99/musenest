{{!-- Gallery Sections Page Template --}}
{{!-- Part of Phase 3: Frontend Components Development --}}
<div class="admin-page-wrapper">
    <div class="page-header mb-4">
        <div class="d-flex justify-content-between align-items-start">
            <div>
                <h1 class="mb-2">
                    <i class="fas fa-layer-group me-2 text-success"></i>Gallery Sections
                </h1>
                <p class="text-muted mb-0">Create and manage gallery layouts with different display styles</p>
            </div>
            <div class="d-flex gap-2">
                <a href="/{{modelSlug}}/admin/media-library" class="btn btn-outline-primary">
                    <i class="fas fa-images me-1"></i>Media Library
                </a>
                <a href="/{{modelSlug}}/admin/content" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-1"></i>Back to Dashboard
                </a>
            </div>
        </div>
    </div>
    
    {{!-- Navigation Breadcrumb --}}
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="/{{modelSlug}}/admin">Dashboard</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Gallery Sections</li>
        </ol>
    </nav>
    
    {{!-- Help Text Card --}}
    <div class="info-card card mb-4">
        <div class="card-body">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h6 class="fw-bold text-info mb-2">
                        <i class="fas fa-info-circle me-2"></i>Gallery Sections Overview
                    </h6>
                    <p class="mb-0 small text-muted">
                        Gallery sections allow you to create different layouts for displaying your media. 
                        Choose from grid, masonry, carousel, or lightbox layouts, each with customizable settings. 
                        Assign specific media to each section and control the display order.
                    </p>
                </div>
                <div class="col-md-4 text-end">
                    <div class="layout-icons d-flex justify-content-end gap-2">
                        <div class="layout-icon" title="Grid Layout">
                            <i class="fas fa-th text-primary"></i>
                        </div>
                        <div class="layout-icon" title="Masonry Layout">
                            <i class="fas fa-th-large text-purple"></i>
                        </div>
                        <div class="layout-icon" title="Carousel">
                            <i class="fas fa-images text-orange"></i>
                        </div>
                        <div class="layout-icon" title="Lightbox Grid">
                            <i class="fas fa-th-list text-success"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    {{!-- Main Gallery Sections Component --}}
    {{{renderComponent 'gallery-sections'}}}
</div>

{{!-- Page-specific CSS --}}
<style>
.admin-page-wrapper {
    background: #f8f9fa;
    min-height: calc(100vh - 60px);
    padding: 20px;
}

.page-header {
    background: white;
    border-radius: 12px;
    padding: 30px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    border: 1px solid #e9ecef;
}

.page-header h1 {
    font-size: 2.5rem;
    font-weight: 600;
    color: #333;
}

.breadcrumb {
    background: white;
    padding: 12px 20px;
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    margin: 0;
}

.breadcrumb-item a {
    color: #007bff;
    text-decoration: none;
}

.breadcrumb-item a:hover {
    text-decoration: underline;
}

.info-card {
    border: 1px solid #e3f2fd;
    background: linear-gradient(135deg, #e3f2fd 0%, #f8f9fa 100%);
}

.info-card .card-body {
    padding: 20px;
}

.layout-icons {
    gap: 10px;
}

.layout-icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    font-size: 1.2rem;
}

.text-purple { color: #7b1fa2 !important; }
.text-orange { color: #f57c00 !important; }

@media (max-width: 768px) {
    .admin-page-wrapper {
        padding: 15px;
    }
    
    .page-header {
        padding: 20px;
    }
    
    .page-header h1 {
        font-size: 2rem;
    }
    
    .page-header .d-flex {
        flex-direction: column;
        gap: 15px;
        align-items: stretch !important;
    }
    
    .page-header .d-flex .btn {
        justify-content: center;
    }
    
    .info-card .row {
        text-align: center;
    }
    
    .layout-icons {
        justify-content: center !important;
        margin-top: 15px;
    }
}
</style>

{{!-- Include required JavaScript files --}}
<script src="/admin/js/gallery-sections.js"></script>

{{!-- Page-specific JavaScript --}}
<script>
// Initialize gallery sections when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
    console.log('📄 Gallery Sections page loaded');
    
    // Initialize MuseNest Gallery Sections
    if (typeof MuseNestGallerySections !== 'undefined') {
        window.gallerySections = new MuseNestGallerySections('{{modelSlug}}');
        console.log('✅ MuseNest Gallery Sections initialized');
    } else {
        console.error('❌ MuseNestGallerySections class not found');
    }
    
    // Handle any success messages from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('created')) {
        setTimeout(() => {
            if (window.gallerySections && window.gallerySections.showNotification) {
                window.gallerySections.showNotification('Gallery section created successfully!', 'success');
            }
        }, 1000);
    }
    
    if (urlParams.get('updated')) {
        setTimeout(() => {
            if (window.gallerySections && window.gallerySections.showNotification) {
                window.gallerySections.showNotification('Gallery section updated successfully!', 'success');
            }
        }, 1000);
    }
});
</script>